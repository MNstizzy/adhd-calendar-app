const jT=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};jT();var M={exports:{}},xe={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ly=Object.getOwnPropertySymbols,$T=Object.prototype.hasOwnProperty,WT=Object.prototype.propertyIsEnumerable;function qT(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function HT(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var A1=HT()?Object.assign:function(t,e){for(var n,r=qT(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)$T.call(n,o)&&(r[o]=n[o]);if(ly){i=ly(n);for(var l=0;l<i.length;l++)WT.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=A1,ko=60103,P1=60106;xe.Fragment=60107;xe.StrictMode=60108;xe.Profiler=60114;var R1=60109,N1=60110,D1=60112;xe.Suspense=60113;var O1=60115,M1=60116;if(typeof Symbol=="function"&&Symbol.for){var En=Symbol.for;ko=En("react.element"),P1=En("react.portal"),xe.Fragment=En("react.fragment"),xe.StrictMode=En("react.strict_mode"),xe.Profiler=En("react.profiler"),R1=En("react.provider"),N1=En("react.context"),D1=En("react.forward_ref"),xe.Suspense=En("react.suspense"),O1=En("react.memo"),M1=En("react.lazy")}var cy=typeof Symbol=="function"&&Symbol.iterator;function GT(t){return t===null||typeof t!="object"?null:(t=cy&&t[cy]||t["@@iterator"],typeof t=="function"?t:null)}function Pl(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F1={};function Ao(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||L1}Ao.prototype.isReactComponent={};Ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Pl(85));this.updater.enqueueSetState(this,t,e,"setState")};Ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V1(){}V1.prototype=Ao.prototype;function Dp(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||L1}var Op=Dp.prototype=new V1;Op.constructor=Dp;Np(Op,Ao.prototype);Op.isPureReactComponent=!0;var Mp={current:null},U1=Object.prototype.hasOwnProperty,B1={key:!0,ref:!0,__self:!0,__source:!0};function z1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)U1.call(e,r)&&!B1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ko,type:t,key:s,ref:o,props:i,_owner:Mp.current}}function KT(t,e){return{$$typeof:ko,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ko}function XT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var uy=/\/+/g;function ph(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XT(""+t.key):e.toString(36)}function Vc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ko:case P1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ph(o,0):r,Array.isArray(i)?(n="",t!=null&&(n=t.replace(uy,"$&/")+"/"),Vc(i,e,n,"",function(d){return d})):i!=null&&(Lp(i)&&(i=KT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(uy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+ph(s,l);o+=Vc(s,e,n,c,i)}else if(c=GT(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+ph(s,l++),o+=Vc(s,e,n,c,i);else if(s==="object")throw e=""+t,Error(Pl(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function gc(t,e,n){if(t==null)return t;var r=[],i=0;return Vc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function QT(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var j1={current:null};function Cr(){var t=j1.current;if(t===null)throw Error(Pl(321));return t}var YT={ReactCurrentDispatcher:j1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Mp,IsSomeRendererActing:{current:!1},assign:Np};xe.Children={map:gc,forEach:function(t,e,n){gc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gc(t,function(){e++}),e},toArray:function(t){return gc(t,function(e){return e})||[]},only:function(t){if(!Lp(t))throw Error(Pl(143));return t}};xe.Component=Ao;xe.PureComponent=Dp;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT;xe.cloneElement=function(t,e,n){if(t==null)throw Error(Pl(267,t));var r=Np({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Mp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)U1.call(e,c)&&!B1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ko,type:t.type,key:i,ref:s,props:r,_owner:o}};xe.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:N1,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:R1,_context:t},t.Consumer=t};xe.createElement=z1;xe.createFactory=function(t){var e=z1.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:D1,render:t}};xe.isValidElement=Lp;xe.lazy=function(t){return{$$typeof:M1,_payload:{_status:-1,_result:t},_init:QT}};xe.memo=function(t,e){return{$$typeof:O1,type:t,compare:e===void 0?null:e}};xe.useCallback=function(t,e){return Cr().useCallback(t,e)};xe.useContext=function(t,e){return Cr().useContext(t,e)};xe.useDebugValue=function(){};xe.useEffect=function(t,e){return Cr().useEffect(t,e)};xe.useImperativeHandle=function(t,e,n){return Cr().useImperativeHandle(t,e,n)};xe.useLayoutEffect=function(t,e){return Cr().useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Cr().useMemo(t,e)};xe.useReducer=function(t,e,n){return Cr().useReducer(t,e,n)};xe.useRef=function(t){return Cr().useRef(t)};xe.useState=function(t){return Cr().useState(t)};xe.version="17.0.2";M.exports=xe;var Ee=M.exports,Fp={exports:{}},gn={},$1={exports:{}},W1={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var c=null,d=null,f=function(){if(c!==null)try{var z=t.unstable_now();c(!0,z),c=null}catch(V){throw setTimeout(f,0),V}};e=function(z){c!==null?setTimeout(e,0,z):(c=z,setTimeout(f,0))},n=function(z,V){d=setTimeout(z,V)},r=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var v=window.setTimeout,g=window.clearTimeout;if(typeof console!="undefined"){var E=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof E!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var P=!1,R=null,y=-1,_=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},i=function(){},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5};var D=new MessageChannel,O=D.port2;D.port1.onmessage=function(){if(R!==null){var z=t.unstable_now();k=z+_;try{R(!0,z)?O.postMessage(null):(P=!1,R=null)}catch(V){throw O.postMessage(null),V}}else P=!1},e=function(z){R=z,P||(P=!0,O.postMessage(null))},n=function(z,V){y=v(function(){z(t.unstable_now())},V)},r=function(){g(y),y=-1}}function B(z,V){var $=z.length;z.push(V);e:for(;;){var re=$-1>>>1,ee=z[re];if(ee!==void 0&&0<S(ee,V))z[re]=V,z[$]=ee,$=re;else break e}}function F(z){return z=z[0],z===void 0?null:z}function b(z){var V=z[0];if(V!==void 0){var $=z.pop();if($!==V){z[0]=$;e:for(var re=0,ee=z.length;re<ee;){var ue=2*(re+1)-1,_e=z[ue],Re=ue+1,de=z[Re];if(_e!==void 0&&0>S(_e,$))de!==void 0&&0>S(de,_e)?(z[re]=de,z[Re]=$,re=Re):(z[re]=_e,z[ue]=$,re=ue);else if(de!==void 0&&0>S(de,$))z[re]=de,z[Re]=$,re=Re;else break e}}return V}return null}function S(z,V){var $=z.sortIndex-V.sortIndex;return $!==0?$:z.id-V.id}var T=[],C=[],x=1,N=null,w=3,G=!1,J=!1,se=!1;function me(z){for(var V=F(C);V!==null;){if(V.callback===null)b(C);else if(V.startTime<=z)b(C),V.sortIndex=V.expirationTime,B(T,V);else break;V=F(C)}}function ye(z){if(se=!1,me(z),!J)if(F(T)!==null)J=!0,e(K);else{var V=F(C);V!==null&&n(ye,V.startTime-z)}}function K(z,V){J=!1,se&&(se=!1,r()),G=!0;var $=w;try{for(me(V),N=F(T);N!==null&&(!(N.expirationTime>V)||z&&!t.unstable_shouldYield());){var re=N.callback;if(typeof re=="function"){N.callback=null,w=N.priorityLevel;var ee=re(N.expirationTime<=V);V=t.unstable_now(),typeof ee=="function"?N.callback=ee:N===F(T)&&b(T),me(V)}else b(T);N=F(T)}if(N!==null)var ue=!0;else{var _e=F(C);_e!==null&&n(ye,_e.startTime-V),ue=!1}return ue}finally{N=null,w=$,G=!1}}var H=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){J||G||(J=!0,e(K))},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return F(T)},t.unstable_next=function(z){switch(w){case 1:case 2:case 3:var V=3;break;default:V=w}var $=w;w=V;try{return z()}finally{w=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=H,t.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=w;w=z;try{return V()}finally{w=$}},t.unstable_scheduleCallback=function(z,V,$){var re=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?re+$:re):$=re,z){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=$+ee,z={id:x++,callback:V,priorityLevel:z,startTime:$,expirationTime:ee,sortIndex:-1},$>re?(z.sortIndex=$,B(C,z),F(T)===null&&z===F(C)&&(se?r():se=!0,n(ye,$-re))):(z.sortIndex=ee,B(T,z),J||G||(J=!0,e(K))),z},t.unstable_wrapCallback=function(z){var V=w;return function(){var $=w;w=V;try{return z.apply(this,arguments)}finally{w=$}}}})(W1);$1.exports=W1;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd=M.exports,We=A1,ft=$1.exports;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!sd)throw Error(Y(227));var q1=new Set,sl={};function ms(t,e){uo(t,e),uo(t+"Capture",e)}function uo(t,e){for(sl[t]=e,t=0;t<e.length;t++)q1.add(e[t])}var _r=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),JT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dy=Object.prototype.hasOwnProperty,hy={},fy={};function ZT(t){return dy.call(fy,t)?!0:dy.call(hy,t)?!1:JT.test(t)?fy[t]=!0:(hy[t]=!0,!1)}function eC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tC(t,e,n,r){if(e===null||typeof e=="undefined"||eC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vp,Up);Tt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vp,Up);Tt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vp,Up);Tt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bp(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(tC(e,n,i,r)&&(n=null),r||i===null?ZT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gs=sd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ba=60103,Xi=60106,$r=60107,zp=60108,Fa=60114,jp=60109,$p=60110,od=60112,Va=60113,au=60120,ad=60115,Wp=60116,qp=60121,Hp=60128,H1=60129,Gp=60130,hf=60131;if(typeof Symbol=="function"&&Symbol.for){var dt=Symbol.for;ba=dt("react.element"),Xi=dt("react.portal"),$r=dt("react.fragment"),zp=dt("react.strict_mode"),Fa=dt("react.profiler"),jp=dt("react.provider"),$p=dt("react.context"),od=dt("react.forward_ref"),Va=dt("react.suspense"),au=dt("react.suspense_list"),ad=dt("react.memo"),Wp=dt("react.lazy"),qp=dt("react.block"),dt("react.scope"),Hp=dt("react.opaque.id"),H1=dt("react.debug_trace_mode"),Gp=dt("react.offscreen"),hf=dt("react.legacy_hidden")}var py=typeof Symbol=="function"&&Symbol.iterator;function ha(t){return t===null||typeof t!="object"?null:(t=py&&t[py]||t["@@iterator"],typeof t=="function"?t:null)}var mh;function xa(t){if(mh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mh=e&&e[1]||""}return`
`+mh+t}var gh=!1;function yc(t,e){if(!t||gh)return"";gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=l);break}}}finally{gh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xa(t):""}function nC(t){switch(t.tag){case 5:return xa(t.type);case 16:return xa("Lazy");case 13:return xa("Suspense");case 19:return xa("SuspenseList");case 0:case 2:case 15:return t=yc(t.type,!1),t;case 11:return t=yc(t.type.render,!1),t;case 22:return t=yc(t.type._render,!1),t;case 1:return t=yc(t.type,!0),t;default:return""}}function Qs(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case Xi:return"Portal";case Fa:return"Profiler";case zp:return"StrictMode";case Va:return"Suspense";case au:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $p:return(t.displayName||"Context")+".Consumer";case jp:return(t._context.displayName||"Context")+".Provider";case od:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case ad:return Qs(t.type);case qp:return Qs(t._render);case Wp:e=t._payload,t=t._init;try{return Qs(t(e))}catch{}}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function G1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rC(t){var e=G1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vc(t){t._valueTracker||(t._valueTracker=rC(t))}function K1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=G1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lu(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function ff(t,e){var n=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function my(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function X1(t,e){e=e.checked,e!=null&&Bp(t,"checked",e,!1)}function pf(t,e){X1(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&mf(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mf(t,e,n){(e!=="number"||lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function iC(t){var e="";return sd.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function gf(t,e){return t=We({children:void 0},e),(e=iC(e.children))&&(t.children=e),t}function Ys(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function Q1(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var vf={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Y1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Y1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _c,J1=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!==vf.svg||"innerHTML"in t)t.innerHTML=e;else{for(_c=_c||document.createElement("div"),_c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ol(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ua={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sC=["Webkit","ms","Moz","O"];Object.keys(Ua).forEach(function(t){sC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ua[e]=Ua[t]})});function Z1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ua.hasOwnProperty(t)&&Ua[t]?(""+e).trim():e+"px"}function e_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Z1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oC=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wf(t,e){if(e){if(oC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Kp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ef=null,Js=null,Zs=null;function _y(t){if(t=Nl(t)){if(typeof Ef!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=fd(e),Ef(t.stateNode,t.type,e))}}function t_(t){Js?Zs?Zs.push(t):Zs=[t]:Js=t}function n_(){if(Js){var t=Js,e=Zs;if(Zs=Js=null,_y(t),e)for(t=0;t<e.length;t++)_y(e[t])}}function Xp(t,e){return t(e)}function r_(t,e,n,r,i){return t(e,n,r,i)}function Qp(){}var i_=Xp,Qi=!1,yh=!1;function Yp(){(Js!==null||Zs!==null)&&(Qp(),n_())}function aC(t,e,n){if(yh)return t(e,n);yh=!0;try{return i_(t,e,n)}finally{yh=!1,Yp()}}function al(t,e){var n=t.stateNode;if(n===null)return null;var r=fd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Tf=!1;if(_r)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){Tf=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{Tf=!1}function lC(t,e,n,r,i,s,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ba=!1,cu=null,uu=!1,Cf=null,cC={onError:function(t){Ba=!0,cu=t}};function uC(t,e,n,r,i,s,o,l,c){Ba=!1,cu=null,lC.apply(cC,arguments)}function dC(t,e,n,r,i,s,o,l,c){if(uC.apply(this,arguments),Ba){if(Ba){var d=cu;Ba=!1,cu=null}else throw Error(Y(198));uu||(uu=!0,Cf=d)}}function ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function s_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wy(t){if(ys(t)!==t)throw Error(Y(188))}function hC(t){var e=t.alternate;if(!e){if(e=ys(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return wy(i),t;if(s===r)return wy(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function o_(t){if(t=hC(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Sy(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var a_,Jp,l_,c_,If=!1,Vn=[],Zr=null,ei=null,ti=null,ll=new Map,cl=new Map,pa=[],Ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bf(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:i,targetContainers:[r]}}function Ty(t,e){switch(t){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":ll.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(e.pointerId)}}function ma(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t=bf(e,n,r,i,s),e!==null&&(e=Nl(e),e!==null&&Jp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fC(t,e,n,r,i){switch(e){case"focusin":return Zr=ma(Zr,t,e,n,r,i),!0;case"dragenter":return ei=ma(ei,t,e,n,r,i),!0;case"mouseover":return ti=ma(ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ll.set(s,ma(ll.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cl.set(s,ma(cl.get(s)||null,t,e,n,r,i)),!0}return!1}function pC(t){var e=Yi(t.target);if(e!==null){var n=ys(e);if(n!==null){if(e=n.tag,e===13){if(e=s_(n),e!==null){t.blockedOn=e,c_(t.lanePriority,function(){ft.unstable_runWithPriority(t.priority,function(){l_(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=Nl(n),e!==null&&Jp(e),t.blockedOn=n,!1;e.shift()}return!0}function Cy(t,e,n){Uc(t)&&n.delete(e)}function mC(){for(If=!1;0<Vn.length;){var t=Vn[0];if(t.blockedOn!==null){t=Nl(t.blockedOn),t!==null&&a_(t);break}for(var e=t.targetContainers;0<e.length;){var n=nm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&Vn.shift()}Zr!==null&&Uc(Zr)&&(Zr=null),ei!==null&&Uc(ei)&&(ei=null),ti!==null&&Uc(ti)&&(ti=null),ll.forEach(Cy),cl.forEach(Cy)}function ga(t,e){t.blockedOn===e&&(t.blockedOn=null,If||(If=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,mC)))}function u_(t){function e(i){return ga(i,t)}if(0<Vn.length){ga(Vn[0],t);for(var n=1;n<Vn.length;n++){var r=Vn[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zr!==null&&ga(Zr,t),ei!==null&&ga(ei,t),ti!==null&&ga(ti,t),ll.forEach(e),cl.forEach(e),n=0;n<pa.length;n++)r=pa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pa.length&&(n=pa[0],n.blockedOn===null);)pC(n),n.blockedOn===null&&pa.shift()}function wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $s={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},vh={},d_={};_r&&(d_=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function ld(t){if(vh[t])return vh[t];if(!$s[t])return t;var e=$s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d_)return vh[t]=e[n];return t}var h_=ld("animationend"),f_=ld("animationiteration"),p_=ld("animationstart"),m_=ld("transitionend"),g_=new Map,Zp=new Map,gC=["abort","abort",h_,"animationEnd",f_,"animationIteration",p_,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",m_,"transitionEnd","waiting","waiting"];function em(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Zp.set(r,e),g_.set(r,i),ms(i,[r])}}var yC=ft.unstable_now;yC();var Me=8;function Ls(t){if((1&t)!==0)return Me=15,1;if((2&t)!==0)return Me=14,2;if((4&t)!==0)return Me=13,4;var e=24&t;return e!==0?(Me=12,e):(t&32)!==0?(Me=11,32):(e=192&t,e!==0?(Me=10,e):(t&256)!==0?(Me=9,256):(e=3584&t,e!==0?(Me=8,e):(t&4096)!==0?(Me=7,4096):(e=4186112&t,e!==0?(Me=6,e):(e=62914560&t,e!==0?(Me=5,e):t&67108864?(Me=4,67108864):(t&134217728)!==0?(Me=3,134217728):(e=805306368&t,e!==0?(Me=2,e):(1073741824&t)!==0?(Me=1,1073741824):(Me=8,t))))))}function vC(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function _C(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Y(358,t))}}function ul(t,e){var n=t.pendingLanes;if(n===0)return Me=0;var r=0,i=0,s=t.expiredLanes,o=t.suspendedLanes,l=t.pingedLanes;if(s!==0)r=s,i=Me=15;else if(s=n&134217727,s!==0){var c=s&~o;c!==0?(r=Ls(c),i=Me):(l&=s,l!==0&&(r=Ls(l),i=Me))}else s=n&~o,s!==0?(r=Ls(s),i=Me):l!==0&&(r=Ls(l),i=Me);if(r===0)return 0;if(r=31-pi(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)===0){if(Ls(e),i<=Me)return e;Me=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pi(e),i=1<<n,r|=t[n],e&=~i;return r}function y_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function du(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Fs(24&~e),t===0?du(10,e):t;case 10:return t=Fs(192&~e),t===0?du(8,e):t;case 8:return t=Fs(3584&~e),t===0&&(t=Fs(4186112&~e),t===0&&(t=512)),t;case 2:return e=Fs(805306368&~e),e===0&&(e=268435456),e}throw Error(Y(358,t))}function Fs(t){return t&-t}function _h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cd(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-pi(e),t[e]=n}var pi=Math.clz32?Math.clz32:EC,wC=Math.log,SC=Math.LN2;function EC(t){return t===0?32:31-(wC(t)/SC|0)|0}var TC=ft.unstable_UserBlockingPriority,CC=ft.unstable_runWithPriority,Bc=!0;function IC(t,e,n,r){Qi||Qp();var i=tm,s=Qi;Qi=!0;try{r_(i,t,e,n,r)}finally{(Qi=s)||Yp()}}function bC(t,e,n,r){CC(TC,tm.bind(null,t,e,n,r))}function tm(t,e,n,r){if(Bc){var i;if((i=(e&4)===0)&&0<Vn.length&&-1<Ey.indexOf(t))t=bf(null,t,e,n,r),Vn.push(t);else{var s=nm(t,e,n,r);if(s===null)i&&Ty(t,r);else{if(i){if(-1<Ey.indexOf(t)){t=bf(s,t,e,n,r),Vn.push(t);return}if(fC(s,t,e,n,r))return;Ty(t,r)}P_(t,e,r,null,n)}}}}function nm(t,e,n,r){var i=Kp(r);if(i=Yi(i),i!==null){var s=ys(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=s_(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return P_(t,e,r,i,n),null}var Kr=null,rm=null,zc=null;function v_(){if(zc)return zc;var t,e=rm,n=e.length,r,i="value"in Kr?Kr.value:Kr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return zc=i.slice(t,1<r?1-r:void 0)}function jc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sc(){return!0}function Iy(){return!1}function nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sc:Iy,this.isPropagationStopped=Iy,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sc)},persist:function(){},isPersistent:Sc}),e}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},im=nn(Po),Rl=We({},Po,{view:0,detail:0}),xC=nn(Rl),wh,Sh,ya,ud=We({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ya&&(ya&&t.type==="mousemove"?(wh=t.screenX-ya.screenX,Sh=t.screenY-ya.screenY):Sh=wh=0,ya=t),wh)},movementY:function(t){return"movementY"in t?t.movementY:Sh}}),by=nn(ud),kC=We({},ud,{dataTransfer:0}),AC=nn(kC),PC=We({},Rl,{relatedTarget:0}),Eh=nn(PC),RC=We({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),NC=nn(RC),DC=We({},Po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OC=nn(DC),MC=We({},Po,{data:0}),xy=nn(MC),LC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VC[t])?!!e[t]:!1}function sm(){return UC}var BC=We({},Rl,{key:function(t){if(t.key){var e=LC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sm,charCode:function(t){return t.type==="keypress"?jc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zC=nn(BC),jC=We({},ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ky=nn(jC),$C=We({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sm}),WC=nn($C),qC=We({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),HC=nn(qC),GC=We({},ud,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KC=nn(GC),XC=[9,13,27,32],om=_r&&"CompositionEvent"in window,za=null;_r&&"documentMode"in document&&(za=document.documentMode);var QC=_r&&"TextEvent"in window&&!za,__=_r&&(!om||za&&8<za&&11>=za),Ay=String.fromCharCode(32),Py=!1;function w_(t,e){switch(t){case"keyup":return XC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function YC(t,e){switch(t){case"compositionend":return S_(e);case"keypress":return e.which!==32?null:(Py=!0,Ay);case"textInput":return t=e.data,t===Ay&&Py?null:t;default:return null}}function JC(t,e){if(Ws)return t==="compositionend"||!om&&w_(t,e)?(t=v_(),zc=rm=Kr=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return __&&e.locale!=="ko"?null:e.data;default:return null}}var ZC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZC[t.type]:e==="textarea"}function E_(t,e,n,r){t_(r),e=hu(e,"onChange"),0<e.length&&(n=new im("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ja=null,dl=null;function eI(t){x_(t,0)}function dd(t){var e=Hs(t);if(K1(e))return t}function tI(t,e){if(t==="change")return e}var T_=!1;if(_r){var Th;if(_r){var Ch="oninput"in document;if(!Ch){var Ny=document.createElement("div");Ny.setAttribute("oninput","return;"),Ch=typeof Ny.oninput=="function"}Th=Ch}else Th=!1;T_=Th&&(!document.documentMode||9<document.documentMode)}function Dy(){ja&&(ja.detachEvent("onpropertychange",C_),dl=ja=null)}function C_(t){if(t.propertyName==="value"&&dd(dl)){var e=[];if(E_(e,dl,t,Kp(t)),t=eI,Qi)t(e);else{Qi=!0;try{Xp(t,e)}finally{Qi=!1,Yp()}}}}function nI(t,e,n){t==="focusin"?(Dy(),ja=e,dl=n,ja.attachEvent("onpropertychange",C_)):t==="focusout"&&Dy()}function rI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dd(dl)}function iI(t,e){if(t==="click")return dd(e)}function sI(t,e){if(t==="input"||t==="change")return dd(e)}function oI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:oI,aI=Object.prototype.hasOwnProperty;function hl(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!aI.call(e,n[r])||!cn(t[n[r]],e[n[r]]))return!1;return!0}function Oy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function My(t,e){var n=Oy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Oy(n)}}function I_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?I_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ly(){for(var t=window,e=lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lu(t.document)}return e}function xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var lI=_r&&"documentMode"in document&&11>=document.documentMode,qs=null,kf=null,$a=null,Af=!1;function Fy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Af||qs==null||qs!==lu(r)||(r=qs,"selectionStart"in r&&xf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$a&&hl($a,r)||($a=r,r=hu(kf,"onSelect"),0<r.length&&(e=new im("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qs)))}em("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);em("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);em(gC,2);for(var Vy="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ih=0;Ih<Vy.length;Ih++)Zp.set(Vy[Ih],0);uo("onMouseEnter",["mouseout","mouseover"]);uo("onMouseLeave",["mouseout","mouseover"]);uo("onPointerEnter",["pointerout","pointerover"]);uo("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Uy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dC(r,e,void 0,t),t.currentTarget=null}function x_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Uy(i,l,d),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Uy(i,l,d),s=c}}}if(uu)throw t=Cf,uu=!1,Cf=null,t}function Ue(t,e){var n=N_(e),r=t+"__bubble";n.has(r)||(A_(e,t,2,!1),n.add(r))}var By="_reactListening"+Math.random().toString(36).slice(2);function k_(t){t[By]||(t[By]=!0,q1.forEach(function(e){b_.has(e)||zy(e,!1,t,null),zy(e,!0,t,null)}))}function zy(t,e,n,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=n;if(t==="selectionchange"&&n.nodeType!==9&&(s=n.ownerDocument),r!==null&&!e&&b_.has(t)){if(t!=="scroll")return;i|=2,s=r}var o=N_(s),l=t+"__"+(e?"capture":"bubble");o.has(l)||(e&&(i|=4),A_(s,t,i,e),o.add(l))}function A_(t,e,n,r){var i=Zp.get(e);switch(i===void 0?2:i){case 0:i=IC;break;case 1:i=bC;break;default:i=tm}n=i.bind(null,e,n,t),i=void 0,!Tf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function P_(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Yi(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}aC(function(){var d=s,f=Kp(n),v=[];e:{var g=g_.get(t);if(g!==void 0){var E=im,P=t;switch(t){case"keypress":if(jc(n)===0)break e;case"keydown":case"keyup":E=zC;break;case"focusin":P="focus",E=Eh;break;case"focusout":P="blur",E=Eh;break;case"beforeblur":case"afterblur":E=Eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=by;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=AC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=WC;break;case h_:case f_:case p_:E=NC;break;case m_:E=HC;break;case"scroll":E=xC;break;case"wheel":E=KC;break;case"copy":case"cut":case"paste":E=OC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=ky}var R=(e&4)!==0,y=!R&&t==="scroll",_=R?g!==null?g+"Capture":null:g;R=[];for(var k=d,D;k!==null;){D=k;var O=D.stateNode;if(D.tag===5&&O!==null&&(D=O,_!==null&&(O=al(k,_),O!=null&&R.push(fl(k,O,D)))),y)break;k=k.return}0<R.length&&(g=new E(g,P,null,n,f),v.push({event:g,listeners:R}))}}if((e&7)===0){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&(e&16)===0&&(P=n.relatedTarget||n.fromElement)&&(Yi(P)||P[Ro]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(P=n.relatedTarget||n.toElement,E=d,P=P?Yi(P):null,P!==null&&(y=ys(P),P!==y||P.tag!==5&&P.tag!==6)&&(P=null)):(E=null,P=d),E!==P)){if(R=by,O="onMouseLeave",_="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(R=ky,O="onPointerLeave",_="onPointerEnter",k="pointer"),y=E==null?g:Hs(E),D=P==null?g:Hs(P),g=new R(O,k+"leave",E,n,f),g.target=y,g.relatedTarget=D,O=null,Yi(f)===d&&(R=new R(_,k+"enter",P,n,f),R.target=D,R.relatedTarget=y,O=R),y=O,E&&P)t:{for(R=E,_=P,k=0,D=R;D;D=Os(D))k++;for(D=0,O=_;O;O=Os(O))D++;for(;0<k-D;)R=Os(R),k--;for(;0<D-k;)_=Os(_),D--;for(;k--;){if(R===_||_!==null&&R===_.alternate)break t;R=Os(R),_=Os(_)}R=null}else R=null;E!==null&&jy(v,g,E,R,!1),P!==null&&y!==null&&jy(v,y,P,R,!0)}}e:{if(g=d?Hs(d):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var B=tI;else if(Ry(g))if(T_)B=sI;else{B=rI;var F=nI}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=iI);if(B&&(B=B(t,d))){E_(v,B,n,f);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&mf(g,"number",g.value)}switch(F=d?Hs(d):window,t){case"focusin":(Ry(F)||F.contentEditable==="true")&&(qs=F,kf=d,$a=null);break;case"focusout":$a=kf=qs=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,Fy(v,n,f);break;case"selectionchange":if(lI)break;case"keydown":case"keyup":Fy(v,n,f)}var b;if(om)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ws?w_(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(__&&n.locale!=="ko"&&(Ws||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ws&&(b=v_()):(Kr=f,rm="value"in Kr?Kr.value:Kr.textContent,Ws=!0)),F=hu(d,S),0<F.length&&(S=new xy(S,t,null,n,f),v.push({event:S,listeners:F}),b?S.data=b:(b=S_(n),b!==null&&(S.data=b)))),(b=QC?YC(t,n):JC(t,n))&&(d=hu(d,"onBeforeInput"),0<d.length&&(f=new xy("onBeforeInput","beforeinput",null,n,f),v.push({event:f,listeners:d}),f.data=b))}x_(v,e)})}function fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=al(t,n),s!=null&&r.unshift(fl(t,s,i)),s=al(t,e),s!=null&&r.push(fl(t,s,i))),t=t.return}return r}function Os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=al(n,s),c!=null&&o.unshift(fl(n,c,l))):i||(c=al(n,s),c!=null&&o.push(fl(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}function fu(){}var bh=null,xh=null;function R_(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Pf(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $y=typeof setTimeout=="function"?setTimeout:void 0,cI=typeof clearTimeout=="function"?clearTimeout:void 0;function am(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function eo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function Wy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kh=0;function uI(t){return{$$typeof:Hp,toString:t,valueOf:t}}var hd=Math.random().toString(36).slice(2),Xr="__reactFiber$"+hd,pu="__reactProps$"+hd,Ro="__reactContainer$"+hd,qy="__reactEvents$"+hd;function Yi(t){var e=t[Xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ro]||n[Xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wy(t);t!==null;){if(n=t[Xr])return n;t=Wy(t)}return e}t=n,n=t.parentNode}return null}function Nl(t){return t=t[Xr]||t[Ro],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function fd(t){return t[pu]||null}function N_(t){var e=t[qy];return e===void 0&&(e=t[qy]=new Set),e}var Rf=[],Gs=-1;function bi(t){return{current:t}}function Be(t){0>Gs||(t.current=Rf[Gs],Rf[Gs]=null,Gs--)}function Ye(t,e){Gs++,Rf[Gs]=t.current,t.current=e}var mi={},Nt=bi(mi),Kt=bi(!1),ss=mi;function ho(t,e){var n=t.type.contextTypes;if(!n)return mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xt(t){return t=t.childContextTypes,t!=null}function mu(){Be(Kt),Be(Nt)}function Hy(t,e,n){if(Nt.current!==mi)throw Error(Y(168));Ye(Nt,e),Ye(Kt,n)}function D_(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Y(108,Qs(e)||"Unknown",i));return We({},n,r)}function $c(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,ss=Nt.current,Ye(Nt,t),Ye(Kt,Kt.current),!0}function Gy(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=D_(t,e,ss),r.__reactInternalMemoizedMergedChildContext=t,Be(Kt),Be(Nt),Ye(Nt,t)):Be(Kt),Ye(Kt,n)}var lm=null,ns=null,dI=ft.unstable_runWithPriority,cm=ft.unstable_scheduleCallback,Nf=ft.unstable_cancelCallback,hI=ft.unstable_shouldYield,Ky=ft.unstable_requestPaint,Df=ft.unstable_now,fI=ft.unstable_getCurrentPriorityLevel,pd=ft.unstable_ImmediatePriority,O_=ft.unstable_UserBlockingPriority,M_=ft.unstable_NormalPriority,L_=ft.unstable_LowPriority,F_=ft.unstable_IdlePriority,Ah={},pI=Ky!==void 0?Ky:function(){},lr=null,Wc=null,Ph=!1,Xy=Df(),At=1e4>Xy?Df:function(){return Df()-Xy};function fo(){switch(fI()){case pd:return 99;case O_:return 98;case M_:return 97;case L_:return 96;case F_:return 95;default:throw Error(Y(332))}}function V_(t){switch(t){case 99:return pd;case 98:return O_;case 97:return M_;case 96:return L_;case 95:return F_;default:throw Error(Y(332))}}function os(t,e){return t=V_(t),dI(t,e)}function pl(t,e,n){return t=V_(t),cm(t,e,n)}function Yn(){if(Wc!==null){var t=Wc;Wc=null,Nf(t)}U_()}function U_(){if(!Ph&&lr!==null){Ph=!0;var t=0;try{var e=lr;os(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),lr=null}catch(n){throw lr!==null&&(lr=lr.slice(t+1)),cm(pd,Yn),n}finally{Ph=!1}}}var mI=gs.ReactCurrentBatchConfig;function Cn(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var gu=bi(null),yu=null,Ks=null,vu=null;function um(){vu=Ks=yu=null}function dm(t){var e=gu.current;Be(gu),t.type._context._currentValue=e}function B_(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function to(t,e){yu=t,vu=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(In=!0),t.firstContext=null)}function pn(t,e){if(vu!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(vu=t,e=1073741823),e={context:t,observedBits:e,next:null},Ks===null){if(yu===null)throw Error(Y(308));Ks=e,yu.dependencies={lanes:0,firstContext:e,responders:null}}else Ks=Ks.next=e;return t._currentValue}var jr=!1;function hm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function z_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function Qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ml(t,e,n,r){var i=t.updateQueue;jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var f=t.alternate;if(f!==null){f=f.updateQueue;var v=f.lastBaseUpdate;v!==o&&(v===null?f.firstBaseUpdate=d:v.next=d,f.lastBaseUpdate=c)}}if(s!==null){v=i.baseState,o=0,f=d=c=null;do{l=s.lane;var g=s.eventTime;if((r&l)===l){f!==null&&(f=f.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var E=t,P=s;switch(l=e,g=n,P.tag){case 1:if(E=P.payload,typeof E=="function"){v=E.call(g,v,l);break e}v=E;break e;case 3:E.flags=E.flags&-4097|64;case 0:if(E=P.payload,l=typeof E=="function"?E.call(g,v,l):E,l==null)break e;v=We({},v,l);break e;case 2:jr=!0}}s.callback!==null&&(t.flags|=32,l=i.effects,l===null?i.effects=[s]:l.push(s))}else g={eventTime:g,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(d=f=g,c=v):f=f.next=g,o|=l;if(s=s.next,s===null){if(l=i.shared.pending,l===null)break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}while(1);f===null&&(c=v),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,Ol|=o,t.lanes=o,t.memoizedState=v}}function Yy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var j_=new sd.Component().refs;function _u(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var md={isMounted:function(t){return(t=t._reactInternals)?ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),i=ii(t),s=ni(r,i);s.payload=e,n!=null&&(s.callback=n),ri(t,s),si(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),i=ii(t),s=ni(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),ri(t,s),si(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=ii(t),i=ni(n,r);i.tag=2,e!=null&&(i.callback=e),ri(t,i),si(t,r,n)}};function Jy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!hl(n,r)||!hl(i,s):!0}function $_(t,e,n){var r=!1,i=mi,s=e.contextType;return typeof s=="object"&&s!==null?s=pn(s):(i=Xt(e)?ss:Nt.current,r=e.contextTypes,s=(r=r!=null)?ho(t,i):mi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=md,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Zy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&md.enqueueReplaceState(e,e.state,null)}function Of(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=j_,hm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pn(s):(s=Xt(e)?ss:Nt.current,i.context=ho(t,s)),ml(t,n,i,r),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_u(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&md.enqueueReplaceState(i,i.state,null),ml(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var Ec=Array.isArray;function va(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===j_&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Tc(t,e){if(t.type!=="textarea")throw Error(Y(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function W_(t){function e(y,_){if(t){var k=y.lastEffect;k!==null?(k.nextEffect=_,y.lastEffect=_):y.firstEffect=y.lastEffect=_,_.nextEffect=null,_.flags=8}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function i(y,_){return y=yi(y,_),y.index=0,y.sibling=null,y}function s(y,_,k){return y.index=k,t?(k=y.alternate,k!==null?(k=k.index,k<_?(y.flags=2,_):k):(y.flags=2,_)):_}function o(y){return t&&y.alternate===null&&(y.flags=2),y}function l(y,_,k,D){return _===null||_.tag!==6?(_=Mh(k,y.mode,D),_.return=y,_):(_=i(_,k),_.return=y,_)}function c(y,_,k,D){return _!==null&&_.elementType===k.type?(D=i(_,k.props),D.ref=va(y,_,k),D.return=y,D):(D=Kc(k.type,k.key,k.props,null,y.mode,D),D.ref=va(y,_,k),D.return=y,D)}function d(y,_,k,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=Lh(k,y.mode,D),_.return=y,_):(_=i(_,k.children||[]),_.return=y,_)}function f(y,_,k,D,O){return _===null||_.tag!==7?(_=so(k,y.mode,D,O),_.return=y,_):(_=i(_,k),_.return=y,_)}function v(y,_,k){if(typeof _=="string"||typeof _=="number")return _=Mh(""+_,y.mode,k),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ba:return k=Kc(_.type,_.key,_.props,null,y.mode,k),k.ref=va(y,null,_),k.return=y,k;case Xi:return _=Lh(_,y.mode,k),_.return=y,_}if(Ec(_)||ha(_))return _=so(_,y.mode,k,null),_.return=y,_;Tc(y,_)}return null}function g(y,_,k,D){var O=_!==null?_.key:null;if(typeof k=="string"||typeof k=="number")return O!==null?null:l(y,_,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ba:return k.key===O?k.type===$r?f(y,_,k.props.children,D,O):c(y,_,k,D):null;case Xi:return k.key===O?d(y,_,k,D):null}if(Ec(k)||ha(k))return O!==null?null:f(y,_,k,D,null);Tc(y,k)}return null}function E(y,_,k,D,O){if(typeof D=="string"||typeof D=="number")return y=y.get(k)||null,l(_,y,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ba:return y=y.get(D.key===null?k:D.key)||null,D.type===$r?f(_,y,D.props.children,O,D.key):c(_,y,D,O);case Xi:return y=y.get(D.key===null?k:D.key)||null,d(_,y,D,O)}if(Ec(D)||ha(D))return y=y.get(k)||null,f(_,y,D,O,null);Tc(_,D)}return null}function P(y,_,k,D){for(var O=null,B=null,F=_,b=_=0,S=null;F!==null&&b<k.length;b++){F.index>b?(S=F,F=null):S=F.sibling;var T=g(y,F,k[b],D);if(T===null){F===null&&(F=S);break}t&&F&&T.alternate===null&&e(y,F),_=s(T,_,b),B===null?O=T:B.sibling=T,B=T,F=S}if(b===k.length)return n(y,F),O;if(F===null){for(;b<k.length;b++)F=v(y,k[b],D),F!==null&&(_=s(F,_,b),B===null?O=F:B.sibling=F,B=F);return O}for(F=r(y,F);b<k.length;b++)S=E(F,y,b,k[b],D),S!==null&&(t&&S.alternate!==null&&F.delete(S.key===null?b:S.key),_=s(S,_,b),B===null?O=S:B.sibling=S,B=S);return t&&F.forEach(function(C){return e(y,C)}),O}function R(y,_,k,D){var O=ha(k);if(typeof O!="function")throw Error(Y(150));if(k=O.call(k),k==null)throw Error(Y(151));for(var B=O=null,F=_,b=_=0,S=null,T=k.next();F!==null&&!T.done;b++,T=k.next()){F.index>b?(S=F,F=null):S=F.sibling;var C=g(y,F,T.value,D);if(C===null){F===null&&(F=S);break}t&&F&&C.alternate===null&&e(y,F),_=s(C,_,b),B===null?O=C:B.sibling=C,B=C,F=S}if(T.done)return n(y,F),O;if(F===null){for(;!T.done;b++,T=k.next())T=v(y,T.value,D),T!==null&&(_=s(T,_,b),B===null?O=T:B.sibling=T,B=T);return O}for(F=r(y,F);!T.done;b++,T=k.next())T=E(F,y,b,T.value,D),T!==null&&(t&&T.alternate!==null&&F.delete(T.key===null?b:T.key),_=s(T,_,b),B===null?O=T:B.sibling=T,B=T);return t&&F.forEach(function(x){return e(y,x)}),O}return function(y,_,k,D){var O=typeof k=="object"&&k!==null&&k.type===$r&&k.key===null;O&&(k=k.props.children);var B=typeof k=="object"&&k!==null;if(B)switch(k.$$typeof){case ba:e:{for(B=k.key,O=_;O!==null;){if(O.key===B){switch(O.tag){case 7:if(k.type===$r){n(y,O.sibling),_=i(O,k.props.children),_.return=y,y=_;break e}break;default:if(O.elementType===k.type){n(y,O.sibling),_=i(O,k.props),_.ref=va(y,O,k),_.return=y,y=_;break e}}n(y,O);break}else e(y,O);O=O.sibling}k.type===$r?(_=so(k.props.children,y.mode,D,k.key),_.return=y,y=_):(D=Kc(k.type,k.key,k.props,null,y.mode,D),D.ref=va(y,_,k),D.return=y,y=D)}return o(y);case Xi:e:{for(O=k.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(y,_.sibling),_=i(_,k.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else e(y,_);_=_.sibling}_=Lh(k,y.mode,D),_.return=y,y=_}return o(y)}if(typeof k=="string"||typeof k=="number")return k=""+k,_!==null&&_.tag===6?(n(y,_.sibling),_=i(_,k),_.return=y,y=_):(n(y,_),_=Mh(k,y.mode,D),_.return=y,y=_),o(y);if(Ec(k))return P(y,_,k,D);if(ha(k))return R(y,_,k,D);if(B&&Tc(y,k),typeof k=="undefined"&&!O)switch(y.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Y(152,Qs(y.type)||"Component"))}return n(y,_)}}var wu=W_(!0),q_=W_(!1),Dl={},zn=bi(Dl),gl=bi(Dl),yl=bi(Dl);function Ji(t){if(t===Dl)throw Error(Y(174));return t}function Mf(t,e){switch(Ye(yl,e),Ye(gl,t),Ye(zn,Dl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_f(e,t)}Be(zn),Ye(zn,e)}function po(){Be(zn),Be(gl),Be(yl)}function ev(t){Ji(yl.current);var e=Ji(zn.current),n=_f(e,t.type);e!==n&&(Ye(gl,t),Ye(zn,n))}function fm(t){gl.current===t&&(Be(zn),Be(gl))}var Qe=bi(0);function Su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ur=null,Qr=null,jn=!1;function H_(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function tv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function Lf(t){if(jn){var e=Qr;if(e){var n=e;if(!tv(t,e)){if(e=eo(n.nextSibling),!e||!tv(t,e)){t.flags=t.flags&-1025|2,jn=!1,ur=t;return}H_(ur,n)}ur=t,Qr=eo(e.firstChild)}else t.flags=t.flags&-1025|2,jn=!1,ur=t}}function nv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function Cc(t){if(t!==ur)return!1;if(!jn)return nv(t),jn=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Pf(e,t.memoizedProps))for(e=Qr;e;)H_(t,e),e=eo(e.nextSibling);if(nv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qr=eo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qr=null}}else Qr=ur?eo(t.stateNode.nextSibling):null;return!0}function Rh(){Qr=ur=null,jn=!1}var no=[];function pm(){for(var t=0;t<no.length;t++)no[t]._workInProgressVersionPrimary=null;no.length=0}var Wa=gs.ReactCurrentDispatcher,fn=gs.ReactCurrentBatchConfig,vl=0,tt=null,bt=null,vt=null,Eu=!1,qa=!1;function zt(){throw Error(Y(321))}function mm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function gm(t,e,n,r,i,s){if(vl=s,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wa.current=t===null||t.memoizedState===null?yI:vI,t=n(r,i),qa){s=0;do{if(qa=!1,!(25>s))throw Error(Y(301));s+=1,vt=bt=null,e.updateQueue=null,Wa.current=_I,t=n(r,i)}while(qa)}if(Wa.current=bu,e=bt!==null&&bt.next!==null,vl=0,vt=bt=tt=null,Eu=!1,e)throw Error(Y(300));return t}function Zi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?tt.memoizedState=vt=t:vt=vt.next=t,vt}function vs(){if(bt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var e=vt===null?tt.memoizedState:vt.next;if(e!==null)vt=e,bt=t;else{if(t===null)throw Error(Y(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},vt===null?tt.memoizedState=vt=t:vt=vt.next=t}return vt}function Un(t,e){return typeof e=="function"?e(t):e}function _a(t){var e=vs(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=bt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){i=i.next,r=r.baseState;var l=o=s=null,c=i;do{var d=c.lane;if((vl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,tt.lanes|=d,Ol|=d}c=c.next}while(c!==null&&c!==i);l===null?s=r:l.next=o,cn(r,e.memoizedState)||(In=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function wa(t){var e=vs(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);cn(s,e.memoizedState)||(In=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rv(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===r:(t=t.mutableReadLanes,(t=(vl&t)===t)&&(e._workInProgressVersionPrimary=r,no.push(e))),t)return n(e._source);throw no.push(e),Error(Y(350))}function G_(t,e,n,r){var i=Mt;if(i===null)throw Error(Y(349));var s=e._getVersion,o=s(e._source),l=Wa.current,c=l.useState(function(){return rv(i,e,n)}),d=c[1],f=c[0];c=vt;var v=t.memoizedState,g=v.refs,E=g.getSnapshot,P=v.source;v=v.subscribe;var R=tt;return t.memoizedState={refs:g,source:e,subscribe:r},l.useEffect(function(){g.getSnapshot=n,g.setSnapshot=d;var y=s(e._source);if(!cn(o,y)){y=n(e._source),cn(f,y)||(d(y),y=ii(R),i.mutableReadLanes|=y&i.pendingLanes),y=i.mutableReadLanes,i.entangledLanes|=y;for(var _=i.entanglements,k=y;0<k;){var D=31-pi(k),O=1<<D;_[D]|=y,k&=~O}}},[n,e,r]),l.useEffect(function(){return r(e._source,function(){var y=g.getSnapshot,_=g.setSnapshot;try{_(y(e._source));var k=ii(R);i.mutableReadLanes|=k&i.pendingLanes}catch(D){_(function(){throw D})}})},[e,r]),cn(E,n)&&cn(P,e)&&cn(v,r)||(t={pending:null,dispatch:null,lastRenderedReducer:Un,lastRenderedState:f},t.dispatch=d=_m.bind(null,tt,t),c.queue=t,c.baseQueue=null,f=rv(i,e,n),c.memoizedState=c.baseState=f),f}function K_(t,e,n){var r=vs();return G_(r,t,e,n)}function Sa(t){var e=Zi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Un,lastRenderedState:t},t=t.dispatch=_m.bind(null,tt,t),[e.memoizedState,t]}function Tu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iv(t){var e=Zi();return t={current:t},e.memoizedState=t}function Cu(){return vs().memoizedState}function Ff(t,e,n,r){var i=Zi();tt.flags|=t,i.memoizedState=Tu(1|e,n,void 0,r===void 0?null:r)}function ym(t,e,n,r){var i=vs();r=r===void 0?null:r;var s=void 0;if(bt!==null){var o=bt.memoizedState;if(s=o.destroy,r!==null&&mm(r,o.deps)){Tu(e,n,s,r);return}}tt.flags|=t,i.memoizedState=Tu(1|e,n,s,r)}function sv(t,e){return Ff(516,4,t,e)}function Iu(t,e){return ym(516,4,t,e)}function X_(t,e){return ym(4,2,t,e)}function Q_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Y_(t,e,n){return n=n!=null?n.concat([t]):null,ym(4,2,Q_.bind(null,e,t),n)}function vm(){}function J_(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Z_(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gI(t,e){var n=fo();os(98>n?98:n,function(){t(!0)}),os(97<n?97:n,function(){var r=fn.transition;fn.transition=1;try{t(!1),e()}finally{fn.transition=r}})}function _m(t,e,n){var r=en(),i=ii(t),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=t.alternate,t===tt||o!==null&&o===tt)qa=Eu=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,n);if(s.eagerReducer=o,s.eagerState=c,cn(c,l))return}catch{}finally{}si(t,i,r)}}var bu={readContext:pn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useOpaqueIdentifier:zt,unstable_isNewReconciler:!1},yI={readContext:pn,useCallback:function(t,e){return Zi().memoizedState=[t,e===void 0?null:e],t},useContext:pn,useEffect:sv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ff(4,2,Q_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ff(4,2,t,e)},useMemo:function(t,e){var n=Zi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=_m.bind(null,tt,t),[r.memoizedState,t]},useRef:iv,useState:Sa,useDebugValue:vm,useDeferredValue:function(t){var e=Sa(t),n=e[0],r=e[1];return sv(function(){var i=fn.transition;fn.transition=1;try{r(t)}finally{fn.transition=i}},[t]),n},useTransition:function(){var t=Sa(!1),e=t[0];return t=gI.bind(null,t[1]),iv(t),[t,e]},useMutableSource:function(t,e,n){var r=Zi();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},G_(r,t,e,n)},useOpaqueIdentifier:function(){if(jn){var t=!1,e=uI(function(){throw t||(t=!0,n("r:"+(kh++).toString(36))),Error(Y(355))}),n=Sa(e)[1];return(tt.mode&2)===0&&(tt.flags|=516,Tu(5,function(){n("r:"+(kh++).toString(36))},void 0,null)),e}return e="r:"+(kh++).toString(36),Sa(e),e},unstable_isNewReconciler:!1},vI={readContext:pn,useCallback:J_,useContext:pn,useEffect:Iu,useImperativeHandle:Y_,useLayoutEffect:X_,useMemo:Z_,useReducer:_a,useRef:Cu,useState:function(){return _a(Un)},useDebugValue:vm,useDeferredValue:function(t){var e=_a(Un),n=e[0],r=e[1];return Iu(function(){var i=fn.transition;fn.transition=1;try{r(t)}finally{fn.transition=i}},[t]),n},useTransition:function(){var t=_a(Un)[0];return[Cu().current,t]},useMutableSource:K_,useOpaqueIdentifier:function(){return _a(Un)[0]},unstable_isNewReconciler:!1},_I={readContext:pn,useCallback:J_,useContext:pn,useEffect:Iu,useImperativeHandle:Y_,useLayoutEffect:X_,useMemo:Z_,useReducer:wa,useRef:Cu,useState:function(){return wa(Un)},useDebugValue:vm,useDeferredValue:function(t){var e=wa(Un),n=e[0],r=e[1];return Iu(function(){var i=fn.transition;fn.transition=1;try{r(t)}finally{fn.transition=i}},[t]),n},useTransition:function(){var t=wa(Un)[0];return[Cu().current,t]},useMutableSource:K_,useOpaqueIdentifier:function(){return wa(Un)[0]},unstable_isNewReconciler:!1},wI=gs.ReactCurrentOwner,In=!1;function jt(t,e,n,r){e.child=t===null?q_(e,null,n,r):wu(e,t.child,n,r)}function ov(t,e,n,r,i){n=n.render;var s=e.ref;return to(e,i),r=gm(t,e,n,r,s,i),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,dr(t,e,i)):(e.flags|=1,jt(t,e,r,i),e.child)}function av(t,e,n,r,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Im(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ew(t,e,o,r,i,s)):(t=Kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,(i&s)===0&&(i=o.memoizedProps,n=n.compare,n=n!==null?n:hl,n(i,r)&&t.ref===e.ref)?dr(t,e,s):(e.flags|=1,t=yi(o,r),t.ref=e.ref,t.return=e,e.child=t)}function ew(t,e,n,r,i,s){if(t!==null&&hl(t.memoizedProps,r)&&t.ref===e.ref)if(In=!1,(s&i)!==0)(t.flags&16384)!==0&&(In=!0);else return e.lanes=t.lanes,dr(t,e,s);return Vf(t,e,n,r,s)}function Nh(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},bc(e,n);else if((n&1073741824)!==0)e.memoizedState={baseLanes:0},bc(e,s!==null?s.baseLanes:n);else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},bc(e,t),null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,bc(e,r);return jt(t,e,i,n),e.child}function tw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function Vf(t,e,n,r,i){var s=Xt(n)?ss:Nt.current;return s=ho(e,s),to(e,i),n=gm(t,e,n,r,s,i),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,dr(t,e,i)):(e.flags|=1,jt(t,e,n,i),e.child)}function lv(t,e,n,r,i){if(Xt(n)){var s=!0;$c(e)}else s=!1;if(to(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),$_(e,n,r),Of(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=pn(d):(d=Xt(n)?ss:Nt.current,d=ho(e,d));var f=n.getDerivedStateFromProps,v=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Zy(e,o,r,d),jr=!1;var g=e.memoizedState;o.state=g,ml(e,r,o,i),c=e.memoizedState,l!==r||g!==c||Kt.current||jr?(typeof f=="function"&&(_u(e,n,f,r),c=e.memoizedState),(l=jr||Jy(e,n,l,r,g,c,d))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,z_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Cn(e.type,l),o.props=d,v=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=pn(c):(c=Xt(n)?ss:Nt.current,c=ho(e,c));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==v||g!==c)&&Zy(e,o,r,c),jr=!1,g=e.memoizedState,o.state=g,ml(e,r,o,i);var P=e.memoizedState;l!==v||g!==P||Kt.current||jr?(typeof E=="function"&&(_u(e,n,E,r),P=e.memoizedState),(d=jr||Jy(e,n,d,r,g,P,c))?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=256),r=!1)}return Uf(t,e,n,r,s,i)}function Uf(t,e,n,r,i,s){tw(t,e);var o=(e.flags&64)!==0;if(!r&&!o)return i&&Gy(e,n,!1),dr(t,e,s);r=e.stateNode,wI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wu(e,t.child,null,s),e.child=wu(e,null,l,s)):jt(t,e,l,s),e.memoizedState=r.state,i&&Gy(e,n,!0),e.child}function cv(t){var e=t.stateNode;e.pendingContext?Hy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hy(t,e.context,!1),Mf(t,e.containerInfo)}var Ic={dehydrated:null,retryLane:0};function uv(t,e,n){var r=e.pendingProps,i=Qe.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),Ye(Qe,i&1),t===null?(r.fallback!==void 0&&Lf(e),t=r.children,i=r.fallback,s?(t=dv(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ic,t):typeof r.unstable_expectedLoadTime=="number"?(t=dv(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ic,e.lanes=33554432,t):(n=bm({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?s?(r=fv(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Ic,r):(n=hv(t,e,r.children,n),e.memoizedState=null,n):s?(r=fv(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Ic,r):(n=hv(t,e,r.children,n),e.memoizedState=null,n)}function dv(t,e,n,r){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=bm(e,i,0,null),n=so(n,i,r,null),s.return=t,n.return=t,s.sibling=n,t.child=s,n}function hv(t,e,n,r){var i=t.child;return t=i.sibling,n=yi(i,{mode:"visible",children:n}),(e.mode&2)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function fv(t,e,n,r,i){var s=e.mode,o=t.child;t=o.sibling;var l={mode:"hidden",children:n};return(s&2)===0&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=l,o=n.lastEffect,o!==null?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=yi(o,l),t!==null?r=yi(t,r):(r=so(r,s,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function pv(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),B_(t.return,e)}function Dh(t,e,n,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function mv(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(jt(t,e,r.children,n),r=Qe.current,(r&2)!==0)r=r&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pv(t,n);else if(t.tag===19)pv(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(Qe,r),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Su(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dh(e,!1,i,n,s,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Su(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dh(e,!0,n,null,s,e.lastEffect);break;case"together":Dh(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ol|=e.lanes,(n&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var nw,Bf,rw,iw;nw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bf=function(){};rw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ji(zn.current);var s=null;switch(n){case"input":i=ff(t,i),r=ff(t,r),s=[];break;case"option":i=gf(t,i),r=gf(t,r),s=[];break;case"select":i=We({},i,{value:void 0}),r=We({},r,{value:void 0}),s=[];break;case"textarea":i=yf(t,i),r=yf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fu)}wf(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(sl.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(sl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ue("scroll",t),s||l===c||(s=[])):typeof c=="object"&&c!==null&&c.$$typeof===Hp?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};iw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ea(t,e){if(!jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function SI(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Xt(e.type)&&mu(),null;case 3:return po(),Be(Kt),Be(Nt),pm(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cc(e)?e.flags|=4:r.hydrate||(e.flags|=256)),Bf(e),null;case 5:fm(e);var i=Ji(yl.current);if(n=e.type,t!==null&&e.stateNode!=null)rw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return null}if(t=Ji(zn.current),Cc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xr]=e,r[pu]=s,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(t=0;t<ka.length;t++)Ue(ka[t],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":my(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":yy(r,s),Ue("invalid",r)}wf(n,s),t=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(t=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(t=["children",""+i]):sl.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ue("scroll",r));switch(n){case"input":vc(r),gy(r,s,!0);break;case"textarea":vc(r),vy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=fu)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===vf.html&&(t=Y1(n)),t===vf.html?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xr]=e,t[pu]=r,nw(t,e,!1,!1),e.stateNode=t,o=Sf(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<ka.length;i++)Ue(ka[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":my(t,r),i=ff(t,r),Ue("invalid",t);break;case"option":i=gf(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=We({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":yy(t,r),i=yf(t,r),Ue("invalid",t);break;default:i=r}wf(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?e_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&J1(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ol(t,c):typeof c=="number"&&ol(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sl.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ue("scroll",t):c!=null&&Bp(t,s,c,o))}switch(n){case"input":vc(t),gy(t,r,!1);break;case"textarea":vc(t),vy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ys(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ys(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fu)}R_(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)iw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));n=Ji(yl.current),Ji(zn.current),Cc(e)?(r=e.stateNode,n=e.memoizedProps,r[Xr]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xr]=e,e.stateNode=r)}return null;case 13:return Be(Qe),r=e.memoizedState,(e.flags&64)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&Cc(e):n=t.memoizedState!==null,r&&!n&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Qe.current&1)!==0?wt===0&&(wt=3):((wt===0||wt===3)&&(wt=4),Mt===null||(Ol&134217727)===0&&(Do&134217727)===0||ro(Mt,Pt))),(r||n)&&(e.flags|=4),null);case 4:return po(),Bf(e),t===null&&k_(e.stateNode.containerInfo),null;case 10:return dm(e),null;case 17:return Xt(e.type)&&mu(),null;case 19:if(Be(Qe),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,o=r.rendering,o===null)if(s)Ea(r,!1);else{if(wt!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(o=Su(t),o!==null){for(e.flags|=64,Ea(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(Qe,Qe.current&1|2),e.child}t=t.sibling}r.tail!==null&&At()>Hf&&(e.flags|=64,s=!0,Ea(r,!1),e.lanes=33554432)}else{if(!s)if(t=Su(o),t!==null){if(e.flags|=64,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ea(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!jn)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*At()-r.renderingStartTime>Hf&&n!==1073741824&&(e.flags|=64,s=!0,Ea(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=At(),n.sibling=null,e=Qe.current,Ye(Qe,s?e&1|2:e&1),n):null;case 23:case 24:return Cm(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Y(156,e.tag))}function EI(t){switch(t.tag){case 1:Xt(t.type)&&mu();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(po(),Be(Kt),Be(Nt),pm(),e=t.flags,(e&64)!==0)throw Error(Y(285));return t.flags=e&-4097|64,t;case 5:return fm(t),null;case 13:return Be(Qe),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Be(Qe),null;case 4:return po(),null;case 10:return dm(t),null;case 23:case 24:return Cm(),null;default:return null}}function wm(t,e){try{var n="",r=e;do n+=nC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TI=typeof WeakMap=="function"?WeakMap:Map;function sw(t,e,n){n=ni(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ku||(ku=!0,Gf=r),zf(t,e)},n}function ow(t,e,n){n=ni(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return zf(t,e),r(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this),zf(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}var CI=typeof WeakSet=="function"?WeakSet:Set;function gv(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){oi(t,n)}else e.current=null}function II(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:Cn(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&am(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Y(163))}function bI(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;r=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(mw(n,t),OI(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Cn(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&Yy(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}Yy(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&R_(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&u_(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Y(163))}function yv(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=Z1("display",i)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function vv(t,e){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(lm,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!==0)mw(e,n);else{r=e;try{i()}catch(s){oi(r,s)}}n=n.next}while(n!==t)}break;case 1:if(gv(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){oi(e,s)}break;case 5:gv(e);break;case 4:aw(t,e)}}function _v(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function wv(t){return t.tag===5||t.tag===3||t.tag===4}function Sv(t){e:{for(var e=t.return;e!==null;){if(wv(e))break e;e=e.return}throw Error(Y(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(Y(161))}n.flags&16&&(ol(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||wv(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?jf(t,n,e):$f(t,n,e)}function jf(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fu));else if(r!==4&&(t=t.child,t!==null))for(jf(t,e,n),t=t.sibling;t!==null;)jf(t,e,n),t=t.sibling}function $f(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($f(t,e,n),t=t.sibling;t!==null;)$f(t,e,n),t=t.sibling}function aw(t,e){for(var n=e,r=!1,i,s;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(Y(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var o=t,l=n,c=l;;)if(vv(o,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}s?(o=i,l=n.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):i.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){i=n.stateNode.containerInfo,s=!0,n.child.return=n,n=n.child;continue}}else if(vv(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Oh(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var i=t!==null?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n[pu]=r,t==="input"&&r.type==="radio"&&r.name!=null&&X1(n,r),Sf(t,i),e=Sf(t,r),i=0;i<s.length;i+=2){var o=s[i],l=s[i+1];o==="style"?e_(n,l):o==="dangerouslySetInnerHTML"?J1(n,l):o==="children"?ol(n,l):Bp(n,o,l,e)}switch(t){case"input":pf(n,r);break;case"textarea":Q1(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?Ys(n,!!r.multiple,s,!1):t!==!!r.multiple&&(r.defaultValue!=null?Ys(n,!!r.multiple,r.defaultValue,!0):Ys(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Y(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,u_(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Tm=At(),yv(e.child,!0)),Ev(e);return;case 19:Ev(e);return;case 17:return;case 23:case 24:yv(e,e.memoizedState!==null);return}throw Error(Y(163))}function Ev(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CI),e.forEach(function(r){var i=FI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xI(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var kI=Math.ceil,xu=gs.ReactCurrentDispatcher,Sm=gs.ReactCurrentOwner,pe=0,Mt=null,at=null,Pt=0,as=0,Wf=bi(0),wt=0,gd=null,No=0,Ol=0,Do=0,Em=0,qf=null,Tm=0,Hf=1/0;function Oo(){Hf=At()+500}var oe=null,ku=!1,Gf=null,Bn=null,gi=!1,Ha=null,Aa=90,Kf=[],Xf=[],pr=null,Ga=0,Qf=null,qc=-1,cr=0,Hc=0,Ka=null,Gc=!1;function en(){return(pe&48)!==0?At():qc!==-1?qc:qc=At()}function ii(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return fo()===99?1:2;if(cr===0&&(cr=No),mI.transition!==0){Hc!==0&&(Hc=qf!==null?qf.pendingLanes:0),t=cr;var e=4186112&~Hc;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=fo(),(pe&4)!==0&&t===98?t=du(12,cr):(t=vC(t),t=du(t,cr)),t}function si(t,e,n){if(50<Ga)throw Ga=0,Qf=null,Error(Y(185));if(t=yd(t,e),t===null)return null;cd(t,e,n),t===Mt&&(Do|=e,wt===4&&ro(t,Pt));var r=fo();e===1?(pe&8)!==0&&(pe&48)===0?Yf(t):(mn(t,n),pe===0&&(Oo(),Yn())):((pe&4)===0||r!==98&&r!==99||(pr===null?pr=new Set([t]):pr.add(t)),mn(t,n)),qf=t}function yd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function mn(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-pi(o),c=1<<l,d=s[l];if(d===-1){if((c&r)===0||(c&i)!==0){d=e,Ls(c);var f=Me;s[l]=10<=f?d+250:6<=f?d+5e3:-1}}else d<=e&&(t.expiredLanes|=c);o&=~c}if(r=ul(t,t===Mt?Pt:0),e=Me,r===0)n!==null&&(n!==Ah&&Nf(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==Ah&&Nf(n)}e===15?(n=Yf.bind(null,t),lr===null?(lr=[n],Wc=cm(pd,U_)):lr.push(n),n=Ah):e===14?n=pl(99,Yf.bind(null,t)):(n=_C(e),n=pl(n,lw.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function lw(t){if(qc=-1,Hc=cr=0,(pe&48)!==0)throw Error(Y(327));var e=t.callbackNode;if(xi()&&t.callbackNode!==e)return null;var n=ul(t,t===Mt?Pt:0);if(n===0)return null;var r=n,i=pe;pe|=16;var s=hw();(Mt!==t||Pt!==r)&&(Oo(),io(t,r));do try{RI();break}catch(l){dw(t,l)}while(1);if(um(),xu.current=s,pe=i,at!==null?r=0:(Mt=null,Pt=0,r=wt),(No&Do)!==0)io(t,0);else if(r!==0){if(r===2&&(pe|=64,t.hydrate&&(t.hydrate=!1,am(t.containerInfo)),n=y_(t),n!==0&&(r=Pa(t,n))),r===1)throw e=gd,io(t,0),ro(t,n),mn(t,At()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(Y(345));case 2:qi(t);break;case 3:if(ro(t,n),(n&62914560)===n&&(r=Tm+500-At(),10<r)){if(ul(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){en(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$y(qi.bind(null,t),r);break}qi(t);break;case 4:if(ro(t,n),(n&4186112)===n)break;for(r=t.eventTimes,i=-1;0<n;){var o=31-pi(n);s=1<<o,o=r[o],o>i&&(i=o),n&=~s}if(n=i,n=At()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kI(n/1960))-n,10<n){t.timeoutHandle=$y(qi.bind(null,t),n);break}qi(t);break;case 5:qi(t);break;default:throw Error(Y(329))}}return mn(t,At()),t.callbackNode===e?lw.bind(null,t):null}function ro(t,e){for(e&=~Em,e&=~Do,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pi(e),r=1<<n;t[n]=-1,e&=~r}}function Yf(t){if((pe&48)!==0)throw Error(Y(327));if(xi(),t===Mt&&(t.expiredLanes&Pt)!==0){var e=Pt,n=Pa(t,e);(No&Do)!==0&&(e=ul(t,e),n=Pa(t,e))}else e=ul(t,0),n=Pa(t,e);if(t.tag!==0&&n===2&&(pe|=64,t.hydrate&&(t.hydrate=!1,am(t.containerInfo)),e=y_(t),e!==0&&(n=Pa(t,e))),n===1)throw n=gd,io(t,0),ro(t,e),mn(t,At()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,qi(t),mn(t,At()),null}function AI(){if(pr!==null){var t=pr;pr=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,mn(e,At())})}Yn()}function cw(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Oo(),Yn())}}function uw(t,e){var n=pe;pe&=-2,pe|=8;try{return t(e)}finally{pe=n,pe===0&&(Oo(),Yn())}}function bc(t,e){Ye(Wf,as),as|=e,No|=e}function Cm(){as=Wf.current,Be(Wf)}function io(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cI(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&mu();break;case 3:po(),Be(Kt),Be(Nt),pm();break;case 5:fm(r);break;case 4:po();break;case 13:Be(Qe);break;case 19:Be(Qe);break;case 10:dm(r);break;case 23:case 24:Cm()}n=n.return}Mt=t,at=yi(t.current,null),Pt=as=No=e,wt=0,gd=null,Em=Do=Ol=0}function dw(t,e){do{var n=at;try{if(um(),Wa.current=bu,Eu){for(var r=tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Eu=!1}if(vl=0,vt=bt=tt=null,qa=!1,Sm.current=null,n===null||n.return===null){wt=1,gd=e,at=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=Pt,l.flags|=2048,l.firstEffect=l.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c;if((l.mode&2)===0){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var v=(Qe.current&1)!==0,g=o;do{var E;if(E=g.tag===13){var P=g.memoizedState;if(P!==null)E=P.dehydrated!==null;else{var R=g.memoizedProps;E=R.fallback===void 0?!1:R.unstable_avoidThisFallback!==!0?!0:!v}}if(E){var y=g.updateQueue;if(y===null){var _=new Set;_.add(d),g.updateQueue=_}else y.add(d);if((g.mode&2)===0){if(g.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var k=ni(-1,1);k.tag=2,ri(l,k)}l.lanes|=1;break e}c=void 0,l=e;var D=s.pingCache;if(D===null?(D=s.pingCache=new TI,c=new Set,D.set(d,c)):(c=D.get(d),c===void 0&&(c=new Set,D.set(d,c))),!c.has(l)){c.add(l);var O=LI.bind(null,s,d,l);d.then(O,O)}g.flags|=4096,g.lanes=e;break e}g=g.return}while(g!==null);c=Error((Qs(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}wt!==5&&(wt=2),c=wm(c,l),g=o;do{switch(g.tag){case 3:s=c,g.flags|=4096,e&=-e,g.lanes|=e;var B=sw(g,s,e);Qy(g,B);break e;case 1:s=c;var F=g.type,b=g.stateNode;if((g.flags&64)===0&&(typeof F.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Bn===null||!Bn.has(b)))){g.flags|=4096,e&=-e,g.lanes|=e;var S=ow(g,s,e);Qy(g,S);break e}}g=g.return}while(g!==null)}pw(n)}catch(T){e=T,at===n&&n!==null&&(at=n=n.return);continue}break}while(1)}function hw(){var t=xu.current;return xu.current=bu,t===null?bu:t}function Pa(t,e){var n=pe;pe|=16;var r=hw();Mt===t&&Pt===e||io(t,e);do try{PI();break}catch(i){dw(t,i)}while(1);if(um(),pe=n,xu.current=r,at!==null)throw Error(Y(261));return Mt=null,Pt=0,wt}function PI(){for(;at!==null;)fw(at)}function RI(){for(;at!==null&&!hI();)fw(at)}function fw(t){var e=gw(t.alternate,t,as);t.memoizedProps=t.pendingProps,e===null?pw(t):at=e,Sm.current=null}function pw(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&2048)===0){if(n=SI(n,e,as),n!==null){at=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||(as&1073741824)!==0||(n.mode&4)===0){for(var r=0,i=n.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(n=EI(e),n!==null){n.flags&=2047,at=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);wt===0&&(wt=5)}function qi(t){var e=fo();return os(99,NI.bind(null,t,e)),null}function NI(t,e){do xi();while(Ha!==null);if((pe&48)!==0)throw Error(Y(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,l=t.expirationTimes;0<s;){var c=31-pi(s),d=1<<c;i[c]=0,o[c]=-1,l[c]=-1,s&=~d}if(pr!==null&&(r&24)===0&&pr.has(t)&&pr.delete(t),t===Mt&&(at=Mt=null,Pt=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(i=pe,pe|=32,Sm.current=null,bh=Bc,o=Ly(),xf(o)){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(d=l.getSelection&&l.getSelection())&&d.rangeCount!==0){l=d.anchorNode,s=d.anchorOffset,c=d.focusNode,d=d.focusOffset;try{l.nodeType,c.nodeType}catch{l=null;break e}var f=0,v=-1,g=-1,E=0,P=0,R=o,y=null;t:for(;;){for(var _;R!==l||s!==0&&R.nodeType!==3||(v=f+s),R!==c||d!==0&&R.nodeType!==3||(g=f+d),R.nodeType===3&&(f+=R.nodeValue.length),(_=R.firstChild)!==null;)y=R,R=_;for(;;){if(R===o)break t;if(y===l&&++E===s&&(v=f),y===c&&++P===d&&(g=f),(_=R.nextSibling)!==null)break;R=y,y=R.parentNode}R=_}l=v===-1||g===-1?null:{start:v,end:g}}else l=null;l=l||{start:0,end:0}}else l=null;xh={focusedElem:o,selectionRange:l},Bc=!1,Ka=null,Gc=!1,oe=r;do try{DI()}catch(T){if(oe===null)throw Error(Y(330));oi(oe,T),oe=oe.nextEffect}while(oe!==null);Ka=null,oe=r;do try{for(o=t;oe!==null;){var k=oe.flags;if(k&16&&ol(oe.stateNode,""),k&128){var D=oe.alternate;if(D!==null){var O=D.ref;O!==null&&(typeof O=="function"?O(null):O.current=null)}}switch(k&1038){case 2:Sv(oe),oe.flags&=-3;break;case 6:Sv(oe),oe.flags&=-3,Oh(oe.alternate,oe);break;case 1024:oe.flags&=-1025;break;case 1028:oe.flags&=-1025,Oh(oe.alternate,oe);break;case 4:Oh(oe.alternate,oe);break;case 8:l=oe,aw(o,l);var B=l.alternate;_v(l),B!==null&&_v(B)}oe=oe.nextEffect}}catch(T){if(oe===null)throw Error(Y(330));oi(oe,T),oe=oe.nextEffect}while(oe!==null);if(O=xh,D=Ly(),k=O.focusedElem,o=O.selectionRange,D!==k&&k&&k.ownerDocument&&I_(k.ownerDocument.documentElement,k)){for(o!==null&&xf(k)&&(D=o.start,O=o.end,O===void 0&&(O=D),"selectionStart"in k?(k.selectionStart=D,k.selectionEnd=Math.min(O,k.value.length)):(O=(D=k.ownerDocument||document)&&D.defaultView||window,O.getSelection&&(O=O.getSelection(),l=k.textContent.length,B=Math.min(o.start,l),o=o.end===void 0?B:Math.min(o.end,l),!O.extend&&B>o&&(l=o,o=B,B=l),l=My(k,B),s=My(k,o),l&&s&&(O.rangeCount!==1||O.anchorNode!==l.node||O.anchorOffset!==l.offset||O.focusNode!==s.node||O.focusOffset!==s.offset)&&(D=D.createRange(),D.setStart(l.node,l.offset),O.removeAllRanges(),B>o?(O.addRange(D),O.extend(s.node,s.offset)):(D.setEnd(s.node,s.offset),O.addRange(D)))))),D=[],O=k;O=O.parentNode;)O.nodeType===1&&D.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<D.length;k++)O=D[k],O.element.scrollLeft=O.left,O.element.scrollTop=O.top}Bc=!!bh,xh=bh=null,t.current=n,oe=r;do try{for(k=t;oe!==null;){var F=oe.flags;if(F&36&&bI(k,oe.alternate,oe),F&128){D=void 0;var b=oe.ref;if(b!==null){var S=oe.stateNode;switch(oe.tag){case 5:D=S;break;default:D=S}typeof b=="function"?b(D):b.current=D}}oe=oe.nextEffect}}catch(T){if(oe===null)throw Error(Y(330));oi(oe,T),oe=oe.nextEffect}while(oe!==null);oe=null,pI(),pe=i}else t.current=n;if(gi)gi=!1,Ha=t,Aa=e;else for(oe=r;oe!==null;)e=oe.nextEffect,oe.nextEffect=null,oe.flags&8&&(F=oe,F.sibling=null,F.stateNode=null),oe=e;if(r=t.pendingLanes,r===0&&(Bn=null),r===1?t===Qf?Ga++:(Ga=0,Qf=t):Ga=0,n=n.stateNode,ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(lm,n,void 0,(n.current.flags&64)===64)}catch{}if(mn(t,At()),ku)throw ku=!1,t=Gf,Gf=null,t;return(pe&8)!==0||Yn(),null}function DI(){for(;oe!==null;){var t=oe.alternate;Gc||Ka===null||((oe.flags&8)!==0?Sy(oe,Ka)&&(Gc=!0):oe.tag===13&&xI(t,oe)&&Sy(oe,Ka)&&(Gc=!0));var e=oe.flags;(e&256)!==0&&II(t,oe),(e&512)===0||gi||(gi=!0,pl(97,function(){return xi(),null})),oe=oe.nextEffect}}function xi(){if(Aa!==90){var t=97<Aa?97:Aa;return Aa=90,os(t,MI)}return!1}function OI(t,e){Kf.push(e,t),gi||(gi=!0,pl(97,function(){return xi(),null}))}function mw(t,e){Xf.push(e,t),gi||(gi=!0,pl(97,function(){return xi(),null}))}function MI(){if(Ha===null)return!1;var t=Ha;if(Ha=null,(pe&48)!==0)throw Error(Y(331));var e=pe;pe|=32;var n=Xf;Xf=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(c){if(s===null)throw Error(Y(330));oi(s,c)}}for(n=Kf,Kf=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(c){if(s===null)throw Error(Y(330));oi(s,c)}}for(l=t.current.firstEffect;l!==null;)t=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=t;return pe=e,Yn(),!0}function Tv(t,e,n){e=wm(n,e),e=sw(t,e,1),ri(t,e),e=en(),t=yd(t,1),t!==null&&(cd(t,1,e),mn(t,e))}function oi(t,e){if(t.tag===3)Tv(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){Tv(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bn===null||!Bn.has(r))){t=wm(e,t);var i=ow(n,t,1);if(ri(n,i),i=en(),n=yd(n,1),n!==null)cd(n,1,i),mn(n,i);else if(typeof r.componentDidCatch=="function"&&(Bn===null||!Bn.has(r)))try{r.componentDidCatch(e,t)}catch{}break}}n=n.return}}function LI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Mt===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&62914560)===Pt&&500>At()-Tm?io(t,0):Em|=n),mn(t,e)}function FI(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=fo()===99?1:2:(cr===0&&(cr=No),e=Fs(62914560&~cr),e===0&&(e=4194304))),n=en(),t=yd(t,e),t!==null&&(cd(t,e,n),mn(t,n))}var gw;gw=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)In=!0;else if((n&r)!==0)In=(t.flags&16384)!==0;else{switch(In=!1,e.tag){case 3:cv(e),Rh();break;case 5:ev(e);break;case 1:Xt(e.type)&&$c(e);break;case 4:Mf(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;Ye(gu,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(n&e.child.childLanes)!==0?uv(t,e,n):(Ye(Qe,Qe.current&1),e=dr(t,e,n),e!==null?e.sibling:null);Ye(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&64)!==0){if(r)return mv(t,e,n);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(Qe,Qe.current),r)break;return null;case 23:case 24:return e.lanes=0,Nh(t,e,n)}return dr(t,e,n)}else In=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=ho(e,Nt.current),to(e,n),i=gm(null,e,r,t,i,n),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(r)){var s=!0;$c(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hm(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&_u(e,r,o,t),i.updater=md,e.stateNode=i,i._reactInternals=e,Of(e,r,t,n),e=Uf(null,e,r,!0,s,n)}else e.tag=0,jt(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=UI(i),t=Cn(i,t),s){case 0:e=Vf(null,e,i,t,n);break e;case 1:e=lv(null,e,i,t,n);break e;case 11:e=ov(null,e,i,t,n);break e;case 14:e=av(null,e,i,Cn(i.type,t),r,n);break e}throw Error(Y(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),Vf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),lv(t,e,r,i,n);case 3:if(cv(e),r=e.updateQueue,t===null||r===null)throw Error(Y(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,z_(t,e),ml(e,r,null,n),r=e.memoizedState.element,r===i)Rh(),e=dr(t,e,n);else{if(i=e.stateNode,(s=i.hydrate)&&(Qr=eo(e.stateNode.containerInfo.firstChild),ur=e,s=jn=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],no.push(s);for(n=q_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else jt(t,e,r,n),Rh();e=e.child}return e;case 5:return ev(e),t===null&&Lf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Pf(r,i)?o=null:s!==null&&Pf(r,s)&&(e.flags|=16),tw(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&Lf(e),null;case 13:return uv(t,e,n);case 4:return Mf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wu(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),ov(t,e,r,i,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var l=e.type._context;if(Ye(gu,l._currentValue),l._currentValue=s,o!==null)if(l=o.value,s=cn(l,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(l,s):1073741823)|0,s===0){if(o.children===i.children&&!Kt.current){e=dr(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===r&&(d.observedBits&s)!==0){l.tag===1&&(d=ni(-1,n&-n),d.tag=2,ri(l,d)),l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),B_(l.return,n),c.lanes|=n;break}d=d.next}}else o=l.tag===10&&l.type===e.type?null:l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===e){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,to(e,n),i=pn(i,s.unstable_observedBits),r=r(i),e.flags|=1,jt(t,e,r,n),e.child;case 14:return i=e.type,s=Cn(i,e.pendingProps),s=Cn(i.type,s),av(t,e,i,s,r,n);case 15:return ew(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Xt(r)?(t=!0,$c(e)):t=!1,to(e,n),$_(e,r,i),Of(e,r,i,n),Uf(null,e,r,!0,t,n);case 19:return mv(t,e,n);case 23:return Nh(t,e,n);case 24:return Nh(t,e,n)}throw Error(Y(156,e.tag))};function VI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new VI(t,e,n,r)}function Im(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UI(t){if(typeof t=="function")return Im(t)?1:0;if(t!=null){if(t=t.$$typeof,t===od)return 11;if(t===ad)return 14}return 2}function yi(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Im(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $r:return so(n.children,i,s,e);case H1:o=8,i|=16;break;case zp:o=8,i|=1;break;case Fa:return t=un(12,n,e,i|8),t.elementType=Fa,t.type=Fa,t.lanes=s,t;case Va:return t=un(13,n,e,i),t.type=Va,t.elementType=Va,t.lanes=s,t;case au:return t=un(19,n,e,i),t.elementType=au,t.lanes=s,t;case Gp:return bm(n,i,s,e);case hf:return t=un(24,n,e,i),t.elementType=hf,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jp:o=10;break e;case $p:o=9;break e;case od:o=11;break e;case ad:o=14;break e;case Wp:o=16,r=null;break e;case qp:o=22;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function so(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function bm(t,e,n,r){return t=un(23,t,r,e),t.elementType=Gp,t.lanes=n,t}function Mh(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function Lh(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BI(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=_h(0),this.expirationTimes=_h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_h(0),this.mutableSourceEagerHydrationData=null}function zI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Au(t,e,n,r){var i=e.current,s=en(),o=ii(i);e:if(n){n=n._reactInternals;t:{if(ys(n)!==n||n.tag!==1)throw Error(Y(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Xt(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(Y(171))}if(n.tag===1){var c=n.type;if(Xt(c)){n=D_(n,c,l);break e}}n=l}else n=mi;return e.context===null?e.context=n:e.pendingContext=n,e=ni(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),ri(i,e),si(i,o,s),o}function Fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xm(t,e){Cv(t,e),(t=t.alternate)&&Cv(t,e)}function jI(){return null}function km(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new BI(t,e,n!=null&&n.hydrate===!0),e=un(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,hm(e),t[Ro]=n.current,k_(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var i=e._getVersion;i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}km.prototype.render=function(t){Au(t,this._internalRoot,null,null)};km.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Au(null,t,null,function(){e[Ro]=null})};function Ml(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $I(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new km(t,0,e?{hydrate:!0}:void 0)}function vd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var l=i;i=function(){var d=Fh(o);l.call(d)}}Au(e,o,t,i)}else{if(s=n._reactRootContainer=$I(n,r),o=s._internalRoot,typeof i=="function"){var c=i;i=function(){var d=Fh(o);c.call(d)}}uw(function(){Au(e,o,t,i)})}return Fh(o)}a_=function(t){if(t.tag===13){var e=en();si(t,4,e),xm(t,4)}};Jp=function(t){if(t.tag===13){var e=en();si(t,67108864,e),xm(t,67108864)}};l_=function(t){if(t.tag===13){var e=en(),n=ii(t);si(t,n,e),xm(t,n)}};c_=function(t,e){return e()};Ef=function(t,e,n){switch(e){case"input":if(pf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fd(r);if(!i)throw Error(Y(90));K1(r),pf(r,i)}}}break;case"textarea":Q1(t,n);break;case"select":e=n.value,e!=null&&Ys(t,!!n.multiple,e,!1)}};Xp=cw;r_=function(t,e,n,r,i){var s=pe;pe|=4;try{return os(98,t.bind(null,e,n,r,i))}finally{pe=s,pe===0&&(Oo(),Yn())}};Qp=function(){(pe&49)===0&&(AI(),xi())};i_=function(t,e){var n=pe;pe|=2;try{return t(e)}finally{pe=n,pe===0&&(Oo(),Yn())}};function yw(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ml(e))throw Error(Y(200));return zI(t,e,null,n)}var WI={Events:[Nl,Hs,fd,t_,n_,xi,{current:!1}]},Ta={findFiberByHostInstance:Yi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},qI={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||jI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{lm=xc.inject(qI),ns=xc}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WI;gn.createPortal=yw;gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):Error(Y(268,Object.keys(t)));return t=o_(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t,e){var n=pe;if((n&48)!==0)return t(e);pe|=1;try{if(t)return os(99,t.bind(null,e))}finally{pe=n,Yn()}};gn.hydrate=function(t,e,n){if(!Ml(e))throw Error(Y(200));return vd(null,t,e,!0,n)};gn.render=function(t,e,n){if(!Ml(e))throw Error(Y(200));return vd(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Ml(t))throw Error(Y(40));return t._reactRootContainer?(uw(function(){vd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ro]=null})}),!0):!1};gn.unstable_batchedUpdates=cw;gn.unstable_createPortal=function(t,e){return yw(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ml(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return vd(t,e,n,!1,r)};gn.version="17.0.2";function vw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vw)}catch(t){console.error(t)}}vw(),Fp.exports=gn;var HI=Fp.exports;function Jf(t,e){return Jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Jf(t,e)}function Xn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Jf(t,e)}var _w={exports:{}},GI="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",KI=GI,XI=KI;function ww(){}function Sw(){}Sw.resetWarningCache=ww;var QI=function(){function t(r,i,s,o,l,c){if(c!==XI){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Sw,resetWarningCache:ww};return n.PropTypes=n,n};_w.exports=QI();var Iv=_w.exports;function Ft(){return Ft=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ft.apply(null,arguments)}function kc(t){return t.charAt(0)==="/"}function Vh(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function YI(t,e){e===void 0&&(e="");var n=t&&t.split("/")||[],r=e&&e.split("/")||[],i=t&&kc(t),s=e&&kc(e),o=i||s;if(t&&kc(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var l;if(r.length){var c=r[r.length-1];l=c==="."||c===".."||c===""}else l=!1;for(var d=0,f=r.length;f>=0;f--){var v=r[f];v==="."?Vh(r,f):v===".."?(Vh(r,f),d++):d&&(Vh(r,f),d--)}if(!o)for(;d--;d)r.unshift("..");o&&r[0]!==""&&(!r[0]||!kc(r[0]))&&r.unshift("");var g=r.join("/");return l&&g.substr(-1)!=="/"&&(g+="/"),g}var JI=!0,Uh="Invariant failed";function _s(t,e){if(!t){if(JI)throw new Error(Uh);var n=typeof e=="function"?e():e,r=n?"".concat(Uh,": ").concat(n):Uh;throw new Error(r)}}function Xa(t){return t.charAt(0)==="/"?t:"/"+t}function bv(t){return t.charAt(0)==="/"?t.substr(1):t}function ZI(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function Ew(t,e){return ZI(t,e)?t.substr(e.length):t}function Tw(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function eb(t){var e=t||"/",n="",r="",i=e.indexOf("#");i!==-1&&(r=e.substr(i),e=e.substr(0,i));var s=e.indexOf("?");return s!==-1&&(n=e.substr(s),e=e.substr(0,s)),{pathname:e,search:n==="?"?"":n,hash:r==="#"?"":r}}function $t(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function Jt(t,e,n,r){var i;typeof t=="string"?(i=eb(t),i.state=e):(i=Ft({},t),i.pathname===void 0&&(i.pathname=""),i.search?i.search.charAt(0)!=="?"&&(i.search="?"+i.search):i.search="",i.hash?i.hash.charAt(0)!=="#"&&(i.hash="#"+i.hash):i.hash="",e!==void 0&&i.state===void 0&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(i.key=n),r?i.pathname?i.pathname.charAt(0)!=="/"&&(i.pathname=YI(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Am(){var t=null;function e(o){return t=o,function(){t===o&&(t=null)}}function n(o,l,c,d){if(t!=null){var f=typeof t=="function"?t(o,l):t;typeof f=="string"?typeof c=="function"?c(f,d):d(!0):d(f!==!1)}else d(!0)}var r=[];function i(o){var l=!0;function c(){l&&o.apply(void 0,arguments)}return r.push(c),function(){l=!1,r=r.filter(function(d){return d!==c})}}function s(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r.forEach(function(d){return d.apply(void 0,l)})}return{setPrompt:e,confirmTransitionTo:n,appendListener:i,notifyListeners:s}}var Cw=!!(typeof window!="undefined"&&window.document&&window.document.createElement);function Iw(t,e){e(window.confirm(t))}function tb(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function nb(){return window.navigator.userAgent.indexOf("Trident")===-1}function rb(){return window.navigator.userAgent.indexOf("Firefox")===-1}function ib(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var xv="popstate",kv="hashchange";function Av(){try{return window.history.state||{}}catch{return{}}}function sb(t){t===void 0&&(t={}),Cw||_s(!1);var e=window.history,n=tb(),r=!nb(),i=t,s=i.forceRefresh,o=s===void 0?!1:s,l=i.getUserConfirmation,c=l===void 0?Iw:l,d=i.keyLength,f=d===void 0?6:d,v=t.basename?Tw(Xa(t.basename)):"";function g(K){var H=K||{},z=H.key,V=H.state,$=window.location,re=$.pathname,ee=$.search,ue=$.hash,_e=re+ee+ue;return v&&(_e=Ew(_e,v)),Jt(_e,V,z)}function E(){return Math.random().toString(36).substr(2,f)}var P=Am();function R(K){Ft(ye,K),ye.length=e.length,P.notifyListeners(ye.location,ye.action)}function y(K){ib(K)||D(g(K.state))}function _(){D(g(Av()))}var k=!1;function D(K){if(k)k=!1,R();else{var H="POP";P.confirmTransitionTo(K,H,c,function(z){z?R({action:H,location:K}):O(K)})}}function O(K){var H=ye.location,z=F.indexOf(H.key);z===-1&&(z=0);var V=F.indexOf(K.key);V===-1&&(V=0);var $=z-V;$&&(k=!0,C($))}var B=g(Av()),F=[B.key];function b(K){return v+$t(K)}function S(K,H){var z="PUSH",V=Jt(K,H,E(),ye.location);P.confirmTransitionTo(V,z,c,function($){if(!!$){var re=b(V),ee=V.key,ue=V.state;if(n)if(e.pushState({key:ee,state:ue},null,re),o)window.location.href=re;else{var _e=F.indexOf(ye.location.key),Re=F.slice(0,_e+1);Re.push(V.key),F=Re,R({action:z,location:V})}else window.location.href=re}})}function T(K,H){var z="REPLACE",V=Jt(K,H,E(),ye.location);P.confirmTransitionTo(V,z,c,function($){if(!!$){var re=b(V),ee=V.key,ue=V.state;if(n)if(e.replaceState({key:ee,state:ue},null,re),o)window.location.replace(re);else{var _e=F.indexOf(ye.location.key);_e!==-1&&(F[_e]=V.key),R({action:z,location:V})}else window.location.replace(re)}})}function C(K){e.go(K)}function x(){C(-1)}function N(){C(1)}var w=0;function G(K){w+=K,w===1&&K===1?(window.addEventListener(xv,y),r&&window.addEventListener(kv,_)):w===0&&(window.removeEventListener(xv,y),r&&window.removeEventListener(kv,_))}var J=!1;function se(K){K===void 0&&(K=!1);var H=P.setPrompt(K);return J||(G(1),J=!0),function(){return J&&(J=!1,G(-1)),H()}}function me(K){var H=P.appendListener(K);return G(1),function(){G(-1),H()}}var ye={length:e.length,action:"POP",location:B,createHref:b,push:S,replace:T,go:C,goBack:x,goForward:N,block:se,listen:me};return ye}var Pv="hashchange",ob={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+bv(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:bv,decodePath:Xa},slash:{encodePath:Xa,decodePath:Xa}};function bw(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function Ca(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function ab(t){window.location.hash=t}function Bh(t){window.location.replace(bw(window.location.href)+"#"+t)}function lb(t){t===void 0&&(t={}),Cw||_s(!1);var e=window.history;rb();var n=t,r=n.getUserConfirmation,i=r===void 0?Iw:r,s=n.hashType,o=s===void 0?"slash":s,l=t.basename?Tw(Xa(t.basename)):"",c=ob[o],d=c.encodePath,f=c.decodePath;function v(){var H=f(Ca());return l&&(H=Ew(H,l)),Jt(H)}var g=Am();function E(H){Ft(K,H),K.length=e.length,g.notifyListeners(K.location,K.action)}var P=!1,R=null;function y(H,z){return H.pathname===z.pathname&&H.search===z.search&&H.hash===z.hash}function _(){var H=Ca(),z=d(H);if(H!==z)Bh(z);else{var V=v(),$=K.location;if(!P&&y($,V)||R===$t(V))return;R=null,k(V)}}function k(H){if(P)P=!1,E();else{var z="POP";g.confirmTransitionTo(H,z,i,function(V){V?E({action:z,location:H}):D(H)})}}function D(H){var z=K.location,V=b.lastIndexOf($t(z));V===-1&&(V=0);var $=b.lastIndexOf($t(H));$===-1&&($=0);var re=V-$;re&&(P=!0,x(re))}var O=Ca(),B=d(O);O!==B&&Bh(B);var F=v(),b=[$t(F)];function S(H){var z=document.querySelector("base"),V="";return z&&z.getAttribute("href")&&(V=bw(window.location.href)),V+"#"+d(l+$t(H))}function T(H,z){var V="PUSH",$=Jt(H,void 0,void 0,K.location);g.confirmTransitionTo($,V,i,function(re){if(!!re){var ee=$t($),ue=d(l+ee),_e=Ca()!==ue;if(_e){R=ee,ab(ue);var Re=b.lastIndexOf($t(K.location)),de=b.slice(0,Re+1);de.push(ee),b=de,E({action:V,location:$})}else E()}})}function C(H,z){var V="REPLACE",$=Jt(H,void 0,void 0,K.location);g.confirmTransitionTo($,V,i,function(re){if(!!re){var ee=$t($),ue=d(l+ee),_e=Ca()!==ue;_e&&(R=ee,Bh(ue));var Re=b.indexOf($t(K.location));Re!==-1&&(b[Re]=ee),E({action:V,location:$})}})}function x(H){e.go(H)}function N(){x(-1)}function w(){x(1)}var G=0;function J(H){G+=H,G===1&&H===1?window.addEventListener(Pv,_):G===0&&window.removeEventListener(Pv,_)}var se=!1;function me(H){H===void 0&&(H=!1);var z=g.setPrompt(H);return se||(J(1),se=!0),function(){return se&&(se=!1,J(-1)),z()}}function ye(H){var z=g.appendListener(H);return J(1),function(){J(-1),z()}}var K={length:e.length,action:"POP",location:F,createHref:S,push:T,replace:C,go:x,goBack:N,goForward:w,block:me,listen:ye};return K}function Rv(t,e,n){return Math.min(Math.max(t,e),n)}function cb(t){t===void 0&&(t={});var e=t,n=e.getUserConfirmation,r=e.initialEntries,i=r===void 0?["/"]:r,s=e.initialIndex,o=s===void 0?0:s,l=e.keyLength,c=l===void 0?6:l,d=Am();function f(S){Ft(b,S),b.length=b.entries.length,d.notifyListeners(b.location,b.action)}function v(){return Math.random().toString(36).substr(2,c)}var g=Rv(o,0,i.length-1),E=i.map(function(S){return typeof S=="string"?Jt(S,void 0,v()):Jt(S,void 0,S.key||v())}),P=$t;function R(S,T){var C="PUSH",x=Jt(S,T,v(),b.location);d.confirmTransitionTo(x,C,n,function(N){if(!!N){var w=b.index,G=w+1,J=b.entries.slice(0);J.length>G?J.splice(G,J.length-G,x):J.push(x),f({action:C,location:x,index:G,entries:J})}})}function y(S,T){var C="REPLACE",x=Jt(S,T,v(),b.location);d.confirmTransitionTo(x,C,n,function(N){!N||(b.entries[b.index]=x,f({action:C,location:x}))})}function _(S){var T=Rv(b.index+S,0,b.entries.length-1),C="POP",x=b.entries[T];d.confirmTransitionTo(x,C,n,function(N){N?f({action:C,location:x,index:T}):f()})}function k(){_(-1)}function D(){_(1)}function O(S){var T=b.index+S;return T>=0&&T<b.entries.length}function B(S){return S===void 0&&(S=!1),d.setPrompt(S)}function F(S){return d.appendListener(S)}var b={length:E.length,action:"POP",location:E[g],index:g,entries:E,createHref:P,push:R,replace:y,go:_,goBack:k,goForward:D,canGo:O,block:B,listen:F};return b}var Mo={exports:{}},ub=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"},Pu=ub;Mo.exports=Aw;Mo.exports.parse=Pm;Mo.exports.compile=fb;Mo.exports.tokensToFunction=xw;Mo.exports.tokensToRegExp=kw;var db=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Pm(t,e){for(var n=[],r=0,i=0,s="",o=e&&e.delimiter||"/",l;(l=db.exec(t))!=null;){var c=l[0],d=l[1],f=l.index;if(s+=t.slice(i,f),i=f+c.length,d){s+=d[1];continue}var v=t[i],g=l[2],E=l[3],P=l[4],R=l[5],y=l[6],_=l[7];s&&(n.push(s),s="");var k=g!=null&&v!=null&&v!==g,D=y==="+"||y==="*",O=y==="?"||y==="*",B=g||o,F=P||R,b=g||(typeof n[n.length-1]=="string"?n[n.length-1]:"");n.push({name:E||r++,prefix:g||"",delimiter:B,optional:O,repeat:D,partial:k,asterisk:!!_,pattern:F?gb(F):_?".*":hb(B,b)})}return i<t.length&&(s+=t.substr(i)),s&&n.push(s),n}function hb(t,e){return!e||e.indexOf(t)>-1?"[^"+es(t)+"]+?":es(e)+"|(?:(?!"+es(e)+")[^"+es(t)+"])+?"}function fb(t,e){return xw(Pm(t,e),e)}function pb(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function mb(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function xw(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)typeof t[r]=="object"&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",Nm(e)));return function(i,s){for(var o="",l=i||{},c=s||{},d=c.pretty?pb:encodeURIComponent,f=0;f<t.length;f++){var v=t[f];if(typeof v=="string"){o+=v;continue}var g=l[v.name],E;if(g==null)if(v.optional){v.partial&&(o+=v.prefix);continue}else throw new TypeError('Expected "'+v.name+'" to be defined');if(Pu(g)){if(!v.repeat)throw new TypeError('Expected "'+v.name+'" to not repeat, but received `'+JSON.stringify(g)+"`");if(g.length===0){if(v.optional)continue;throw new TypeError('Expected "'+v.name+'" to not be empty')}for(var P=0;P<g.length;P++){if(E=d(g[P]),!n[f].test(E))throw new TypeError('Expected all "'+v.name+'" to match "'+v.pattern+'", but received `'+JSON.stringify(E)+"`");o+=(P===0?v.prefix:v.delimiter)+E}continue}if(E=v.asterisk?mb(g):d(g),!n[f].test(E))throw new TypeError('Expected "'+v.name+'" to match "'+v.pattern+'", but received "'+E+'"');o+=v.prefix+E}return o}}function es(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function gb(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function Rm(t,e){return t.keys=e,t}function Nm(t){return t&&t.sensitive?"":"i"}function yb(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Rm(t,e)}function vb(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(Aw(t[i],e,n).source);var s=new RegExp("(?:"+r.join("|")+")",Nm(n));return Rm(s,e)}function _b(t,e,n){return kw(Pm(t,n),e,n)}function kw(t,e,n){Pu(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=n.end!==!1,s="",o=0;o<t.length;o++){var l=t[o];if(typeof l=="string")s+=es(l);else{var c=es(l.prefix),d="(?:"+l.pattern+")";e.push(l),l.repeat&&(d+="(?:"+c+d+")*"),l.optional?l.partial?d=c+"("+d+")?":d="(?:"+c+"("+d+"))?":d=c+"("+d+")",s+=d}}var f=es(n.delimiter||"/"),v=s.slice(-f.length)===f;return r||(s=(v?s.slice(0,-f.length):s)+"(?:"+f+"(?=$))?"),i?s+="$":s+=r&&v?"":"(?="+f+"|$)",Rm(new RegExp("^"+s,Nm(n)),e)}function Aw(t,e,n){return Pu(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?yb(t,e):Pu(t)?vb(t,e,n):_b(t,e,n)}var wb=Mo.exports,Pw={exports:{}},Pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt=typeof Symbol=="function"&&Symbol.for,Dm=pt?Symbol.for("react.element"):60103,Om=pt?Symbol.for("react.portal"):60106,_d=pt?Symbol.for("react.fragment"):60107,wd=pt?Symbol.for("react.strict_mode"):60108,Sd=pt?Symbol.for("react.profiler"):60114,Ed=pt?Symbol.for("react.provider"):60109,Td=pt?Symbol.for("react.context"):60110,Mm=pt?Symbol.for("react.async_mode"):60111,Cd=pt?Symbol.for("react.concurrent_mode"):60111,Id=pt?Symbol.for("react.forward_ref"):60112,bd=pt?Symbol.for("react.suspense"):60113,Sb=pt?Symbol.for("react.suspense_list"):60120,xd=pt?Symbol.for("react.memo"):60115,kd=pt?Symbol.for("react.lazy"):60116,Eb=pt?Symbol.for("react.block"):60121,Tb=pt?Symbol.for("react.fundamental"):60117,Cb=pt?Symbol.for("react.responder"):60118,Ib=pt?Symbol.for("react.scope"):60119;function rn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Dm:switch(t=t.type,t){case Mm:case Cd:case _d:case Sd:case wd:case bd:return t;default:switch(t=t&&t.$$typeof,t){case Td:case Id:case kd:case xd:case Ed:return t;default:return e}}case Om:return e}}}function Rw(t){return rn(t)===Cd}Pe.AsyncMode=Mm;Pe.ConcurrentMode=Cd;Pe.ContextConsumer=Td;Pe.ContextProvider=Ed;Pe.Element=Dm;Pe.ForwardRef=Id;Pe.Fragment=_d;Pe.Lazy=kd;Pe.Memo=xd;Pe.Portal=Om;Pe.Profiler=Sd;Pe.StrictMode=wd;Pe.Suspense=bd;Pe.isAsyncMode=function(t){return Rw(t)||rn(t)===Mm};Pe.isConcurrentMode=Rw;Pe.isContextConsumer=function(t){return rn(t)===Td};Pe.isContextProvider=function(t){return rn(t)===Ed};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dm};Pe.isForwardRef=function(t){return rn(t)===Id};Pe.isFragment=function(t){return rn(t)===_d};Pe.isLazy=function(t){return rn(t)===kd};Pe.isMemo=function(t){return rn(t)===xd};Pe.isPortal=function(t){return rn(t)===Om};Pe.isProfiler=function(t){return rn(t)===Sd};Pe.isStrictMode=function(t){return rn(t)===wd};Pe.isSuspense=function(t){return rn(t)===bd};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===_d||t===Cd||t===Sd||t===wd||t===bd||t===Sb||typeof t=="object"&&t!==null&&(t.$$typeof===kd||t.$$typeof===xd||t.$$typeof===Ed||t.$$typeof===Td||t.$$typeof===Id||t.$$typeof===Tb||t.$$typeof===Cb||t.$$typeof===Ib||t.$$typeof===Eb)};Pe.typeOf=rn;Pw.exports=Pe;function Ad(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nw=Pw.exports,bb={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Dw={};Dw[Nw.ForwardRef]=bb;Dw[Nw.Memo]=xb;var zh=1073741823,Nv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:{};function kb(){var t="__global_unique_id__";return Nv[t]=(Nv[t]||0)+1}function Ab(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Pb(t){var e=[];return{on:function(r){e.push(r)},off:function(r){e=e.filter(function(i){return i!==r})},get:function(){return t},set:function(r,i){t=r,e.forEach(function(s){return s(t,i)})}}}function Rb(t){return Array.isArray(t)?t[0]:t}function Nb(t,e){var n,r,i="__create-react-context-"+kb()+"__",s=function(l){Xn(c,l);function c(){for(var f,v=arguments.length,g=new Array(v),E=0;E<v;E++)g[E]=arguments[E];return f=l.call.apply(l,[this].concat(g))||this,f.emitter=Pb(f.props.value),f}var d=c.prototype;return d.getChildContext=function(){var v;return v={},v[i]=this.emitter,v},d.componentWillReceiveProps=function(v){if(this.props.value!==v.value){var g=this.props.value,E=v.value,P;Ab(g,E)?P=0:(P=typeof e=="function"?e(g,E):zh,P|=0,P!==0&&this.emitter.set(v.value,P))}},d.render=function(){return this.props.children},c}(Ee.Component);s.childContextTypes=(n={},n[i]=Iv.object.isRequired,n);var o=function(l){Xn(c,l);function c(){for(var f,v=arguments.length,g=new Array(v),E=0;E<v;E++)g[E]=arguments[E];return f=l.call.apply(l,[this].concat(g))||this,f.observedBits=void 0,f.state={value:f.getValue()},f.onUpdate=function(P,R){var y=f.observedBits|0;(y&R)!==0&&f.setState({value:f.getValue()})},f}var d=c.prototype;return d.componentWillReceiveProps=function(v){var g=v.observedBits;this.observedBits=g==null?zh:g},d.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var v=this.props.observedBits;this.observedBits=v==null?zh:v},d.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},d.getValue=function(){return this.context[i]?this.context[i].get():t},d.render=function(){return Rb(this.props.children)(this.state.value)},c}(Ee.Component);return o.contextTypes=(r={},r[i]=Iv.object,r),{Provider:s,Consumer:o}}var Db=Ee.createContext||Nb,Ow=function(e){var n=Db();return n.displayName=e,n},Mw=Ow("Router-History"),ls=Ow("Router"),Pd=function(t){Xn(e,t),e.computeRootMatch=function(i){return{path:"/",url:"/",params:{},isExact:i==="/"}};function e(r){var i;return i=t.call(this,r)||this,i.state={location:r.history.location},i._isMounted=!1,i._pendingLocation=null,r.staticContext||(i.unlisten=r.history.listen(function(s){i._pendingLocation=s})),i}var n=e.prototype;return n.componentDidMount=function(){var i=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(s){i._isMounted&&i.setState({location:s})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return Ee.createElement(ls.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},Ee.createElement(Mw.Provider,{children:this.props.children||null,value:this.props.history}))},e}(Ee.Component);Ee.Component;Ee.Component;var Dv={},Ob=1e4,Ov=0;function Mb(t,e){var n=""+e.end+e.strict+e.sensitive,r=Dv[n]||(Dv[n]={});if(r[t])return r[t];var i=[],s=wb(t,i,e),o={regexp:s,keys:i};return Ov<Ob&&(r[t]=o,Ov++),o}function Lm(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,s=i===void 0?!1:i,o=n.strict,l=o===void 0?!1:o,c=n.sensitive,d=c===void 0?!1:c,f=[].concat(r);return f.reduce(function(v,g){if(!g&&g!=="")return null;if(v)return v;var E=Mb(g,{end:s,strict:l,sensitive:d}),P=E.regexp,R=E.keys,y=P.exec(t);if(!y)return null;var _=y[0],k=y.slice(1),D=t===_;return s&&!D?null:{path:g,url:g==="/"&&_===""?"/":_,isExact:D,params:R.reduce(function(O,B,F){return O[B.name]=k[F],O},{})}},null)}function Lb(t){return Ee.Children.count(t)===0}var Tn=function(t){Xn(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.render=function(){var i=this;return Ee.createElement(ls.Consumer,null,function(s){s||_s(!1);var o=i.props.location||s.location,l=i.props.computedMatch?i.props.computedMatch:i.props.path?Lm(o.pathname,i.props):s.match,c=Ft({},s,{location:o,match:l}),d=i.props,f=d.children,v=d.component,g=d.render;return Array.isArray(f)&&Lb(f)&&(f=null),Ee.createElement(ls.Provider,{value:c},c.match?f?typeof f=="function"?f(c):f:v?Ee.createElement(v,c):g?g(c):null:typeof f=="function"?f(c):null)})},e}(Ee.Component);function Fm(t){return t.charAt(0)==="/"?t:"/"+t}function Fb(t,e){return t?Ft({},e,{pathname:Fm(t)+e.pathname}):e}function Vb(t,e){if(!t)return e;var n=Fm(t);return e.pathname.indexOf(n)!==0?e:Ft({},e,{pathname:e.pathname.substr(n.length)})}function Mv(t){return typeof t=="string"?t:$t(t)}function jh(t){return function(){_s(!1)}}function Lv(){}Ee.Component;var Ub=function(t){Xn(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.render=function(){var i=this;return Ee.createElement(ls.Consumer,null,function(s){s||_s(!1);var o=i.props.location||s.location,l,c;return Ee.Children.forEach(i.props.children,function(d){if(c==null&&Ee.isValidElement(d)){l=d;var f=d.props.path||d.props.from;c=f?Lm(o.pathname,Ft({},d.props,{path:f})):s.match}}),c?Ee.cloneElement(l,{location:o,computedMatch:c}):null})},e}(Ee.Component),Lw=Ee.useContext;function Fw(){return Lw(Mw)}function Bb(){var t=Lw(ls).match;return t?t.params:{}}var zb=function(t){Xn(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.history=sb(r.props),r}var n=e.prototype;return n.render=function(){return Ee.createElement(Pd,{history:this.history,children:this.props.children})},e}(Ee.Component);Ee.Component;var Zf=function(e,n){return typeof e=="function"?e(n):e},ep=function(e,n){return typeof e=="string"?Jt(e,null,null,n):e},Vm=function(e){return e},mo=Ee.forwardRef;typeof mo=="undefined"&&(mo=Vm);function jb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var $b=mo(function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,s=Ad(t,["innerRef","navigate","onClick"]),o=s.target,l=Ft({},s,{onClick:function(d){try{i&&i(d)}catch(f){throw d.preventDefault(),f}!d.defaultPrevented&&d.button===0&&(!o||o==="_self")&&!jb(d)&&(d.preventDefault(),r())}});return Vm!==mo?l.ref=e||n:l.ref=n,Ee.createElement("a",l)}),ar=mo(function(t,e){var n=t.component,r=n===void 0?$b:n,i=t.replace,s=t.to,o=t.innerRef,l=Ad(t,["component","replace","to","innerRef"]);return Ee.createElement(ls.Consumer,null,function(c){c||_s(!1);var d=c.history,f=ep(Zf(s,c.location),c.location),v=f?d.createHref(f):"",g=Ft({},l,{href:v,navigate:function(){var P=Zf(s,c.location),R=$t(c.location)===$t(ep(P)),y=i||R?d.replace:d.push;y(P)}});return Vm!==mo?g.ref=e||o:g.innerRef=o,Ee.createElement(r,g)})}),Vw=function(e){return e},Ru=Ee.forwardRef;typeof Ru=="undefined"&&(Ru=Vw);function Wb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(r){return r}).join(" ")}Ru(function(t,e){var n=t["aria-current"],r=n===void 0?"page":n,i=t.activeClassName,s=i===void 0?"active":i,o=t.activeStyle,l=t.className,c=t.exact,d=t.isActive,f=t.location,v=t.sensitive,g=t.strict,E=t.style,P=t.to,R=t.innerRef,y=Ad(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return Ee.createElement(ls.Consumer,null,function(_){_||_s(!1);var k=f||_.location,D=ep(Zf(P,k),k),O=D.pathname,B=O&&O.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),F=B?Lm(k.pathname,{path:B,exact:c,sensitive:v,strict:g}):null,b=!!(d?d(F,k):F),S=typeof l=="function"?l(b):l,T=typeof E=="function"?E(b):E;b&&(S=Wb(S,s),T=Ft({},T,o));var C=Ft({"aria-current":b&&r||null,className:S,style:T,to:D},y);return Vw!==Ru?C.ref=e||R:C.innerRef=R,Ee.createElement(ar,C)})});const qb=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Hb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=s>>2,v=(s&3)<<4|l>>4;let g=(l&15)<<2|d>>6,E=d&63;c||(E=64,o||(g=64)),r.push(n[f],n[v],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Uw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||v==null)throw new Gb;const g=s<<2|l>>4;if(r.push(g),d!==64){const E=l<<4&240|d>>2;if(r.push(E),v!==64){const P=d<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Gb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kb=function(t){const e=Uw(t);return Bw.encodeByteArray(e,!0)},Nu=function(t){return Kb(t).replace(/\./g,"")},zw=function(t){try{return Bw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=()=>Xb().__FIREBASE_DEFAULTS__,Yb=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Jb=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zw(t[1]);return e&&JSON.parse(e)},Rd=()=>{try{return qb()||Qb()||Yb()||Jb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jw=t=>{var e,n;return(n=(e=Rd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Zb=t=>{const e=jw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$w=()=>{var t;return(t=Rd())==null?void 0:t.config},Ww=t=>{var e;return(e=Rd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[Nu(JSON.stringify(n)),Nu(JSON.stringify(o)),l].join(".")}const Qa={};function nx(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qa))Qa[e]?t.emulator.push(e):t.prod.push(e);return t}function rx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Fv=!1;function Hw(t,e){if(typeof window=="undefined"||typeof document=="undefined"||!Lo(window.location.host)||Qa[t]===e||Qa[t]||Fv)return;Qa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=nx().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Fv=!0,o()},g}function f(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function v(){const g=rx(r),E=n("text"),P=document.getElementById(E)||document.createElement("span"),R=n("learnmore"),y=document.getElementById(R)||document.createElement("a"),_=n("preprendIcon"),k=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const D=g.element;l(D),f(y,R);const O=d();c(k,_),D.append(k,P,y,O),document.body.appendChild(D)}s?(P.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ix(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function sx(){var e;const t=(e=Rd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ox(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function ax(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cx(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ux(){return!sx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dx(){try{return typeof indexedDB=="object"}catch{return!1}}function hx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="FirebaseError";class Ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fx,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?px(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Ir(i,l,r)}}function px(t,e){return t.replace(mx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mx=/\{\$([^}]+)}/g;function gx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Vv(s)&&Vv(o)){if(!cs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Na(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yx(t,e){const n=new vx(t,e);return n.subscribe.bind(n)}class vx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_x(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$h),i.error===void 0&&(i.error=$h),i.complete===void 0&&(i.complete=$h);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _x(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $h(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ex;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var i;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(i=e==null?void 0:e.optional)!=null?i:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ex(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var o;const r=this.normalizeInstanceIdentifier(n),i=(o=this.onInitCallbacks.get(r))!=null?o:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sx(t){return t===Hi?void 0:t}function Ex(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const Cx={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Ix=Te.INFO,bx={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},xx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=Ix,this._logHandler=xx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const kx=(t,e)=>e.some(n=>t instanceof n);let Uv,Bv;function Ax(){return Uv||(Uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Px(){return Bv||(Bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gw=new WeakMap,tp=new WeakMap,Kw=new WeakMap,Wh=new WeakMap,Bm=new WeakMap;function Rx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gw.set(n,t)}).catch(()=>{}),Bm.set(e,t),e}function Nx(t){if(tp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});tp.set(t,e)}let np={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dx(t){np=t(np)}function Ox(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qh(this),e,...n);return Kw.set(r,e.sort?e.sort():[e]),ai(r)}:Px().includes(t)?function(...e){return t.apply(qh(this),e),ai(Gw.get(this))}:function(...e){return ai(t.apply(qh(this),e))}}function Mx(t){return typeof t=="function"?Ox(t):(t instanceof IDBTransaction&&Nx(t),kx(t,Ax())?new Proxy(t,np):t)}function ai(t){if(t instanceof IDBRequest)return Rx(t);if(Wh.has(t))return Wh.get(t);const e=Mx(t);return e!==t&&(Wh.set(t,e),Bm.set(e,t)),e}const qh=t=>Bm.get(t);function Lx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=ai(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ai(o.result),c.oldVersion,c.newVersion,ai(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Fx=["get","getKey","getAll","getAllKeys","count"],Vx=["put","add","delete","clear"],Hh=new Map;function zv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hh.get(e))return Hh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Vx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fx.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Hh.set(e,s),s}Dx(t=>({...t,get:(e,n,r)=>zv(e,n)||t.get(e,n,r),has:(e,n)=>!!zv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",jv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Um("@firebase/app"),zx="@firebase/app-compat",jx="@firebase/analytics-compat",$x="@firebase/analytics",Wx="@firebase/app-check-compat",qx="@firebase/app-check",Hx="@firebase/auth",Gx="@firebase/auth-compat",Kx="@firebase/database",Xx="@firebase/data-connect",Qx="@firebase/database-compat",Yx="@firebase/functions",Jx="@firebase/functions-compat",Zx="@firebase/installations",ek="@firebase/installations-compat",tk="@firebase/messaging",nk="@firebase/messaging-compat",rk="@firebase/performance",ik="@firebase/performance-compat",sk="@firebase/remote-config",ok="@firebase/remote-config-compat",ak="@firebase/storage",lk="@firebase/storage-compat",ck="@firebase/firestore",uk="@firebase/ai",dk="@firebase/firestore-compat",hk="firebase",fk="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="[DEFAULT]",pk={[rp]:"fire-core",[zx]:"fire-core-compat",[$x]:"fire-analytics",[jx]:"fire-analytics-compat",[qx]:"fire-app-check",[Wx]:"fire-app-check-compat",[Hx]:"fire-auth",[Gx]:"fire-auth-compat",[Kx]:"fire-rtdb",[Xx]:"fire-data-connect",[Qx]:"fire-rtdb-compat",[Yx]:"fire-fn",[Jx]:"fire-fn-compat",[Zx]:"fire-iid",[ek]:"fire-iid-compat",[tk]:"fire-fcm",[nk]:"fire-fcm-compat",[rk]:"fire-perf",[ik]:"fire-perf-compat",[sk]:"fire-rc",[ok]:"fire-rc-compat",[ak]:"fire-gcs",[lk]:"fire-gcs-compat",[ck]:"fire-fst",[dk]:"fire-fst-compat",[uk]:"fire-vertex","fire-js":"fire-js",[hk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Map,mk=new Map,sp=new Map;function $v(t,e){try{t.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function go(t){const e=t.name;if(sp.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,t);for(const n of Du.values())$v(n,t);for(const n of mk.values())$v(n,t);return!0}function zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},li=new Ll("app","Firebase",gk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=fk;function Xw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ip,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(n||(n=$w()),!n)throw li.create("no-options");const s=Du.get(i);if(s){if(cs(n,s.options)&&cs(r,s.config))return s;throw li.create("duplicate-app",{appName:i})}const o=new Tx(i);for(const c of sp.values())o.addComponent(c);const l=new yk(n,r,o);return Du.set(i,l),l}function Qw(t=ip){const e=Du.get(t);if(!e&&t===ip&&$w())return Xw();if(!e)throw li.create("no-app",{appName:t});return e}function ci(t,e,n){var o;let r=(o=pk[t])!=null?o:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(l.join(" "));return}go(new us(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="firebase-heartbeat-database",_k=1,_l="firebase-heartbeat-store";let Gh=null;function Yw(){return Gh||(Gh=Lx(vk,_k,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_l)}catch(n){console.warn(n)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),Gh}async function wk(t){try{const n=(await Yw()).transaction(_l),r=await n.objectStore(_l).get(Jw(t));return await n.done,r}catch(e){if(e instanceof Ir)wr.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function Wv(t,e){try{const r=(await Yw()).transaction(_l,"readwrite");await r.objectStore(_l).put(e,Jw(t)),await r.done}catch(n){if(n instanceof Ir)wr.warn(n.message);else{const r=li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function Jw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=1024,Ek=30;class Tk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ik(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Ek){const o=bk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qv(),{heartbeatsToSend:r,unsentEntries:i}=Ck(this._heartbeatsCache.heartbeats),s=Nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wr.warn(n),""}}}function qv(){return new Date().toISOString().substring(0,10)}function Ck(t,e=Sk){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ik{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dx()?hx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hv(t){return Nu(JSON.stringify({version:2,heartbeats:t})).length}function bk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){go(new us("platform-logger",e=>new Ux(e),"PRIVATE")),go(new us("heartbeat",e=>new Tk(e),"PRIVATE")),ci(rp,jv,t),ci(rp,jv,"esm2020"),ci("fire-js","")}xk("");function Zw(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kk=Zw,eS=new Ll("auth","Firebase",Zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new Um("@firebase/auth");function Ak(t,...e){Ou.logLevel<=Te.WARN&&Ou.warn(`Auth (${Fo}): ${t}`,...e)}function Xc(t,...e){Ou.logLevel<=Te.ERROR&&Ou.error(`Auth (${Fo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw jm(t,...e)}function $n(t,...e){return jm(t,...e)}function tS(t,e,n){const r={...kk(),[e]:n};return new Ll("auth","Firebase",r).create(e,{appName:t.name})}function mr(t){return tS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eS.create(t,...e)}function he(t,e,...n){if(!t)throw jm(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xc(e),new Error(e)}function Sr(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(){var t;return typeof self!="undefined"&&((t=self.location)==null?void 0:t.href)||""}function Pk(){return Gv()==="http:"||Gv()==="https:"}function Gv(){var t;return typeof self!="undefined"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pk()||ax()||"connection"in navigator)?navigator.onLine:!0}function Nk(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=ix()||lx()}get(){return Rk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mk=new Vl(3e4,6e4);function ki(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ai(t,e,n,r,i={}){return rS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Fl({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...s};return ox()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Lo(t.emulatorConfig.host)&&(d.credentials="include"),nS.fetch()(await iS(t,t.config.apiHost,n,l),d)})}async function rS(t,e,n){t._canInitEmulator=!1;const r={...Dk,...e};try{const i=new Fk(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ac(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ac(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ac(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw tS(t,f,d);An(t,f)}}catch(i){if(i instanceof Ir)throw i;An(t,"network-request-failed",{message:String(i)})}}async function Ul(t,e,n,r,i={}){const s=await Ai(t,e,n,r,i);return"mfaPendingCredential"in s&&An(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function iS(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?$m(t.config,i):`${t.config.apiScheme}://${i}`;return Ok.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Lk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),Mk.get())})}}function Ac(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$n(t,e,r);return i.customData._tokenResponse=n,i}function Kv(t){return t!==void 0&&t.enterprise!==void 0}class Vk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Lk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Uk(t,e){return Ai(t,"GET","/v2/recaptchaConfig",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e){return Ai(t,"POST","/v1/accounts:delete",e)}async function Mu(t,e){return Ai(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zk(t,e=!1){const n=ct(t),r=await n.getIdToken(e),i=Wm(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ya(Kh(i.auth_time)),issuedAtTime:Ya(Kh(i.iat)),expirationTime:Ya(Kh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kh(t){return Number(t)*1e3}function Wm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const i=zw(n);return i?JSON.parse(i):(Xc("Failed to decode base64 JWT payload"),null)}catch(i){return Xc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Xv(t){const e=Wm(t);return he(e,"internal-error"),he(typeof e.exp!="undefined","internal-error"),he(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ir&&jk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!=null?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ya(this.lastLoginAt),this.creationTime=Ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(t){var v;const e=t.auth,n=await t.getIdToken(),r=await wl(t,Mu(e,{idToken:n}));he(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(v=i.providerUserInfo)!=null&&v.length?sS(i.providerUserInfo):[],o=qk(t.providerData,s),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ap(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Wk(t){const e=ct(t);await Lu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e){const n=await rS(t,{},async()=>{const r=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await iS(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Lo(t.emulatorConfig.host)&&(c.credentials="include"),nS.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gk(t,e){return Ai(t,"POST","/v2/accounts:revokeToken",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken!="undefined","internal-error"),he(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Xv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=Xv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Hk(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new oo;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){he(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class bn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new $k(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ap(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wl(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zk(this,e)}reload(){return Wk(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await wl(this,Bk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var k,D,O,B,F,b,S,T;const r=(k=n.displayName)!=null?k:void 0,i=(D=n.email)!=null?D:void 0,s=(O=n.phoneNumber)!=null?O:void 0,o=(B=n.photoURL)!=null?B:void 0,l=(F=n.tenantId)!=null?F:void 0,c=(b=n._redirectEventId)!=null?b:void 0,d=(S=n.createdAt)!=null?S:void 0,f=(T=n.lastLoginAt)!=null?T:void 0,{uid:v,emailVerified:g,isAnonymous:E,providerData:P,stsTokenManager:R}=n;he(v&&R,e,"internal-error");const y=oo.fromJSON(this.name,R);he(typeof v=="string",e,"internal-error"),Br(r,e.name),Br(i,e.name),he(typeof g=="boolean",e,"internal-error"),he(typeof E=="boolean",e,"internal-error"),Br(s,e.name),Br(o,e.name),Br(l,e.name),Br(c,e.name),Br(d,e.name),Br(f,e.name);const _=new bn({uid:v,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:E,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:y,createdAt:d,lastLoginAt:f});return P&&Array.isArray(P)&&(_.providerData=P.map(C=>({...C}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new oo;i.updateFromServerResponse(n);const s=new bn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Lu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?sS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new oo;l.updateFromIdToken(r);const c=new bn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ap(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;function fr(t){Sr(t instanceof Function,"Expected a class definition");let e=Qv.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oS.type="NONE";const Yv=oS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t,e,n){return`firebase:${t}:${e}:${n}`}class ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Qc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mu(this.auth,{idToken:e}).catch(()=>{});return n?bn._fromGetAccountInfoResponse(this.auth,n,e):null}return bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ao(fr(Yv),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||fr(Yv);const o=Qc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let v;if(typeof f=="string"){const g=await Mu(e,{idToken:f}).catch(()=>{});if(!g)break;v=await bn._fromGetAccountInfoResponse(e,g,f)}else v=bn._fromJSON(e,f);d!==s&&(l=v),s=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ao(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new ao(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hS(e))return"Blackberry";if(fS(e))return"Webos";if(lS(e))return"Safari";if((e.includes("chrome/")||cS(e))&&!e.includes("edge/"))return"Chrome";if(dS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aS(t=Dt()){return/firefox\//i.test(t)}function lS(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cS(t=Dt()){return/crios\//i.test(t)}function uS(t=Dt()){return/iemobile/i.test(t)}function dS(t=Dt()){return/android/i.test(t)}function hS(t=Dt()){return/blackberry/i.test(t)}function fS(t=Dt()){return/webos/i.test(t)}function qm(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Kk(t=Dt()){var e;return qm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Xk(){return cx()&&document.documentMode===10}function pS(t=Dt()){return qm(t)||dS(t)||fS(t)||hS(t)||/windows phone/i.test(t)||uS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t,e=[]){let n;switch(t){case"Browser":n=Jv(Dt());break;case"Worker":n=`${Jv(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(t,e={}){return Ai(t,"GET","/v2/passwordPolicy",ki(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=6;class Zk{constructor(e){var r,i,s,o;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=n.minPasswordLength)!=null?r:Jk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))!=null?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!=null?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,o,l,c;const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=(r=n.meetsMinPasswordLength)!=null?r:!0),n.isValid&&(n.isValid=(i=n.meetsMaxPasswordLength)!=null?i:!0),n.isValid&&(n.isValid=(s=n.containsLowercaseLetter)!=null?s:!0),n.isValid&&(n.isValid=(o=n.containsUppercaseLetter)!=null?o:!0),n.isValid&&(n.isValid=(l=n.containsNumericCharacter)!=null?l:!0),n.isValid&&(n.isValid=(c=n.containsNonAlphanumericCharacter)!=null?c:!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zv(this),this.idTokenSubscription=new Zv(this),this.beforeStateQueue=new Qk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mu(this,{idToken:e}),r=await bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c==null?void 0:c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(mr(this));const n=e?ct(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yk(this),n=new Zk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Gk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=(r=(n=this.currentUser)==null?void 0:n.uid)!=null?r:null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Ak(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ws(t){return ct(t)}class Zv{constructor(e){this.auth=e,this.observer=null,this.addObserver=yx(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tA(t){Nd=t}function gS(t){return Nd.loadJS(t)}function nA(){return Nd.recaptchaEnterpriseScript}function rA(){return Nd.gapiScript}function iA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class sA{constructor(){this.enterprise=new oA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class oA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const aA="recaptcha-enterprise",yS="NO_RECAPTCHA";class lA{constructor(e){this.type=aA,this.auth=ws(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Uk(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new Vk(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(s,o,l){const c=window.grecaptcha;Kv(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(yS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sA().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Kv(window.grecaptcha))i(l,s,o);else{if(typeof window=="undefined"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=nA();c.length!==0&&(c+=l),gS(c).then(()=>{i(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ia(t,e,n,r=!1,i=!1){const s=new lA(t);let o;if(i)o=yS;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lp(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ia(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ia(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await Ia(t,e,n);return r(t,l).catch(async c=>{var d;if(((d=t._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await Ia(t,e,n,!1,!0);return r(t,f)}return Promise.reject(c)})}else{const l=await Ia(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e){const n=zm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(cs(s,e!=null?e:{}))return i;An(i,"already-initialized")}return n.initialize({options:e})}function uA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function dA(t,e,n){const r=ws(t);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=vS(e),{host:o,port:l}=hA(e),c=l===null?"":`:${l}`,d={url:`${s}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(cs(d,r.config.emulator)&&cs(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Lo(o)?(qw(`${s}//${o}${c}`),Hw("Auth",!0)):i||fA()}function vS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hA(t){const e=vS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:e0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:e0(o)}}}function e0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}async function pA(t,e){return Ai(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e){return Ul(t,"POST","/v1/accounts:signInWithPassword",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e){return Ul(t,"POST","/v1/accounts:signInWithEmailLink",ki(t,e))}async function yA(t,e){return Ul(t,"POST","/v1/accounts:signInWithEmailLink",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Hm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Sl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lp(e,n,"signInWithPassword",mA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gA(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lp(e,r,"signUpPassword",pA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yA(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e){return Ul(t,"POST","/v1/accounts:signInWithIdp",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="http://localhost";class ds extends Hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ds(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,lo(e,n)}buildRequest(){const e={requestUri:vA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wA(t){const e=Ra(Na(t)).link,n=e?Ra(Na(e)).deep_link_id:null,r=Ra(Na(t)).deep_link_id;return(r?Ra(Na(r)).link:null)||r||n||e||t}class Gm{constructor(e){var o,l,c,d,f,v;const n=Ra(Na(e)),r=(o=n.apiKey)!=null?o:null,i=(l=n.oobCode)!=null?l:null,s=_A((c=n.mode)!=null?c:null);he(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=(d=n.continueUrl)!=null?d:null,this.languageCode=(f=n.lang)!=null?f:null,this.tenantId=(v=n.tenantId)!=null?v:null}static parseLink(e){const n=wA(e);try{return new Gm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,n){return Sl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gm.parseLink(n);return he(r,"argument-error"),Sl._fromEmailAndCode(e,r.code,r.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends _S{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Bl{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Bl{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Bl{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e){return Ul(t,"POST","/v1/accounts:signUp",ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await bn._fromIdTokenResponse(e,r,i),o=t0(r);return new hs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=t0(r);return new hs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function t0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends Ir{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!=null?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fu(e,n,r,i)}}function wS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(t,s,e,r):s})}async function EA(t,e,n=!1){const r=await wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(t,e,n=!1){const{auth:r}=t;if(dn(r.app))return Promise.reject(mr(r));const i="reauthenticate";try{const s=await wl(t,wS(r,i,e,t),n);he(s.idToken,r,"internal-error");const o=Wm(s.idToken);he(o,r,"internal-error");const{sub:l}=o;return he(t.uid===l,r,"user-mismatch"),hs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&An(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(t,e,n=!1){if(dn(t.app))return Promise.reject(mr(t));const r="signIn",i=await wS(t,r,e),s=await hs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function CA(t,e){return SS(ws(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(t){const e=ws(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IA(t,e,n){if(dn(t.app))return Promise.reject(mr(t));const r=ws(t),o=await lp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SA,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ES(t),c}),l=await hs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function bA(t,e,n){return dn(t.app)?Promise.reject(mr(t)):CA(ct(t),Vo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ES(t),r})}function xA(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function kA(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function TS(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}function AA(t){return ct(t).signOut()}const Vu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vu,"1"),this.storage.removeItem(Vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=1e3,RA=10;class IS extends CS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Xk()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IS.type="LOCAL";const NA=IS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends CS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bS.type="SESSION";const xS=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Dd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,s)),c=await DA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const d=Km("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(v){const g=v;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function MA(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return typeof Wn().WorkerGlobalScope!="undefined"&&typeof Wn().importScripts=="function"}async function LA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function VA(){return kS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firebaseLocalStorageDb",UA=1,Uu="firebaseLocalStorage",PS="fbase_key";class zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Od(t,e){return t.transaction([Uu],e?"readwrite":"readonly").objectStore(Uu)}function BA(){const t=indexedDB.deleteDatabase(AS);return new zl(t).toPromise()}function cp(){const t=indexedDB.open(AS,UA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Uu,{keyPath:PS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Uu)?e(r):(r.close(),await BA(),e(await cp()))})})}async function n0(t,e,n){const r=Od(t,!0).put({[PS]:e,value:n});return new zl(r).toPromise()}async function zA(t,e){const n=Od(t,!1).get(e),r=await new zl(n).toPromise();return r===void 0?null:r.value}function r0(t,e){const n=Od(t,!0).delete(e);return new zl(n).toPromise()}const jA=800,$A=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$A)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dd._getInstance(VA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await LA(),!this.activeServiceWorker)return;this.sender=new OA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);!e||((n=e[0])==null?void 0:n.fulfilled)&&((r=e[0])==null?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await n0(e,Vu,"1"),await r0(e,Vu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>n0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>r0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Od(i,!1).getAll();return new zl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const WA=RS;new Vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e){return e?fr(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HA(t){return SS(t.auth,new Xm(t),t.bypassAuthState)}function GA(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),TA(n,new Xm(t),t.bypassAuthState)}async function KA(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),EA(n,new Xm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HA;case"linkViaPopup":case"linkViaRedirect":return KA;case"reauthViaPopup":case"reauthViaRedirect":return GA;default:An(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new Vl(2e3,1e4);class Xs extends NS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XA.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="pendingRedirect",Yc=new Map;class YA extends NS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const r=await JA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JA(t,e){const n=tP(e),r=eP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ZA(t,e){Yc.set(t._key(),e)}function eP(t){return fr(t._redirectPersistence)}function tP(t){return Qc(QA,t.config.apiKey,t.name)}async function nP(t,e,n=!1){if(dn(t.app))return Promise.reject(mr(t));const r=ws(t),i=qA(r,e),o=await new YA(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=10*60*1e3;class iP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rP&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0(e))}saveEventToCache(e){this.cachedEventUids.add(i0(e)),this.lastProcessedEventTime=Date.now()}}function i0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(t,e={}){return Ai(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lP=/^https?/;async function cP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oP(t);for(const n of e)try{if(uP(n))return}catch{}An(t,"unauthorized-domain")}function uP(t){const e=op(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lP.test(n))return!1;if(aP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new Vl(3e4,6e4);function s0(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hP(t){return new Promise((e,n)=>{var i,s,o;function r(){s0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s0(),n($n(t,"network-request-failed"))},timeout:dP.get()})}if((s=(i=Wn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Wn().gapi)!=null&&o.load)r();else{const l=iA("iframefcb");return Wn()[l]=()=>{gapi.load?r():n($n(t,"network-request-failed"))},gS(`${rA()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function fP(t){return Jc=Jc||hP(t),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=new Vl(5e3,15e3),mP="__/auth/iframe",gP="emulator/auth/iframe",yP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _P(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$m(e,gP):`https://${t.config.authDomain}/${mP}`,r={apiKey:e.apiKey,appName:t.name,v:Fo},i=vP.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Fl(r).slice(1)}`}async function wP(t){const e=await fP(t),n=Wn().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:_P(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yP,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$n(t,"network-request-failed"),l=Wn().setTimeout(()=>{s(o)},pP.get());function c(){Wn().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EP=500,TP=600,CP="_blank",IP="http://localhost";class o0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bP(t,e,n,r=EP,i=TP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...SP,width:r.toString(),height:i.toString(),top:s,left:o},d=Dt().toLowerCase();n&&(l=cS(d)?CP:n),aS(d)&&(e=e||IP,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[E,P])=>`${g}${E}=${P},`,"");if(Kk(d)&&l!=="_self")return xP(e||"",l),new o0(null);const v=window.open(e||"",l,f);he(v,t,"popup-blocked");try{v.focus()}catch{}return new o0(v)}function xP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="__/auth/handler",AP="emulator/auth/handler",PP=encodeURIComponent("fac");async function a0(t,e,n,r,i,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fo,eventId:i};if(e instanceof _S){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,v]of Object.entries(s||{}))o[f]=v}if(e instanceof Bl){const f=e.getScopes().filter(v=>v!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${PP}=${encodeURIComponent(c)}`:"";return`${RP(t)}?${Fl(l).slice(1)}${d}`}function RP({config:t}){return t.emulator?$m(t,AP):`https://${t.authDomain}/${kP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="webStorageSupport";class NP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xS,this._completeRedirectFn=nP,this._overrideRedirectResult=ZA}async _openPopup(e,n,r,i){var o;Sr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await a0(e,n,r,op(),i);return bP(e,s,Km())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await a0(e,n,r,op(),i);return MA(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wP(e),r=new iP(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xh,{type:Xh},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Xh];s!==void 0&&n(!!s),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pS()||lS()||qm()}}const DP=NP;var l0="@firebase/auth",c0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LP(t){go(new us("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mS(t)},d=new eA(r,i,s,c);return uA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),go(new us("auth-internal",e=>{const n=ws(e.getProvider("auth").getImmediate());return(r=>new OP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(l0,c0,MP(t)),ci(l0,c0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=5*60,VP=Ww("authIdTokenMaxAge")||FP;let u0=null;const UP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VP)return;const i=n==null?void 0:n.token;u0!==i&&(u0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Jn(t=Qw()){const e=zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cA(t,{popupRedirectResolver:DP,persistence:[WA,NA,xS]}),r=Ww("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=UP(s.toString());kA(n,o,()=>o(n.currentUser)),xA(n,l=>o(l))}}const i=jw("auth");return i&&dA(n,`http://${i}`),n}function BP(){var t,e;return(e=(t=document.getElementsByTagName("head"))==null?void 0:t[0])!=null?e:document}tA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$n("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",BP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LP("Browser");var d0=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,OS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function T(){}T.prototype=S.prototype,b.F=S.prototype,b.prototype=new T,b.prototype.constructor=b,b.D=function(C,x,N){for(var w=Array(arguments.length-2),G=2;G<arguments.length;G++)w[G-2]=arguments[G];return S.prototype[x].apply(C,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,S,T){T||(T=0);const C=Array(16);if(typeof S=="string")for(var x=0;x<16;++x)C[x]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(x=0;x<16;++x)C[x]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=b.g[0],T=b.g[1],x=b.g[2];let N=b.g[3],w;w=S+(N^T&(x^N))+C[0]+3614090360&4294967295,S=T+(w<<7&4294967295|w>>>25),w=N+(x^S&(T^x))+C[1]+3905402710&4294967295,N=S+(w<<12&4294967295|w>>>20),w=x+(T^N&(S^T))+C[2]+606105819&4294967295,x=N+(w<<17&4294967295|w>>>15),w=T+(S^x&(N^S))+C[3]+3250441966&4294967295,T=x+(w<<22&4294967295|w>>>10),w=S+(N^T&(x^N))+C[4]+4118548399&4294967295,S=T+(w<<7&4294967295|w>>>25),w=N+(x^S&(T^x))+C[5]+1200080426&4294967295,N=S+(w<<12&4294967295|w>>>20),w=x+(T^N&(S^T))+C[6]+2821735955&4294967295,x=N+(w<<17&4294967295|w>>>15),w=T+(S^x&(N^S))+C[7]+4249261313&4294967295,T=x+(w<<22&4294967295|w>>>10),w=S+(N^T&(x^N))+C[8]+1770035416&4294967295,S=T+(w<<7&4294967295|w>>>25),w=N+(x^S&(T^x))+C[9]+2336552879&4294967295,N=S+(w<<12&4294967295|w>>>20),w=x+(T^N&(S^T))+C[10]+4294925233&4294967295,x=N+(w<<17&4294967295|w>>>15),w=T+(S^x&(N^S))+C[11]+2304563134&4294967295,T=x+(w<<22&4294967295|w>>>10),w=S+(N^T&(x^N))+C[12]+1804603682&4294967295,S=T+(w<<7&4294967295|w>>>25),w=N+(x^S&(T^x))+C[13]+4254626195&4294967295,N=S+(w<<12&4294967295|w>>>20),w=x+(T^N&(S^T))+C[14]+2792965006&4294967295,x=N+(w<<17&4294967295|w>>>15),w=T+(S^x&(N^S))+C[15]+1236535329&4294967295,T=x+(w<<22&4294967295|w>>>10),w=S+(x^N&(T^x))+C[1]+4129170786&4294967295,S=T+(w<<5&4294967295|w>>>27),w=N+(T^x&(S^T))+C[6]+3225465664&4294967295,N=S+(w<<9&4294967295|w>>>23),w=x+(S^T&(N^S))+C[11]+643717713&4294967295,x=N+(w<<14&4294967295|w>>>18),w=T+(N^S&(x^N))+C[0]+3921069994&4294967295,T=x+(w<<20&4294967295|w>>>12),w=S+(x^N&(T^x))+C[5]+3593408605&4294967295,S=T+(w<<5&4294967295|w>>>27),w=N+(T^x&(S^T))+C[10]+38016083&4294967295,N=S+(w<<9&4294967295|w>>>23),w=x+(S^T&(N^S))+C[15]+3634488961&4294967295,x=N+(w<<14&4294967295|w>>>18),w=T+(N^S&(x^N))+C[4]+3889429448&4294967295,T=x+(w<<20&4294967295|w>>>12),w=S+(x^N&(T^x))+C[9]+568446438&4294967295,S=T+(w<<5&4294967295|w>>>27),w=N+(T^x&(S^T))+C[14]+3275163606&4294967295,N=S+(w<<9&4294967295|w>>>23),w=x+(S^T&(N^S))+C[3]+4107603335&4294967295,x=N+(w<<14&4294967295|w>>>18),w=T+(N^S&(x^N))+C[8]+1163531501&4294967295,T=x+(w<<20&4294967295|w>>>12),w=S+(x^N&(T^x))+C[13]+2850285829&4294967295,S=T+(w<<5&4294967295|w>>>27),w=N+(T^x&(S^T))+C[2]+4243563512&4294967295,N=S+(w<<9&4294967295|w>>>23),w=x+(S^T&(N^S))+C[7]+1735328473&4294967295,x=N+(w<<14&4294967295|w>>>18),w=T+(N^S&(x^N))+C[12]+2368359562&4294967295,T=x+(w<<20&4294967295|w>>>12),w=S+(T^x^N)+C[5]+4294588738&4294967295,S=T+(w<<4&4294967295|w>>>28),w=N+(S^T^x)+C[8]+2272392833&4294967295,N=S+(w<<11&4294967295|w>>>21),w=x+(N^S^T)+C[11]+1839030562&4294967295,x=N+(w<<16&4294967295|w>>>16),w=T+(x^N^S)+C[14]+4259657740&4294967295,T=x+(w<<23&4294967295|w>>>9),w=S+(T^x^N)+C[1]+2763975236&4294967295,S=T+(w<<4&4294967295|w>>>28),w=N+(S^T^x)+C[4]+1272893353&4294967295,N=S+(w<<11&4294967295|w>>>21),w=x+(N^S^T)+C[7]+4139469664&4294967295,x=N+(w<<16&4294967295|w>>>16),w=T+(x^N^S)+C[10]+3200236656&4294967295,T=x+(w<<23&4294967295|w>>>9),w=S+(T^x^N)+C[13]+681279174&4294967295,S=T+(w<<4&4294967295|w>>>28),w=N+(S^T^x)+C[0]+3936430074&4294967295,N=S+(w<<11&4294967295|w>>>21),w=x+(N^S^T)+C[3]+3572445317&4294967295,x=N+(w<<16&4294967295|w>>>16),w=T+(x^N^S)+C[6]+76029189&4294967295,T=x+(w<<23&4294967295|w>>>9),w=S+(T^x^N)+C[9]+3654602809&4294967295,S=T+(w<<4&4294967295|w>>>28),w=N+(S^T^x)+C[12]+3873151461&4294967295,N=S+(w<<11&4294967295|w>>>21),w=x+(N^S^T)+C[15]+530742520&4294967295,x=N+(w<<16&4294967295|w>>>16),w=T+(x^N^S)+C[2]+3299628645&4294967295,T=x+(w<<23&4294967295|w>>>9),w=S+(x^(T|~N))+C[0]+4096336452&4294967295,S=T+(w<<6&4294967295|w>>>26),w=N+(T^(S|~x))+C[7]+1126891415&4294967295,N=S+(w<<10&4294967295|w>>>22),w=x+(S^(N|~T))+C[14]+2878612391&4294967295,x=N+(w<<15&4294967295|w>>>17),w=T+(N^(x|~S))+C[5]+4237533241&4294967295,T=x+(w<<21&4294967295|w>>>11),w=S+(x^(T|~N))+C[12]+1700485571&4294967295,S=T+(w<<6&4294967295|w>>>26),w=N+(T^(S|~x))+C[3]+2399980690&4294967295,N=S+(w<<10&4294967295|w>>>22),w=x+(S^(N|~T))+C[10]+4293915773&4294967295,x=N+(w<<15&4294967295|w>>>17),w=T+(N^(x|~S))+C[1]+2240044497&4294967295,T=x+(w<<21&4294967295|w>>>11),w=S+(x^(T|~N))+C[8]+1873313359&4294967295,S=T+(w<<6&4294967295|w>>>26),w=N+(T^(S|~x))+C[15]+4264355552&4294967295,N=S+(w<<10&4294967295|w>>>22),w=x+(S^(N|~T))+C[6]+2734768916&4294967295,x=N+(w<<15&4294967295|w>>>17),w=T+(N^(x|~S))+C[13]+1309151649&4294967295,T=x+(w<<21&4294967295|w>>>11),w=S+(x^(T|~N))+C[4]+4149444226&4294967295,S=T+(w<<6&4294967295|w>>>26),w=N+(T^(S|~x))+C[11]+3174756917&4294967295,N=S+(w<<10&4294967295|w>>>22),w=x+(S^(N|~T))+C[2]+718787259&4294967295,x=N+(w<<15&4294967295|w>>>17),w=T+(N^(x|~S))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(x+(w<<21&4294967295|w>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.v=function(b,S){S===void 0&&(S=b.length);const T=S-this.blockSize,C=this.C;let x=this.h,N=0;for(;N<S;){if(x==0)for(;N<=T;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<S;)if(C[x++]=b.charCodeAt(N++),x==this.blockSize){i(this,C),x=0;break}}else for(;N<S;)if(C[x++]=b[N++],x==this.blockSize){i(this,C),x=0;break}}this.h=x,this.o+=S},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;S=this.o*8;for(var T=b.length-8;T<b.length;++T)b[T]=S&255,S/=256;for(this.v(b),b=Array(16),S=0,T=0;T<4;++T)for(let C=0;C<32;C+=8)b[S++]=this.g[T]>>>C&255;return b};function s(b,S){var T=l;return Object.prototype.hasOwnProperty.call(T,b)?T[b]:T[b]=S(b)}function o(b,S){this.h=S;const T=[];let C=!0;for(let x=b.length-1;x>=0;x--){const N=b[x]|0;C&&N==S||(T[x]=N,C=!1)}this.g=T}var l={};function c(b){return-128<=b&&b<128?s(b,function(S){return new o([S|0],S<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return v;if(b<0)return y(d(-b));const S=[];let T=1;for(let C=0;b>=T;C++)S[C]=b/T|0,T*=4294967296;return new o(S,0)}function f(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return y(f(b.substring(1),S));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(S,8));let C=v;for(let N=0;N<b.length;N+=8){var x=Math.min(8,b.length-N);const w=parseInt(b.substring(N,N+x),S);x<8?(x=d(Math.pow(S,x)),C=C.j(x).add(d(w))):(C=C.j(T),C=C.add(d(w)))}return C}var v=c(0),g=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-y(this).m();let b=0,S=1;for(let T=0;T<this.g.length;T++){const C=this.i(T);b+=(C>=0?C:4294967296+C)*S,S*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(R(this))return"-"+y(this).toString(b);const S=d(Math.pow(b,6));var T=this;let C="";for(;;){const x=O(T,S).g;T=_(T,x.j(S));let N=((T.g.length>0?T.g[0]:T.h)>>>0).toString(b);if(T=x,P(T))return N+C;for(;N.length<6;)N="0"+N;C=N+C}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(let S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function R(b){return b.h==-1}t.l=function(b){return b=_(this,b),R(b)?-1:P(b)?0:1};function y(b){const S=b.g.length,T=[];for(let C=0;C<S;C++)T[C]=~b.g[C];return new o(T,~b.h).add(g)}t.abs=function(){return R(this)?y(this):this},t.add=function(b){const S=Math.max(this.g.length,b.g.length),T=[];let C=0;for(let x=0;x<=S;x++){let N=C+(this.i(x)&65535)+(b.i(x)&65535),w=(N>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);C=w>>>16,N&=65535,w&=65535,T[x]=w<<16|N}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(b,S){return b.add(y(S))}t.j=function(b){if(P(this)||P(b))return v;if(R(this))return R(b)?y(this).j(y(b)):y(y(this).j(b));if(R(b))return y(this.j(y(b)));if(this.l(E)<0&&b.l(E)<0)return d(this.m()*b.m());const S=this.g.length+b.g.length,T=[];for(var C=0;C<2*S;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(let x=0;x<b.g.length;x++){const N=this.i(C)>>>16,w=this.i(C)&65535,G=b.i(x)>>>16,J=b.i(x)&65535;T[2*C+2*x]+=w*J,k(T,2*C+2*x),T[2*C+2*x+1]+=N*J,k(T,2*C+2*x+1),T[2*C+2*x+1]+=w*G,k(T,2*C+2*x+1),T[2*C+2*x+2]+=N*G,k(T,2*C+2*x+2)}for(b=0;b<S;b++)T[b]=T[2*b+1]<<16|T[2*b];for(b=S;b<2*S;b++)T[b]=0;return new o(T,0)};function k(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function D(b,S){this.g=b,this.h=S}function O(b,S){if(P(S))throw Error("division by zero");if(P(b))return new D(v,v);if(R(b))return S=O(y(b),S),new D(y(S.g),y(S.h));if(R(S))return S=O(b,y(S)),new D(y(S.g),S.h);if(b.g.length>30){if(R(b)||R(S))throw Error("slowDivide_ only works with positive integers.");for(var T=g,C=S;C.l(b)<=0;)T=B(T),C=B(C);var x=F(T,1),N=F(C,1);for(C=F(C,2),T=F(T,2);!P(C);){var w=N.add(C);w.l(b)<=0&&(x=x.add(T),N=w),C=F(C,1),T=F(T,1)}return S=_(b,x.j(S)),new D(x,S)}for(x=v;b.l(S)>=0;){for(T=Math.max(1,Math.floor(b.m()/S.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),N=d(T),w=N.j(S);R(w)||w.l(b)>0;)T-=C,N=d(T),w=N.j(S);P(N)&&(N=g),x=x.add(N),b=_(b,w)}return new D(x,b)}t.B=function(b){return O(this,b).h},t.and=function(b){const S=Math.max(this.g.length,b.g.length),T=[];for(let C=0;C<S;C++)T[C]=this.i(C)&b.i(C);return new o(T,this.h&b.h)},t.or=function(b){const S=Math.max(this.g.length,b.g.length),T=[];for(let C=0;C<S;C++)T[C]=this.i(C)|b.i(C);return new o(T,this.h|b.h)},t.xor=function(b){const S=Math.max(this.g.length,b.g.length),T=[];for(let C=0;C<S;C++)T[C]=this.i(C)^b.i(C);return new o(T,this.h^b.h)};function B(b){const S=b.g.length+1,T=[];for(let C=0;C<S;C++)T[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(T,b.h)}function F(b,S){const T=S>>5;S%=32;const C=b.g.length-T,x=[];for(let N=0;N<C;N++)x[N]=S>0?b.i(N+T)>>>S|b.i(N+T+1)<<32-S:b.i(N+T);return new o(x,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,OS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ui=o}).apply(typeof d0!="undefined"?d0:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Pc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MS,Da,LS,Zc,up,FS,VS,US;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var m=r;a=a.split(".");for(var I=0;I<a.length-1;I++){var L=a[I];if(!(L in m))break e;m=m[L]}a=a[a.length-1],I=m[a],h=h(I),h!=I&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(h){var m=[],I;for(I in h)Object.prototype.hasOwnProperty.call(h,I)&&m.push([I,h[I]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,m){return a.call.apply(a.bind,arguments)}function d(a,h,m){return d=c,d.apply(null,arguments)}function f(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),a.apply(this,I)}}function v(a,h){function m(){}m.prototype=h.prototype,a.Z=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Ob=function(I,L,U){for(var Z=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)Z[Se-2]=arguments[Se];return h.prototype[L].apply(I,Z)}}var g=typeof AsyncContext!="undefined"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function E(a){const h=a.length;if(h>0){const m=Array(h);for(let I=0;I<h;I++)m[I]=a[I];return m}return[]}function P(a,h){for(let I=1;I<arguments.length;I++){const L=arguments[I];var m=typeof L;if(m=m!="object"?m:L?Array.isArray(L)?"array":m:"null",m=="array"||m=="object"&&typeof L.length=="number"){m=a.length||0;const U=L.length||0;a.length=m+U;for(let Z=0;Z<U;Z++)a[m+Z]=L[Z]}else a.push(L)}}class R{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(a){o.setTimeout(()=>{throw a},0)}function _(){var a=b;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class k{constructor(){this.h=this.g=null}add(h,m){const I=D.get();I.set(h,m),this.h?this.h.next=I:this.g=I,this.h=I}}var D=new R(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let B,F=!1,b=new k,S=()=>{const a=Promise.resolve(void 0);B=()=>{a.then(T)}};function T(){for(var a;a=_();){try{a.h.call(a.g)}catch(m){y(m)}var h=D;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}F=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return a}();function w(a){return/^[\s\xa0]*$/.test(a)}function G(a,h){x.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}v(G,x),G.prototype.init=function(a,h){const m=this.type=a.type,I=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),se=0;function me(a,h,m,I,L){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!I,this.ha=L,this.key=++se,this.da=this.fa=!1}function ye(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function K(a,h,m){for(const I in a)h.call(m,a[I],I,a)}function H(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function z(a){const h={};for(const m in a)h[m]=a[m];return h}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(a,h){let m,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(m in I)a[m]=I[m];for(let U=0;U<V.length;U++)m=V[U],Object.prototype.hasOwnProperty.call(I,m)&&(a[m]=I[m])}}function re(a){this.src=a,this.g={},this.h=0}re.prototype.add=function(a,h,m,I,L){const U=a.toString();a=this.g[U],a||(a=this.g[U]=[],this.h++);const Z=ue(a,h,I,L);return Z>-1?(h=a[Z],m||(h.fa=!1)):(h=new me(h,this.src,U,!!I,L),h.fa=m,a.push(h)),h};function ee(a,h){const m=h.type;if(m in a.g){var I=a.g[m],L=Array.prototype.indexOf.call(I,h,void 0),U;(U=L>=0)&&Array.prototype.splice.call(I,L,1),U&&(ye(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function ue(a,h,m,I){for(let L=0;L<a.length;++L){const U=a[L];if(!U.da&&U.listener==h&&U.capture==!!m&&U.ha==I)return L}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Re={};function de(a,h,m,I,L){if(I&&I.once)return Rn(a,h,m,I,L);if(Array.isArray(h)){for(let U=0;U<h.length;U++)de(a,h[U],m,I,L);return null}return m=xr(m),a&&a[J]?a.J(h,m,l(I)?!!I.capture:!!I,L):Zn(a,h,m,!1,I,L)}function Zn(a,h,m,I,L,U){if(!h)throw Error("Invalid event type");const Z=l(L)?!!L.capture:!!L;let Se=tr(a);if(Se||(a[_e]=Se=new re(a)),m=Se.add(h,m,I,Z,U),m.proxy)return m;if(I=br(),m.proxy=I,I.src=a,I.listener=m,a.addEventListener)N||(L=Z),L===void 0&&(L=!1),a.addEventListener(h.toString(),I,L);else if(a.attachEvent)a.attachEvent(er(h.toString()),I);else if(a.addListener&&a.removeListener)a.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function br(){function a(m){return h.call(a.src,a.listener,m)}const h=Ho;return a}function Rn(a,h,m,I,L){if(Array.isArray(h)){for(let U=0;U<h.length;U++)Rn(a,h[U],m,I,L);return null}return m=xr(m),a&&a[J]?a.K(h,m,l(I)?!!I.capture:!!I,L):Zn(a,h,m,!0,I,L)}function Nn(a,h,m,I,L){if(Array.isArray(h))for(var U=0;U<h.length;U++)Nn(a,h[U],m,I,L);else I=l(I)?!!I.capture:!!I,m=xr(m),a&&a[J]?(a=a.i,U=String(h).toString(),U in a.g&&(h=a.g[U],m=ue(h,m,I,L),m>-1&&(ye(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete a.g[U],a.h--)))):a&&(a=tr(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ue(h,m,I,L)),(m=a>-1?h[a]:null)&&ke(m))}function ke(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[J])ee(h.i,a);else{var m=a.type,I=a.proxy;h.removeEventListener?h.removeEventListener(m,I,a.capture):h.detachEvent?h.detachEvent(er(m),I):h.addListener&&h.removeListener&&h.removeListener(I),(m=tr(h))?(ee(m,a),m.h==0&&(m.src=null,h[_e]=null)):ye(a)}}}function er(a){return a in Re?Re[a]:Re[a]="on"+a}function Ho(a,h){if(a.da)a=!0;else{h=new G(h,this);const m=a.listener,I=a.ha||a.src;a.fa&&ke(a),a=m.call(I,h)}return a}function tr(a){return a=a[_e],a instanceof re?a:null}var yn="__closure_events_fn_"+(Math.random()*1e9>>>0);function xr(a){return typeof a=="function"?a:(a[yn]||(a[yn]=function(h){return a.handleEvent(h)}),a[yn])}function Ke(){C.call(this),this.i=new re(this),this.M=this,this.G=null}v(Ke,C),Ke.prototype[J]=!0,Ke.prototype.removeEventListener=function(a,h,m,I){Nn(this,a,h,m,I)};function j(a,h){var m,I=a.G;if(I)for(m=[];I;I=I.G)m.push(I);if(a=a.M,I=h.type||h,typeof h=="string")h=new x(h,a);else if(h instanceof x)h.target=h.target||a;else{var L=h;h=new x(I,a),$(h,L)}L=!0;let U,Z;if(m)for(Z=m.length-1;Z>=0;Z--)U=h.g=m[Z],L=ae(U,I,!0,h)&&L;if(U=h.g=a,L=ae(U,I,!0,h)&&L,L=ae(U,I,!1,h)&&L,m)for(Z=0;Z<m.length;Z++)U=h.g=m[Z],L=ae(U,I,!1,h)&&L}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const m=a.g[h];for(let I=0;I<m.length;I++)ye(m[I]);delete a.g[h],a.h--}}this.G=null},Ke.prototype.J=function(a,h,m,I){return this.i.add(String(a),h,!1,m,I)},Ke.prototype.K=function(a,h,m,I){return this.i.add(String(a),h,!0,m,I)};function ae(a,h,m,I){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let L=!0;for(let U=0;U<h.length;++U){const Z=h[U];if(Z&&!Z.da&&Z.capture==m){const Se=Z.listener,st=Z.ha||Z.src;Z.fa&&ee(a.i,Z),L=Se.call(st,I)!==!1&&L}}return L&&!I.defaultPrevented}function te(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Ve(a){a.g=te(()=>{a.g=null,a.i&&(a.i=!1,Ve(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ze extends C{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ze(a){C.call(this),this.h=a,this.g={}}v(Ze,C);var nr=[];function rr(a){K(a.g,function(h,m){this.g.hasOwnProperty(m)&&ke(h)},a),a.g={}}Ze.prototype.N=function(){Ze.Z.N.call(this),rr(this)},Ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ir=o.JSON.stringify,je=o.JSON.parse,tc=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Go(){}function Ko(){}var kr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vn(){x.call(this,"d")}v(vn,x);function Ar(){x.call(this,"c")}v(Ar,x);var Bt={},Cs=null;function Is(){return Cs=Cs||new Ke}Bt.Ia="serverreachability";function Xo(a){x.call(this,Bt.Ia,a)}v(Xo,x);function Dn(a){const h=Is();j(h,new Xo(h))}Bt.STAT_EVENT="statevent";function Pr(a,h){x.call(this,Bt.STAT_EVENT,a),this.stat=h}v(Pr,x);function mt(a){const h=Is();j(h,new Pr(h,a))}Bt.Ja="timingevent";function qe(a,h){x.call(this,Bt.Ja,a),this.size=h}v(qe,x);function gt(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function bs(){this.g=!0}bs.prototype.ua=function(){this.g=!1};function ah(a,h,m,I,L,U){a.info(function(){if(a.g)if(U){var Z="",Se=U.split("&");for(let De=0;De<Se.length;De++){var st=Se[De].split("=");if(st.length>1){const ut=st[0];st=st[1];const On=ut.split("_");Z=On.length>=2&&On[1]=="type"?Z+(ut+"="+st+"&"):Z+(ut+"=redacted&")}}}else Z=null;else Z=U;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+h+`
`+m+`
`+Z})}function Qo(a,h,m,I,L,U,Z){a.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+h+`
`+m+`
`+U+" "+Z})}function _n(a,h,m,I){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Rr(a,m)+(I?" "+I:"")})}function yt(a,h){a.info(function(){return"TIMEOUT: "+h})}bs.prototype.info=function(){};function Rr(a,h){if(!a.g)return h;if(!h)return null;try{const U=JSON.parse(h);if(U){for(a=0;a<U.length;a++)if(Array.isArray(U[a])){var m=U[a];if(!(m.length<2)){var I=m[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let Z=1;Z<I.length;Z++)I[Z]=""}}}}return ir(U)}catch{return h}}var Di={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xs;function Yo(){}v(Yo,Go),Yo.prototype.g=function(){return new XMLHttpRequest},xs=new Yo;function Dr(a){return encodeURIComponent(String(a))}function nc(a){var h=1;a=a.split(":");const m=[];for(;h>0&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function wn(a,h,m,I){this.j=a,this.i=h,this.l=m,this.S=I||1,this.V=new Ze(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jo}function Jo(){this.i=null,this.g="",this.h=!1}var Zo={},Or={};function sn(a,h,m){a.M=1,a.A=Ps(an(h)),a.u=m,a.R=!0,rc(a,null)}function rc(a,h){a.F=Date.now(),ks(a),a.B=an(a.A);var m=a.B,I=a.S;Array.isArray(I)||(I=[String(I)]),Bg(m.i,"t",I),a.C=0,m=a.j.L,a.h=new Jo,a.g=iy(a.j,m?h:null,!a.u),a.P>0&&(a.O=new ze(d(a.Y,a,a.g),a.P)),h=a.V,m=a.g,I=a.ba;var L="readystatechange";Array.isArray(L)||(L&&(nr[0]=L.toString()),L=nr);for(let U=0;U<L.length;U++){const Z=de(m,L[U],I||h.handleEvent,!1,h.h||h);if(!Z)break;h.g[Z.key]=Z}h=a.J?z(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Dn(),ah(a.i,a.v,a.B,a.l,a.S,a.u)}wn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Fr(a)==3?h.j():this.Y(a)},wn.prototype.Y=function(a){try{if(a==this.g)e:{const Se=Fr(this.g),st=this.g.ya(),De=this.g.ca();if(!(Se<3)&&(Se!=3||this.g&&(this.h.h||this.g.la()||Gg(this.g)))){this.K||Se!=4||st==7||(st==8||De<=0?Dn(3):Dn(2)),na(this);var h=this.g.ca();this.X=h;var m=ea(this);if(this.o=h==200,Qo(this.i,this.v,this.B,this.l,this.S,Se,h),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(I)){var U=I;break t}}U=null}if(a=U)_n(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ra(this,a);else{this.o=!1,this.m=3,mt(12),sr(this),Mr(this);break e}}if(this.R){a=!0;let ut;for(;!this.K&&this.C<m.length;)if(ut=ic(this,m),ut==Or){Se==4&&(this.m=4,mt(14),a=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==Zo){this.m=4,mt(15),_n(this.i,this.l,m,"[Invalid Chunk]"),a=!1;break}else _n(this.i,this.l,ut,null),ra(this,ut);if(on(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||m.length!=0||this.h.h||(this.m=1,mt(16),a=!1),this.o=this.o&&a,!a)_n(this.i,this.l,m,"[Invalid Chunked Response]"),sr(this),Mr(this);else if(m.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),hh(Z),Z.P=!0,mt(11))}}else _n(this.i,this.l,m,null),ra(this,m);Se==4&&sr(this),this.o&&!this.K&&(Se==4?ey(this.j,this):(this.o=!1,ks(this)))}else BT(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),sr(this),Mr(this)}}}catch{}finally{}};function ea(a){if(!on(a))return a.g.la();const h=Gg(a.g);if(h==="")return"";let m="";const I=h.length,L=Fr(a.g)==4;if(!a.h.i){if(typeof TextDecoder=="undefined")return sr(a),Mr(a),"";a.h.i=new o.TextDecoder}for(let U=0;U<I;U++)a.h.h=!0,m+=a.h.i.decode(h[U],{stream:!(L&&U==I-1)});return h.length=0,a.h.g+=m,a.C=0,a.h.g}function on(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function ic(a,h){var m=a.C,I=h.indexOf(`
`,m);return I==-1?Or:(m=Number(h.substring(m,I)),isNaN(m)?Zo:(I+=1,I+m>h.length?Or:(h=h.slice(I,I+m),a.C=I+m,h)))}wn.prototype.cancel=function(){this.K=!0,sr(this)};function ks(a){a.T=Date.now()+a.H,ta(a,a.H)}function ta(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=gt(d(a.aa,a),h)}function na(a){a.D&&(o.clearTimeout(a.D),a.D=null)}wn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(yt(this.i,this.B),this.M!=2&&(Dn(),mt(17)),sr(this),this.m=2,Mr(this)):ta(this,this.T-a)};function Mr(a){a.j.I==0||a.K||ey(a.j,a)}function sr(a){na(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,rr(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function ra(a,h){try{var m=a.j;if(m.I!=0&&(m.g==a||ia(m.h,a))){if(!a.L&&ia(m.h,a)&&m.I==3){try{var I=m.Ba.g.parse(h)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<a.F)fc(m),dc(m);else break e;dh(m),mt(18)}}else m.xa=L[1],0<m.xa-m.K&&L[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=gt(d(m.Va,m),6e3));ac(m.h)<=1&&m.ta&&(m.ta=void 0)}else Bi(m,11)}else if((a.L||m.g==a)&&fc(m),!w(h))for(L=m.Ba.g.parse(h),h=0;h<L.length;h++){let De=L[h];const ut=De[0];if(!(ut<=m.K))if(m.K=ut,De=De[1],m.I==2)if(De[0]=="c"){m.M=De[1],m.ba=De[2];const On=De[3];On!=null&&(m.ka=On,m.j.info("VER="+m.ka));const zi=De[4];zi!=null&&(m.za=zi,m.j.info("SVER="+m.za));const Vr=De[5];Vr!=null&&typeof Vr=="number"&&Vr>0&&(I=1.5*Vr,m.O=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const Ur=a.g;if(Ur){const mc=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mc){var U=I.h;U.g||mc.indexOf("spdy")==-1&&mc.indexOf("quic")==-1&&mc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(sa(U,U.h),U.h=null))}if(I.G){const fh=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(I.wa=fh,Ne(I.J,I.G,fh))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-a.F,m.j.info("Handshake RTT: "+m.T+"ms")),I=m;var Z=a;if(I.na=ry(I,I.L?I.ba:null,I.W),Z.L){or(I.h,Z);var Se=Z,st=I.O;st&&(Se.H=st),Se.D&&(na(Se),ks(Se)),I.g=Z}else Jg(I);m.i.length>0&&hc(m)}else De[0]!="stop"&&De[0]!="close"||Bi(m,7);else m.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Bi(m,7):uh(m):De[0]!="noop"&&m.l&&m.l.qa(De),m.A=0)}}Dn(4)}catch{}}var Oi=class{constructor(a,h){this.g=a,this.map=h}};function sc(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oc(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ac(a){return a.h?1:a.g?a.g.size:0}function ia(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function sa(a,h){a.g?a.g.add(h):a.h=h}function or(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}sc.prototype.cancel=function(){if(this.i=As(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function As(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.G);return h}return E(a.i)}var lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mi(a,h){if(a){a=a.split("&");for(let m=0;m<a.length;m++){const I=a[m].indexOf("=");let L,U=null;I>=0?(L=a[m].substring(0,I),U=a[m].substring(I+1)):L=a[m],h(L,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Sn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Sn?(this.l=a.l,Li(this,a.j),this.o=a.o,this.g=a.g,Fi(this,a.u),this.h=a.h,oa(this,zg(a.i)),this.m=a.m):a&&(h=String(a).match(lc))?(this.l=!1,Li(this,h[1]||"",!0),this.o=Vi(h[2]||""),this.g=Vi(h[3]||"",!0),Fi(this,h[4]),this.h=Vi(h[5]||"",!0),oa(this,h[6]||"",!0),this.m=Vi(h[7]||"")):(this.l=!1,this.i=new aa(null,this.l))}Sn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(A(h,le,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(A(h,le,!0),"@"),a.push(Dr(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&a.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(A(m,m.charAt(0)=="/"?X:we,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",A(m,Rs)),a.join("")},Sn.prototype.resolve=function(a){const h=an(this);let m=!!a.j;m?Li(h,a.j):m=!!a.o,m?h.o=a.o:m=!!a.g,m?h.g=a.g:m=a.u!=null;var I=a.h;if(m)Fi(h,a.u);else if(m=!!a.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=h.h.lastIndexOf("/");L!=-1&&(I=h.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const U=[];for(let Z=0;Z<L.length;){const Se=L[Z++];Se=="."?I&&Z==L.length&&U.push(""):Se==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),I&&Z==L.length&&U.push("")):(U.push(Se),I=!0)}I=U.join("/")}else I=L}return m?h.h=I:m=a.i.toString()!=="",m?oa(h,zg(a.i)):m=!!a.m,m&&(h.m=a.m),h};function an(a){return new Sn(a)}function Li(a,h,m){a.j=m?Vi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Fi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function oa(a,h,m){h instanceof aa?(a.i=h,OT(a.i,a.l)):(m||(h=A(h,Qt)),a.i=new aa(h,a.l))}function Ne(a,h,m){a.i.set(h,m)}function Ps(a){return Ne(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Vi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function A(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,Q),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Q(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var le=/[#\/\?@]/g,we=/[#\?:]/g,X=/[#\?]/g,Qt=/[#\?@]/g,Rs=/#/g;function aa(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Ui(a){a.g||(a.g=new Map,a.h=0,a.i&&Mi(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=aa.prototype,t.add=function(a,h){Ui(this),this.i=null,a=Ns(this,a);let m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Fg(a,h){Ui(a),h=Ns(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Vg(a,h){return Ui(a),h=Ns(a,h),a.g.has(h)}t.forEach=function(a,h){Ui(this),this.g.forEach(function(m,I){m.forEach(function(L){a.call(h,L,I,this)},this)},this)};function Ug(a,h){Ui(a);let m=[];if(typeof h=="string")Vg(a,h)&&(m=m.concat(a.g.get(Ns(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)m=m.concat(a[h]);return m}t.set=function(a,h){return Ui(this),this.i=null,a=Ns(this,a),Vg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Ug(this,a),a.length>0?String(a[0]):h):h};function Bg(a,h,m){Fg(a,h),m.length>0&&(a.i=null,a.g.set(Ns(a,h),E(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let I=0;I<h.length;I++){var m=h[I];const L=Dr(m);m=Ug(this,m);for(let U=0;U<m.length;U++){let Z=L;m[U]!==""&&(Z+="="+Dr(m[U])),a.push(Z)}}return this.i=a.join("&")};function zg(a){const h=new aa;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Ns(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function OT(a,h){h&&!a.j&&(Ui(a),a.i=null,a.g.forEach(function(m,I){const L=I.toLowerCase();I!=L&&(Fg(this,I),Bg(this,L,m))},a)),a.j=h}function MT(a,h){const m=new bs;if(o.Image){const I=new Image;I.onload=f(Lr,m,"TestLoadImage: loaded",!0,h,I),I.onerror=f(Lr,m,"TestLoadImage: error",!1,h,I),I.onabort=f(Lr,m,"TestLoadImage: abort",!1,h,I),I.ontimeout=f(Lr,m,"TestLoadImage: timeout",!1,h,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=a}else h(!1)}function LT(a,h){const m=new bs,I=new AbortController,L=setTimeout(()=>{I.abort(),Lr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:I.signal}).then(U=>{clearTimeout(L),U.ok?Lr(m,"TestPingServer: ok",!0,h):Lr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Lr(m,"TestPingServer: error",!1,h)})}function Lr(a,h,m,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(m)}catch{}}function FT(){this.g=new tc}function lh(a){this.i=a.Sb||null,this.h=a.ab||!1}v(lh,Go),lh.prototype.g=function(){return new cc(this.i,this.h)};function cc(a,h){Ke.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(cc,Ke),t=cc.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,ca(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,la(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream!="undefined"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function jg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?la(this):ca(this),this.readyState==3&&jg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,la(this))},t.Na=function(a){this.g&&(this.response=a,la(this))},t.ga=function(){this.g&&la(this)};function la(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ca(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function ca(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function $g(a){let h="";return K(a,function(m,I){h+=I,h+=":",h+=m,h+=`\r
`}),h}function ch(a,h,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=$g(m),typeof a=="string"?m!=null&&Dr(m):Ne(a,h,m))}function Xe(a){Ke.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Xe,Ke);var VT=/^https?$/i,UT=["POST","PUT"];t=Xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xs.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(U){Wg(this,U);return}if(a=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)m.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())m.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(U=>U.toLowerCase()=="content-type"),L=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(UT,h,void 0)>=0)||I||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of m)this.g.setRequestHeader(U,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(U){Wg(this,U)}};function Wg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,qg(a),uc(a)}function qg(a){a.A||(a.A=!0,j(a,"complete"),j(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,j(this,"complete"),j(this,"abort"),uc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uc(this,!0)),Xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Hg(this):this.Xa())},t.Xa=function(){Hg(this)};function Hg(a){if(a.h&&typeof s!="undefined"){if(a.v&&Fr(a)==4)setTimeout(a.Ca.bind(a),0);else if(j(a,"readystatechange"),Fr(a)==4){a.h=!1;try{const U=a.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var I;if(I=U===0){let Z=String(a.D).match(lc)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),I=!VT.test(Z?Z.toLowerCase():"")}m=I}if(m)j(a,"complete"),j(a,"success");else{a.o=6;try{var L=Fr(a)>2?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.ca()+"]",qg(a)}}finally{uc(a)}}}}function uc(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const m=a.g;a.g=null,h||j(a,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Fr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),je(h)}};function Gg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function BT(a){const h={};a=(a.g&&Fr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<a.length;I++){if(w(a[I]))continue;var m=nc(a[I]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const U=h[L]||[];h[L]=U,U.push(m)}H(h,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function Kg(a){this.za=0,this.i=[],this.j=new bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ua("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ua("baseRetryDelayMs",5e3,a),this.Za=ua("retryDelaySeedMs",1e4,a),this.Ta=ua("forwardChannelMaxRetries",2,a),this.va=ua("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new sc(a&&a.concurrentRequestLimit),this.Ba=new FT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Kg.prototype,t.ka=8,t.I=1,t.connect=function(a,h,m,I){mt(0),this.W=a,this.H=h||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.J=ry(this,null,this.W),hc(this)};function uh(a){if(Xg(a),a.I==3){var h=a.V++,m=an(a.J);if(Ne(m,"SID",a.M),Ne(m,"RID",h),Ne(m,"TYPE","terminate"),da(a,m),h=new wn(a,a.j,h),h.M=2,h.A=Ps(an(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=iy(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ks(h)}ny(a)}function dc(a){a.g&&(hh(a),a.g.cancel(),a.g=null)}function Xg(a){dc(a),a.v&&(o.clearTimeout(a.v),a.v=null),fc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function hc(a){if(!oc(a.h)&&!a.m){a.m=!0;var h=a.Ea;B||S(),F||(B(),F=!0),b.add(h,a),a.D=0}}function zT(a,h){return ac(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=gt(d(a.Ea,a,h),ty(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const L=new wn(this,this.j,a);let U=this.o;if(this.U&&(U?(U=z(U),$(U,this.U)):U=this.U),this.u!==null||this.R||(L.J=U,U=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(h+=I,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Yg(this,L,h),m=an(this.J),Ne(m,"RID",a),Ne(m,"CVER",22),this.G&&Ne(m,"X-HTTP-Session-Id",this.G),da(this,m),U&&(this.R?h="headers="+Dr($g(U))+"&"+h:this.u&&ch(m,this.u,U)),sa(this.h,L),this.Ra&&Ne(m,"TYPE","init"),this.S?(Ne(m,"$req",h),Ne(m,"SID","null"),L.U=!0,sn(L,m,null)):sn(L,m,h),this.I=2}}else this.I==3&&(a?Qg(this,a):this.i.length==0||oc(this.h)||Qg(this))};function Qg(a,h){var m;h?m=h.l:m=a.V++;const I=an(a.J);Ne(I,"SID",a.M),Ne(I,"RID",m),Ne(I,"AID",a.K),da(a,I),a.u&&a.o&&ch(I,a.u,a.o),m=new wn(a,a.j,m,a.D+1),a.u===null&&(m.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Yg(a,m,1e3),m.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),sa(a.h,m),sn(m,I,h)}function da(a,h){a.H&&K(a.H,function(m,I){Ne(h,I,m)}),a.l&&K({},function(m,I){Ne(h,I,m)})}function Yg(a,h,m){m=Math.min(a.i.length,m);const I=a.l?d(a.l.Ka,a.l,a):null;e:{var L=a.i;let Se=-1;for(;;){const st=["count="+m];Se==-1?m>0?(Se=L[0].g,st.push("ofs="+Se)):Se=0:st.push("ofs="+Se);let De=!0;for(let ut=0;ut<m;ut++){var U=L[ut].g;const On=L[ut].map;if(U-=Se,U<0)Se=Math.max(0,L[ut].g-100),De=!1;else try{U="req"+U+"_"||"";try{var Z=On instanceof Map?On:Object.entries(On);for(const[zi,Vr]of Z){let Ur=Vr;l(Vr)&&(Ur=ir(Vr)),st.push(U+zi+"="+encodeURIComponent(Ur))}}catch(zi){throw st.push(U+"type="+encodeURIComponent("_badmap")),zi}}catch{I&&I(On)}}if(De){Z=st.join("&");break e}}Z=void 0}return a=a.i.splice(0,m),h.G=a,Z}function Jg(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;B||S(),F||(B(),F=!0),b.add(h,a),a.A=0}}function dh(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=gt(d(a.Da,a),ty(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Zg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=gt(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),dc(this),Zg(this))};function hh(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Zg(a){a.g=new wn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=an(a.na);Ne(h,"RID","rpc"),Ne(h,"SID",a.M),Ne(h,"AID",a.K),Ne(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ne(h,"TO",a.ia),Ne(h,"TYPE","xmlhttp"),da(a,h),a.u&&a.o&&ch(h,a.u,a.o),a.O&&(a.g.H=a.O);var m=a.g;a=a.ba,m.M=1,m.A=Ps(an(h)),m.u=null,m.R=!0,rc(m,a)}t.Va=function(){this.C!=null&&(this.C=null,dc(this),dh(this),mt(19))};function fc(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function ey(a,h){var m=null;if(a.g==h){fc(a),hh(a),a.g=null;var I=2}else if(ia(a.h,h))m=h.G,or(a.h,h),I=1;else return;if(a.I!=0){if(h.o)if(I==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var L=a.D;I=Is(),j(I,new qe(I,m)),hc(a)}else Jg(a);else if(L=h.m,L==3||L==0&&h.X>0||!(I==1&&zT(a,h)||I==2&&dh(a)))switch(m&&m.length>0&&(h=a.h,h.i=h.i.concat(m)),L){case 1:Bi(a,5);break;case 4:Bi(a,10);break;case 3:Bi(a,6);break;default:Bi(a,2)}}}function ty(a,h){let m=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(m*=2),m*h}function Bi(a,h){if(a.j.info("Error code "+h),h==2){var m=d(a.bb,a),I=a.Ua;const L=!I;I=new Sn(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Li(I,"https"),Ps(I),L?MT(I.toString(),m):LT(I.toString(),m)}else mt(2);a.I=0,a.l&&a.l.pa(h),ny(a),Xg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function ny(a){if(a.I=0,a.ja=[],a.l){const h=As(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ja,h),P(a.ja,a.i),a.h.i.length=0,E(a.i),a.i.length=0),a.l.oa()}}function ry(a,h,m){var I=m instanceof Sn?an(m):new Sn(m);if(I.g!="")h&&(I.g=h+"."+I.g),Fi(I,I.u);else{var L=o.location;I=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;const U=new Sn(null);I&&Li(U,I),h&&(U.g=h),L&&Fi(U,L),m&&(U.h=m),I=U}return m=a.G,h=a.wa,m&&h&&Ne(I,m,h),Ne(I,"VER",a.ka),da(a,I),I}function iy(a,h,m){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Xe(new lh({ab:m})):new Xe(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sy(){}t=sy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function pc(){}pc.prototype.g=function(a,h){return new Yt(a,h)};function Yt(a,h){Ke.call(this),this.g=new Kg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!w(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ds(this)}v(Yt,Ke),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){uh(this.g)},Yt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.v&&(m={},m.__data__=ir(a),a=m);h.i.push(new Oi(h.Ya++,a)),h.I==3&&hc(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,uh(this.g),delete this.g,Yt.Z.N.call(this)};function oy(a){vn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}v(oy,vn);function ay(){Ar.call(this),this.status=1}v(ay,Ar);function Ds(a){this.g=a}v(Ds,sy),Ds.prototype.ra=function(){j(this.g,"a")},Ds.prototype.qa=function(a){j(this.g,new oy(a))},Ds.prototype.pa=function(a){j(this.g,new ay)},Ds.prototype.oa=function(){j(this.g,"b")},pc.prototype.createWebChannel=pc.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,US=function(){return new pc},VS=function(){return Is()},FS=Bt,up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Di.NO_ERROR=0,Di.TIMEOUT=8,Di.HTTP_ERROR=6,Zc=Di,Nr.COMPLETE="complete",LS=Nr,Ko.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,Da=Ko,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,MS=Xe}).apply(typeof Pc!="undefined"?Pc:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const h0="@firebase/firestore",f0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Um("@firebase/firestore");function Vs(){return fs.logLevel}function ie(t,...e){if(fs.logLevel<=Te.DEBUG){const n=e.map(Qm);fs.debug(`Firestore (${Uo}): ${t}`,...n)}}function Er(t,...e){if(fs.logLevel<=Te.ERROR){const n=e.map(Qm);fs.error(`Firestore (${Uo}): ${t}`,...n)}}function yo(t,...e){if(fs.logLevel<=Te.WARN){const n=e.map(Qm);fs.warn(`Firestore (${Uo}): ${t}`,...n)}}function Qm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,BS(t,r,n)}function BS(t,e,n){let r=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Er(r),new Error(r)}function Ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||BS(e,i,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class jP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $P{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new zS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class WP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new p0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new p0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=GP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function dp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Qh(i)===Qh(s)?Ce(i,s):Qh(i)?1:-1}return Ce(t.length,e.length)}const KP=55296,XP=57343;function Qh(t){const e=t.charCodeAt(0);return e>=KP&&e<=XP}function vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="__name__";class Ln{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ln.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Ce(e.length,n.length)}static compareSegments(e,n){const r=Ln.isNumericId(e),i=Ln.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ln.extractNumericId(e).compare(Ln.extractNumericId(n)):dp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class Le extends Ln{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const QP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Ln{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return QP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m0}static keyField(){return new St([m0])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ne(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new ne(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Le.fromString(e))}static fromName(e){return new ce(Le.fromString(e).popFirst(5))}static empty(){return new ce(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t,e,n){if(!n)throw new ne(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YP(t,e,n,r){if(e===!0&&r===!0)throw new ne(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function g0(t){if(!ce.isDocumentKey(t))throw new ne(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function y0(t){if(ce.isDocumentKey(t))throw new ne(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $S(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Md(t);throw new ne(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t,e){const n={typeString:t};return e&&(n.value=e),n}function jl(t,e){if(!$S(t))throw new ne(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ne(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-62135596800,_0=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_0);return new Fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<v0)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_0}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jl(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-v0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:it("string",Fe._jsonSchemaVersion),seconds:it("number"),nanoseconds:it("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Fe(0,0))}static max(){return new ge(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=-1;function JP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new vi(i,ce.empty(),e)}function ZP(t){return new vi(t.readTime,t.key,El)}class vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vi(ge.min(),ce.empty(),El)}static max(){return new vi(ge.max(),ce.empty(),El)}}function eR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==tR)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function rR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=-1;function Fd(t){return t==null}function Bu(t){return t===0&&1/t==-1/0}function iR(t){return typeof t=="number"&&Number.isInteger(t)&&!Bu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="";function sR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=w0(e)),e=oR(t.get(n),e);return w0(e)}function oR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case WS:n+="";break;default:n+=s}}return n}function w0(t){return t+WS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:_t.RED,this.left=i!=null?i:_t.EMPTY,this.right=s!=null?s:_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _t(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E0(this.data.getIterator())}getIteratorFrom(e){return new E0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class E0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new lt(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new HS("Invalid base64 string: "+s):s}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=aR.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wi(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="server_timestamp",KS="__type__",XS="__previous_value__",QS="__local_write_time__";function Zm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[KS])==null?void 0:r.stringValue)===GS}function Vd(t){const e=t.mapValue.fields[XS];return Zm(e)?Vd(e):e}function Tl(t){const e=_i(t.mapValue.fields[QS].timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,i,s,o,l,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const zu="(default)";class Cl{constructor(e,n){this.projectId=e,this.database=n||zu}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===zu}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="__type__",JS="__max__",Nc={mapValue:{fields:{__type__:{stringValue:JS}}}},ZS="__vector__",ju="value";function Si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zm(t)?4:uR(t)?9007199254740991:cR(t)?10:11:fe(28295,{value:t})}function Qn(t,e){if(t===e)return!0;const n=Si(t);if(n!==Si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tl(t).isEqual(Tl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_i(i.timestampValue),l=_i(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wi(i.bytesValue).isEqual(wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),l=et(s.doubleValue);return o===l?Bu(o)===Bu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return vo(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(S0(o)!==S0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Qn(o[c],l[c])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function Il(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function _o(t,e){if(t===e)return 0;const n=Si(t),r=Si(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=et(s.integerValue||s.doubleValue),c=et(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return T0(t.timestampValue,e.timestampValue);case 4:return T0(Tl(t),Tl(e));case 5:return dp(t.stringValue,e.stringValue);case 6:return function(s,o){const l=wi(s),c=wi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=Ce(l[d],c[d]);if(f!==0)return f}return Ce(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Ce(et(s.latitude),et(o.latitude));return l!==0?l:Ce(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var g,E,P,R;const l=s.fields||{},c=o.fields||{},d=(g=l[ju])==null?void 0:g.arrayValue,f=(E=c[ju])==null?void 0:E.arrayValue,v=Ce(((P=d==null?void 0:d.values)==null?void 0:P.length)||0,((R=f==null?void 0:f.values)==null?void 0:R.length)||0);return v!==0?v:C0(d,f)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nc.mapValue&&o===Nc.mapValue)return 0;if(s===Nc.mapValue)return 1;if(o===Nc.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let v=0;v<c.length&&v<f.length;++v){const g=dp(c[v],f[v]);if(g!==0)return g;const E=_o(l[c[v]],d[f[v]]);if(E!==0)return E}return Ce(c.length,f.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function T0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=_i(t),r=_i(e),i=Ce(n.seconds,r.seconds);return i!==0?i:Ce(n.nanos,r.nanos)}function C0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_o(n[i],r[i]);if(s)return s}return Ce(n.length,r.length)}function wo(t){return hp(t)}function hp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=hp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${hp(n.fields[o])}`;return i+"}"}(t.mapValue):fe(61005,{value:t})}function eu(t){switch(Si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vd(t);return e?16+eu(e):16;case 5:return 2*t.stringValue.length;case 6:return wi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+eu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Pi(r.fields,(s,o)=>{i+=s.length+eu(o)}),i}(t.mapValue);default:throw fe(13486,{value:t})}}function I0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fp(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function b0(t){return!!t&&"nullValue"in t}function x0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tu(t){return!!t&&"mapValue"in t}function cR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YS])==null?void 0:r.stringValue)===ZS}function Ja(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ja(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ja(t.arrayValue.values[n]);return e}return{...t}}function uR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Ja(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ht(Ja(this.value))}}function eE(t){const e=[];return Pi(t.fields,(n,r)=>{const i=new St([n]);if(tu(r)){const s=eE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new kt(e,0,ge.min(),ge.min(),ge.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new kt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new kt(e,2,n,ge.min(),ge.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,ge.min(),ge.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.position=e,this.inclusive=n}}function k0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=_o(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function A0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function dR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{}class rt extends tE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fR(e,n,r):n==="array-contains"?new gR(e,r):n==="in"?new yR(e,r):n==="not-in"?new vR(e,r):n==="array-contains-any"?new _R(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pR(e,r):new mR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_o(n,this.value)):n!==null&&Si(this.value)===Si(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends tE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pn(e,n)}matches(e){return nE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nE(t){return t.op==="and"}function rE(t){return hR(t)&&nE(t)}function hR(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function pp(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+wo(t.value);if(rE(t))return t.filters.map(e=>pp(e)).join(",");{const e=t.filters.map(n=>pp(n)).join(",");return`${t.op}(${e})`}}function iE(t,e){return t instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&Qn(r.value,i.value)}(t,e):t instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&iE(o,i.filters[l]),!0):!1}(t,e):void fe(19439)}function sE(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map(sE).join(" ,")+"}"}(t):"Filter"}class fR extends rt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class pR extends rt{constructor(e,n){super(e,"in",n),this.keys=oE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mR extends rt{constructor(e,n){super(e,"not-in",n),this.keys=oE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class gR extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Il(n.arrayValue,this.value)}}class yR extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Il(this.value.arrayValue,n)}}class vR extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Il(this.value.arrayValue,n)}}class _R extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function P0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new wR(t,e,n,r,i,s,o)}function tg(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wo(r)).join(",")),e.Te=n}return e.Te}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!A0(t.startAt,e.startAt)&&A0(t.endAt,e.endAt)}function mp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SR(t,e,n,r,i,s,o,l){return new $l(t,e,n,r,i,s,o,l)}function Ud(t){return new $l(t)}function R0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aE(t){return t.collectionGroup!==null}function Za(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new lt(St.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Wu(s,r))}),n.has(St.keyField().canonicalString())||e.Ie.push(new Wu(St.keyField(),r))}return e.Ie}function qn(t){const e=ve(t);return e.Ee||(e.Ee=ER(e,Za(t))),e.Ee}function ER(t,e){if(t.limitType==="F")return P0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wu(i.field,s)});const n=t.endAt?new $u(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $u(t.startAt.position,t.startAt.inclusive):null;return P0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gp(t,e){const n=t.filters.concat([e]);return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yp(t,e,n){return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bd(t,e){return ng(qn(t),qn(e))&&t.limitType===e.limitType}function lE(t){return`${tg(qn(t))}|lt:${t.limitType}`}function Us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sE(i)).join(", ")}]`),Fd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wo(i)).join(",")),`Target(${r})`}(qn(t))}; limitType=${t.limitType})`}function zd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Za(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const d=k0(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,Za(r),i)||r.endAt&&!function(o,l,c){const d=k0(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,Za(r),i))}(t,e)}function TR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cE(t){return(e,n)=>{let r=!1;for(const i of Za(t)){const s=CR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function CR(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),d=l.data.field(s);return c!==null&&d!==null?_o(c,d):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return qS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new Ge(ce.comparator);function Tr(){return IR}const uE=new Ge(ce.comparator);function Oa(...t){let e=uE;for(const n of t)e=e.insert(n.key,n);return e}function dE(t){let e=uE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return el()}function hE(){return el()}function el(){return new Ss(t=>t.toString(),(t,e)=>t.isEqual(e))}const bR=new Ge(ce.comparator),xR=new lt(ce.comparator);function Ie(...t){let e=xR;for(const n of t)e=e.add(n);return e}const kR=new lt(Ce);function AR(){return kR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function fE(t){return{integerValue:""+t}}function PR(t,e){return iR(e)?fE(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this._=void 0}}function RR(t,e,n){return t instanceof qu?function(i,s){const o={fields:{[KS]:{stringValue:GS},[QS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zm(s)&&(s=Vd(s)),s&&(o.fields[XS]=s),{mapValue:o}}(n,e):t instanceof bl?mE(t,e):t instanceof xl?gE(t,e):function(i,s){const o=pE(i,s),l=N0(o)+N0(i.Ae);return fp(o)&&fp(i.Ae)?fE(l):rg(i.serializer,l)}(t,e)}function NR(t,e,n){return t instanceof bl?mE(t,e):t instanceof xl?gE(t,e):n}function pE(t,e){return t instanceof Hu?function(r){return fp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class qu extends jd{}class bl extends jd{constructor(e){super(),this.elements=e}}function mE(t,e){const n=yE(e);for(const r of t.elements)n.some(i=>Qn(i,r))||n.push(r);return{arrayValue:{values:n}}}class xl extends jd{constructor(e){super(),this.elements=e}}function gE(t,e){let n=yE(e);for(const r of t.elements)n=n.filter(i=>!Qn(i,r));return{arrayValue:{values:n}}}class Hu extends jd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function N0(t){return et(t.integerValue||t.doubleValue)}function yE(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function DR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof bl&&i instanceof bl||r instanceof xl&&i instanceof xl?vo(r.elements,i.elements,Qn):r instanceof Hu&&i instanceof Hu?Qn(r.Ae,i.Ae):r instanceof qu&&i instanceof qu}(t.transform,e.transform)}class OR{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $d{}function vE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wE(t.key,kn.none()):new Wl(t.key,t.data,kn.none());{const n=t.data,r=Ht.empty();let i=new lt(St.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ri(t.key,r,new Zt(i.toArray()),kn.none())}}function MR(t,e,n){t instanceof Wl?function(i,s,o){const l=i.value.clone(),c=O0(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(i,s,o){if(!nu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=O0(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(_E(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function tl(t,e,n,r){return t instanceof Wl?function(s,o,l,c){if(!nu(s.precondition,o))return l;const d=s.value.clone(),f=M0(s.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ri?function(s,o,l,c){if(!nu(s.precondition,o))return l;const d=M0(s.fieldTransforms,c,o),f=o.data;return f.setAll(_E(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(s,o,l){return nu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function LR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=pE(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function D0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vo(r,i,(s,o)=>DR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wl extends $d{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ri extends $d{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _E(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function O0(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,NR(o,l,n[i]))}return r}function M0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,RR(s,o,e))}return r}class wE extends $d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FR extends $d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&MR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=vE(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&vo(this.mutations,e.mutations,(n,r)=>D0(n,r))&&vo(this.baseMutations,e.baseMutations,(n,r)=>D0(n,r))}}class ig{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return bR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ig(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,be;function zR(t){switch(t){case W.OK:return fe(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function SE(t){if(t===void 0)return Er("GRPC error has no .code"),W.UNKNOWN;switch(t){case nt.OK:return W.OK;case nt.CANCELLED:return W.CANCELLED;case nt.UNKNOWN:return W.UNKNOWN;case nt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case nt.INTERNAL:return W.INTERNAL;case nt.UNAVAILABLE:return W.UNAVAILABLE;case nt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case nt.NOT_FOUND:return W.NOT_FOUND;case nt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case nt.ABORTED:return W.ABORTED;case nt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case nt.DATA_LOSS:return W.DATA_LOSS;default:return fe(39323,{code:t})}}(be=nt||(nt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new ui([4294967295,4294967295],0);function L0(t){const e=jR().encode(t),n=new OS;return n.update(e),new Uint8Array(n.digest())}function F0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ui([n,r],0),new ui([i,s],0)]}class sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ma(`Invalid padding: ${n}`);if(r<0)throw new Ma(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ma(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ma(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ui.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ui.fromNumber(r)));return i.compare($R)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=L0(e),[r,i]=F0(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new sg(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=L0(e),[r,i]=F0(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ma extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wd(ge.min(),i,new Ge(Ce),Tr(),Ie())}}class ql{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ql(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class EE{constructor(e,n){this.targetId=e,this.Ce=n}}class TE{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class V0{constructor(){this.ve=0,this.Fe=U0(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new ql(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=U0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tr(),this.Je=Dc(),this.He=Dc(),this.Ye=new Ge(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(mp(s))if(r===0){const o=new ce(s.path);this.et(n,o,kt.newNoDocument(o,ge.min()))}else Ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}Yh==null||Yh.lt(function(f,v,g,E,P){var _,k,D,O,B,F;const R={localCacheCount:f,existenceFilterCount:v.count,databaseId:g.database,projectId:g.projectId},y=v.unchangedNames;return y&&(R.bloomFilter={applied:P===0,hashCount:(_=y==null?void 0:y.hashCount)!=null?_:0,bitmapLength:(O=(D=(k=y==null?void 0:y.bits)==null?void 0:k.bitmap)==null?void 0:D.length)!=null?O:0,padding:(F=(B=y==null?void 0:y.bits)==null?void 0:B.padding)!=null?F:0,mightContain:b=>{var S;return(S=E==null?void 0:E.mightContain(b))!=null?S:!1}}),R}(o,e.Ce,this.Ge.ht(),l,c))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=wi(r).toUint8Array()}catch(c){if(c instanceof HS)return yo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new sg(o,i,s)}catch(c){return yo(c instanceof Ma?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&mp(l.target)){const c=new ce(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,kt.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=Ie();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Wd(e,n,this.Ye,this.je,r);return this.je=Tr(),this.Je=Dc(),this.He=Dc(),this.Ye=new Ge(Ce),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new V0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new lt(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new lt(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new V0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Dc(){return new Ge(ce.comparator)}function U0(){return new Ge(ce.comparator)}const qR=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),HR=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),GR=(()=>({and:"AND",or:"OR"}))();class KR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vp(t,e){return t.useProto3Json||Fd(e)?e:{value:e}}function Gu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XR(t,e){return Gu(t,e.toTimestamp())}function Hn(t){return Ae(!!t,49232),ge.fromTimestamp(function(n){const r=_i(n);return new Fe(r.seconds,r.nanos)}(t))}function og(t,e){return _p(t,e).canonicalString()}function _p(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function IE(t){const e=Le.fromString(t);return Ae(PE(e),10190,{key:e.toString()}),e}function wp(t,e){return og(t.databaseId,e.path)}function Jh(t,e){const n=IE(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(xE(n))}function bE(t,e){return og(t.databaseId,e)}function QR(t){const e=IE(t);return e.length===4?Le.emptyPath():xE(e)}function Sp(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xE(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function B0(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function YR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:fe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Ae(f===void 0||typeof f=="string",58123),Ct.fromBase64String(f||"")):(Ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ct.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?W.UNKNOWN:SE(d.code);return new ne(f,d.message||"")}(o);n=new TE(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Jh(t,r.document.name),s=Hn(r.document.updateTime),o=r.document.createTime?Hn(r.document.createTime):ge.min(),l=new Ht({mapValue:{fields:r.document.fields}}),c=kt.newFoundDocument(i,s,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ru(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Jh(t,r.document),s=r.readTime?Hn(r.readTime):ge.min(),o=kt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new ru([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Jh(t,r.document),s=r.removedTargetIds||[];n=new ru([],s,i,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new BR(i,s),l=r.targetId;n=new EE(l,o)}}return n}function JR(t,e){let n;if(e instanceof Wl)n={update:B0(t,e.key,e.value)};else if(e instanceof wE)n={delete:wp(t,e.key)};else if(e instanceof Ri)n={update:B0(t,e.key,e.data),updateMask:a2(e.fieldMask)};else{if(!(e instanceof FR))return fe(16599,{Vt:e.type});n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof qu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Hu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:XR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)}(t,e.precondition)),n}function ZR(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Hn(i.updateTime):Hn(s);return o.isEqual(ge.min())&&(o=Hn(s)),new OR(o,i.transformResults||[])}(n,e))):[]}function e2(t,e){return{documents:[bE(t,e.path)]}}function t2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bE(t,i);const s=function(d){if(d.length!==0)return AE(Pn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Bs(g.field),direction:i2(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=vp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function n2(t){let e=QR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(v){const g=kE(v);return g instanceof Pn&&rE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(v){return v.map(g=>function(P){return new Wu(zs(P.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(v){let g;return g=typeof v=="object"?v.value:v,Fd(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(v){const g=!!v.before,E=v.values||[];return new $u(E,g)}(n.startAt));let d=null;return n.endAt&&(d=function(v){const g=!v.before,E=v.values||[];return new $u(E,g)}(n.endAt)),SR(e,i,o,s,l,"F",c,d)}function r2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zs(n.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zs(n.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return rt.create(zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>kE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function i2(t){return qR[t]}function s2(t){return HR[t]}function o2(t){return GR[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function zs(t){return St.fromServerFormat(t.fieldPath)}function AE(t){return t instanceof rt?function(n){if(n.op==="=="){if(x0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(b0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(b0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:s2(n.op),value:n.value}}}(t):t instanceof Pn?function(n){const r=n.getFilters().map(i=>AE(i));return r.length===1?r[0]:{compositeFilter:{op:o2(n.op),filters:r}}}(t):fe(54877,{filter:t})}function a2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,r,i,s=ge.min(),o=ge.min(),l=Ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.yt=e}}function c2(t){const e=n2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.Cn=new d2}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(vi.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class d2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lt(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RE=41943040;class qt{static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(RE,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="LruGarbageCollector",h2=1048576;function $0([t,e],[n,r]){const i=Ce(t,n);return i===0?Ce(e,r):i}class f2{constructor(e){this.Ir=e,this.buffer=new lt($0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class p2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(j0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zo(n)?ie(j0,"Ignoring IndexedDB error during garbage collection: ",n):await Bo(n)}await this.Vr(3e5)})}}class m2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Ld.ce);const r=new f2(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(z0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,n))).next(v=>(s=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),Vs()<=Te.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${v} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}function g2(t,e){return new m2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.changes=new Ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&tl(r.mutation,i,Zt.empty(),Fe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Oa();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Tr();const o=el(),l=function(){return el()}();return n.forEach((c,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Ri)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),tl(f.mutation,d,f.mutation.getFieldMask(),Fe.now())):o.set(d.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var v;return l.set(d,new v2(f,(v=o.get(d))!=null?v:null))}),l))}recalculateAndSaveOverlays(e,n){const r=el();let i=new Ge((o,l)=>o-l),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Zt.empty();f=l.applyToLocalView(d,f),r.set(c,f);const v=(i.get(l.batchId)||Ie()).add(c);i=i.insert(l.batchId,v)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,v=hE();f.forEach(g=>{if(!s.has(g)){const E=vE(n.get(g),r.get(g));E!==null&&v.set(g,E),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,v))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(ts());let l=El,c=s;return o.next(d=>q.forEach(d,(f,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),s.get(f)?q.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Ie())).next(f=>({batchId:l,changes:dE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=Oa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Oa();return this.indexManager.getCollectionParents(e,s).next(l=>q.forEach(l,c=>{const d=function(v,g){return new $l(g,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((v,g)=>{o=o.insert(v,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,kt.newInvalidDocument(f)))});let l=Oa();return o.forEach((c,d)=>{const f=s.get(c);f!==void 0&&tl(f.mutation,d,Zt.empty(),Fe.now()),zd(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hn(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:c2(i.bundledQuery),readTime:Hn(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.overlays=new Ge(ce.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=ts(),s=n.length+1,o=new ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=ts(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ts(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=i)););return q.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UR(n,r));let s=this.qr.get(n);s===void 0&&(s=Ie(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.Qr=new lt(ht.$r),this.Ur=new lt(ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ht(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ht(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new Le([])),r=new ht(n,e),i=new ht(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new Le([])),r=new ht(n,e),i=new ht(n,e+1);let s=Ie();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ht(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new lt(ht.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VR(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new ht(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Jm:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),i=new ht(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(Ce);return n.forEach(i=>{const s=new ht(i,0),o=new ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new ht(new ce(s),0);let l=new lt(Ce);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},o),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,i=>{const s=new ht(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ht(n,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.ri=e,this.docs=function(){return new Ge(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Tr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kt.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Tr();const o=n.path,l=new ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||eR(ZP(f),r)<=0||(i.has(f.key)||zd(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new I2(this)}getSize(e){return q.resolve(this.size)}}class I2 extends y2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.persistence=e,this.si=new Ss(n=>tg(n),ng),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new ag,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new So(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ld(0),this.li=!1,this.li=!0,this.hi=new E2,this.referenceDelegate=e(this),this.Pi=new b2(this),this.indexManager=new u2,this.remoteDocumentCache=function(i){return new C2(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new l2(n),this.Ii=new w2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new S2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new T2(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const i=new x2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class x2 extends nR{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ri=new ag,this.Vi=null}static mi(e){return new lg(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const i=ce.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ku{constructor(e,n){this.persistence=e,this.pi=new Ss(r=>sR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=g2(this,n)}static mi(e,n){return new Ku(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eu(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Ie(),i=Ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ux()?8:rR(Dt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new k2;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Vs()<=Te.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Vs()<=Te.DEBUG&&ie("QueryEngine","Query:",Us(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Vs()<=Te.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):q.resolve())}ys(e,n){if(R0(n))return q.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=yp(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ie(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,yp(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,i){return R0(n)||i.isEqual(ge.min())?q.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?q.resolve(null):(Vs()<=Te.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Us(n)),this.vs(e,o,n,JP(i,El)).next(l=>l))})}Ds(e,n){let r=new lt(cE(e));return n.forEach((i,s)=>{zd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Vs()<=Te.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Us(n)),this.ps.getDocumentsMatchingQuery(e,n,vi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="LocalStore",P2=3e8;class R2{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ge(Ce),this.xs=new Ss(s=>tg(s),ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function N2(t,e,n,r){return new R2(t,e,n,r)}async function DE(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=Ie();for(const d of i){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function D2(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const v=d.batch,g=v.keys();let E=q.resolve();return g.forEach(P=>{E=E.next(()=>f.getEntry(c,P)).next(R=>{const y=d.docVersions.get(P);Ae(y!==null,48541),R.version.compareTo(y)<0&&(v.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,v))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function OE(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function O2(t,e){const n=ve(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((f,v)=>{const g=i.get(v);if(!g)return;l.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,v)));let E=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(Ct.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(v,E),function(R,y,_){return R.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=P2?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,E,f)&&l.push(n.Pi.updateTargetData(s,E))});let c=Tr(),d=Ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(M2(s,o,e.documentUpdates).next(f=>{c=f.ks,d=f.qs})),!r.isEqual(ge.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(v=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return q.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Ms=i,s))}function M2(t,e,n){let r=Ie(),i=Ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Tr();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ie(ug,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function L2(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function F2(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Yr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ep(t,e,n){const r=ve(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zo(o))throw o;ie(ug,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function W0(t,e,n){const r=ve(t);let i=ge.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const v=ve(c),g=v.xs.get(f);return g!==void 0?q.resolve(v.Ms.get(g)):v.Pi.getTargetData(d,f)}(r,o,qn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:Ie())).next(l=>(V2(r,TR(e),l),{documents:l,Qs:s})))}function V2(t,e,n){let r=t.Os.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class q0{constructor(){this.activeTargetIds=AR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U2{constructor(){this.Mo=new q0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new q0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="ConnectivityMonitor";class G0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(H0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(H0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc=null;function Tp(){return Oc===null?Oc=function(){return 268435456+Math.round(2147483648*Math.random())}():Oc++,"0x"+Oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="RestConnection",z2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===zu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Tp(),l=this.zo(e,n.toUriEncodedString());ie(Zh,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:d}=new URL(l),f=Lo(d);return this.Jo(e,l,c,r,f).then(v=>(ie(Zh,`Received RPC '${e}' ${o}: `,v),v),v=>{throw yo(Zh,`RPC '${e}' ${o} failed with error: `,v,"url: ",l,"request:",r),v})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=z2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class W2 extends j2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Tp();return new Promise((l,c)=>{const d=new MS;d.setWithCredentials(!0),d.listenOnce(LS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Zc.NO_ERROR:const v=d.getResponseJson();ie(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case Zc.TIMEOUT:ie(It,`RPC '${e}' ${o} timed out`),c(new ne(W.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const g=d.getStatus();if(ie(It,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const P=E==null?void 0:E.error;if(P&&P.status&&P.message){const R=function(_){const k=_.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(k)>=0?k:W.UNKNOWN}(P.status);c(new ne(R,P.message))}else c(new ne(W.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(W.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ie(It,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);ie(It,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",f,r,15)})}T_(e,n,r){const i=Tp(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=US(),l=VS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=s.join("");ie(It,`Creating RPC '${e}' stream ${i}: ${f}`,c);const v=o.createWebChannel(f,c);this.I_(v);let g=!1,E=!1;const P=new $2({Yo:y=>{E?ie(It,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(g||(ie(It,`Opening RPC '${e}' stream ${i} transport.`),v.open(),g=!0),ie(It,`RPC '${e}' stream ${i} sending:`,y),v.send(y))},Zo:()=>v.close()}),R=(y,_,k)=>{y.listen(_,D=>{try{k(D)}catch(O){setTimeout(()=>{throw O},0)}})};return R(v,Da.EventType.OPEN,()=>{E||(ie(It,`RPC '${e}' stream ${i} transport opened.`),P.o_())}),R(v,Da.EventType.CLOSE,()=>{E||(E=!0,ie(It,`RPC '${e}' stream ${i} transport closed`),P.a_(),this.E_(v))}),R(v,Da.EventType.ERROR,y=>{E||(E=!0,yo(It,`RPC '${e}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),P.a_(new ne(W.UNAVAILABLE,"The operation could not be completed")))}),R(v,Da.EventType.MESSAGE,y=>{var _;if(!E){const k=y.data[0];Ae(!!k,16349);const D=k,O=(D==null?void 0:D.error)||((_=D[0])==null?void 0:_.error);if(O){ie(It,`RPC '${e}' stream ${i} received error:`,O);const B=O.status;let F=function(T){const C=nt[T];if(C!==void 0)return SE(C)}(B),b=O.message;F===void 0&&(F=W.INTERNAL,b="Unknown error status: "+B+" with message "+O.message),E=!0,P.a_(new ne(F,b)),v.close()}else ie(It,`RPC '${e}' stream ${i} received:`,k),P.u_(k)}}),R(l,FS.STAT_EVENT,y=>{y.stat===up.PROXY?ie(It,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===up.NOPROXY&&ie(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ef(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return new KR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="PersistentStream";class LE{constructor(e,n,r,i,s,o,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ME(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ne(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(K0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(K0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q2 extends LE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YR(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Hn(o.readTime):ge.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Sp(this.serializer),n.addTarget=function(s,o){let l;const c=o.target;if(l=mp(c)?{documents:e2(s,c)}:{query:t2(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=CE(s,o.resumeToken);const d=vp(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ge.min())>0){l.readTime=Gu(s,o.snapshotVersion.toTimestamp());const d=vp(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=r2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Sp(this.serializer),n.removeTarget=e,this.q_(n)}}class H2 extends LE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ZR(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{}class K2 extends G2{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,_p(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(W.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,_p(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(W.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class X2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Er(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="RemoteStore";class Q2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Es(this)&&(ie(ps,"Restarting streams for network reachability change."),await async function(c){const d=ve(c);d.Ea.add(4),await Hl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Hd(d)}(this))})}),this.Ra=new X2(r,i)}}async function Hd(t){if(Es(t))for(const e of t.da)await e(!0)}async function Hl(t){for(const e of t.da)await e(!1)}function FE(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pg(n)?fg(n):jo(n).O_()&&hg(n,e))}function dg(t,e){const n=ve(t),r=jo(n);n.Ia.delete(e),r.O_()&&VE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Es(n)&&n.Ra.set("Unknown"))}function hg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jo(t).Y_(e)}function VE(t,e){t.Va.Ue(e),jo(t).Z_(e)}function fg(t){t.Va=new WR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),jo(t).start(),t.Ra.ua()}function pg(t){return Es(t)&&!jo(t).x_()&&t.Ia.size>0}function Es(t){return ve(t).Ea.size===0}function UE(t){t.Va=void 0}async function Y2(t){t.Ra.set("Online")}async function J2(t){t.Ia.forEach((e,n)=>{hg(t,e)})}async function Z2(t,e){UE(t),pg(t)?(t.Ra.ha(e),fg(t)):t.Ra.set("Unknown")}async function eN(t,e,n){if(t.Ra.set("Online"),e instanceof TE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){ie(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xu(t,r)}else if(e instanceof ru?t.Va.Ze(e):e instanceof EE?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const r=await OE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.Ia.get(d);f&&s.Ia.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=s.Ia.get(c);if(!f)return;s.Ia.set(c,f.withResumeToken(Ct.EMPTY_BYTE_STRING,f.snapshotVersion)),VE(s,c);const v=new Yr(f.target,c,d,f.sequenceNumber);hg(s,v)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ie(ps,"Failed to raise snapshot:",r),await Xu(t,r)}}async function Xu(t,e,n){if(!zo(e))throw e;t.Ea.add(1),await Hl(t),t.Ra.set("Offline"),n||(n=()=>OE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(ps,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hd(t)})}function BE(t,e){return e().catch(n=>Xu(t,n,e))}async function Gd(t){const e=ve(t),n=Ei(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jm;for(;tN(e);)try{const i=await L2(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,nN(e,i)}catch(i){await Xu(e,i)}zE(e)&&jE(e)}function tN(t){return Es(t)&&t.Ta.length<10}function nN(t,e){t.Ta.push(e);const n=Ei(t);n.O_()&&n.X_&&n.ea(e.mutations)}function zE(t){return Es(t)&&!Ei(t).x_()&&t.Ta.length>0}function jE(t){Ei(t).start()}async function rN(t){Ei(t).ra()}async function iN(t){const e=Ei(t);for(const n of t.Ta)e.ea(n.mutations)}async function sN(t,e,n){const r=t.Ta.shift(),i=ig.from(r,e,n);await BE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gd(t)}async function oN(t,e){e&&Ei(t).X_&&await async function(r,i){if(function(o){return zR(o)&&o!==W.ABORTED}(i.code)){const s=r.Ta.shift();Ei(r).B_(),await BE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gd(r)}}(t,e),zE(t)&&jE(t)}async function X0(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ie(ps,"RemoteStore received new credentials");const r=Es(n);n.Ea.add(3),await Hl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hd(n)}async function aN(t,e){const n=ve(t);e?(n.Ea.delete(2),await Hd(n)):e||(n.Ea.add(2),await Hl(n),n.Ra.set("Unknown"))}function jo(t){return t.ma||(t.ma=function(n,r,i){const s=ve(n);return s.sa(),new q2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Y2.bind(null,t),t_:J2.bind(null,t),r_:Z2.bind(null,t),H_:eN.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),pg(t)?fg(t):t.Ra.set("Unknown")):(await t.ma.stop(),UE(t))})),t.ma}function Ei(t){return t.fa||(t.fa=function(n,r,i){const s=ve(n);return s.sa(),new H2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:rN.bind(null,t),r_:oN.bind(null,t),ta:iN.bind(null,t),na:sN.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gd(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(ps,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new mg(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(t,e){if(Er("AsyncQueue",`${e}: ${t}`),zo(t))return new ne(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static emptySet(e){return new co(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=Oa(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.ga=new Ge(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eo{constructor(e,n,r,i,s,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Eo(e,n,co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class cN{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ve(n),s=i.queries;i.queries=Y0(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ne(W.ABORTED,"Firestore shutting down"))}}function Y0(){return new Ss(t=>lE(t),Bd)}async function yg(t,e){const n=ve(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new lN,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=gg(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&_g(n)}async function vg(t,e){const n=ve(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uN(t,e){const n=ve(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&_g(n)}function dN(t,e,n){const r=ve(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function _g(t){t.Ca.forEach(e=>{e.next()})}var Cp,J0;(J0=Cp||(Cp={})).Ma="default",J0.Cache="cache";class wg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.key=e}}class WE{constructor(e){this.key=e}}class hN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=cE(e),this.tu=new co(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Q0,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,v)=>{const g=i.get(f),E=zd(this.query,v)?v:null,P=!!g&&this.mutatedKeys.has(g.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let y=!1;g&&E?g.data.isEqual(E.data)?P!==R&&(r.track({type:3,doc:E}),y=!0):this.su(g,E)||(r.track({type:2,doc:E}),y=!0,(c&&this.eu(E,c)>0||d&&this.eu(E,d)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),y=!0):g&&!E&&(r.track({type:1,doc:g}),y=!0,(c||d)&&(l=!0)),y&&(E?(o=o.add(E),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,v)=>function(E,P){const R=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:y})}};return R(E)-R(P)}(f.type,v.type)||this.eu(f.doc,v.doc)),this.ou(r),i=i!=null?i:!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Eo(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Q0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new WE(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new $E(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sg="SyncEngine";class fN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pN{constructor(e){this.key=e,this.hu=!1}}class mN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ss(l=>lE(l),Bd),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(ce.comparator),this.Au=new Map,this.Ru=new ag,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gN(t,e,n=!0){const r=QE(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await qE(r,e,n,!0),i}async function yN(t,e){const n=QE(t);await qE(n,e,!0,!1)}async function qE(t,e,n,r){const i=await F2(t.localStore,qn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await vN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&FE(t.remoteStore,i),l}async function vN(t,e,n,r,i){t.pu=(v,g,E)=>async function(R,y,_,k){let D=y.view.ru(_);D.Cs&&(D=await W0(R.localStore,y.query,!1).then(({documents:b})=>y.view.ru(b,D)));const O=k&&k.targetChanges.get(y.targetId),B=k&&k.targetMismatches.get(y.targetId)!=null,F=y.view.applyChanges(D,R.isPrimaryClient,O,B);return e1(R,y.targetId,F.au),F.snapshot}(t,v,g,E);const s=await W0(t.localStore,e,!0),o=new hN(e,s.Qs),l=o.ru(s.documents),c=ql.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);e1(t,n,d.au);const f=new fN(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function _N(t,e,n){const r=ve(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Bd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ep(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dg(r.remoteStore,i.targetId),Ip(r,i.targetId)}).catch(Bo)):(Ip(r,i.targetId),await Ep(r.localStore,i.targetId,!0))}async function wN(t,e){const n=ve(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dg(n.remoteStore,r.targetId))}async function SN(t,e,n){const r=kN(t);try{const i=await function(o,l){const c=ve(o),d=Fe.now(),f=l.reduce((E,P)=>E.add(P.key),Ie());let v,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let P=Tr(),R=Ie();return c.Ns.getEntries(E,f).next(y=>{P=y,P.forEach((_,k)=>{k.isValidDocument()||(R=R.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,P)).next(y=>{v=y;const _=[];for(const k of l){const D=LR(k,v.get(k.key).overlayedDocument);D!=null&&_.push(new Ri(k.key,D,eE(D.value.mapValue),kn.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,_,l)}).next(y=>{g=y;const _=y.applyToLocalDocumentSet(v,R);return c.documentOverlayCache.saveOverlays(E,y.batchId,_)})}).then(()=>({batchId:g.batchId,changes:dE(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ge(Ce)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await Gl(r,i.changes),await Gd(r.remoteStore)}catch(i){const s=gg(i,"Failed to persist write");n.reject(s)}}async function HE(t,e){const n=ve(t);try{const r=await O2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ae(o.hu,14607):i.removedDocuments.size>0&&(Ae(o.hu,42227),o.hu=!1))}),await Gl(n,r,e)}catch(r){await Bo(r)}}function Z0(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ve(o);c.onlineState=l;let d=!1;c.queries.forEach((f,v)=>{for(const g of v.Sa)g.va(l)&&(d=!0)}),d&&_g(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EN(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ge(ce.comparator);o=o.insert(s,kt.newNoDocument(s,ge.min()));const l=Ie().add(s),c=new Wd(ge.min(),new Map,new Ge(Ce),o,l);await HE(r,c),r.du=r.du.remove(s),r.Au.delete(e),Eg(r)}else await Ep(r.localStore,e,!1).then(()=>Ip(r,e,n)).catch(Bo)}async function TN(t,e){const n=ve(t),r=e.batch.batchId;try{const i=await D2(n.localStore,e);KE(n,r,null),GE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gl(n,i)}catch(i){await Bo(i)}}async function CN(t,e,n){const r=ve(t);try{const i=await function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(v=>(Ae(v!==null,37113),f=v.keys(),c.mutationQueue.removeMutationBatch(d,v))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);KE(r,e,n),GE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gl(r,i)}catch(i){await Bo(i)}}function GE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function KE(t,e,n){const r=ve(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||XE(t,r)})}function XE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(dg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Eg(t))}function e1(t,e,n){for(const r of n)r instanceof $E?(t.Ru.addReference(r.key,e),IN(t,r)):r instanceof WE?(ie(Sg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||XE(t,r.key)):fe(19791,{wu:r})}function IN(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ie(Sg,"New document in limbo: "+n),t.Eu.add(r),Eg(t))}function Eg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(Le.fromString(e)),r=t.fu.next();t.Au.set(r,new pN(n)),t.du=t.du.insert(n,r),FE(t.remoteStore,new Yr(qn(Ud(n.path)),r,"TargetPurposeLimboResolution",Ld.ce))}}async function Gl(t,e,n){const r=ve(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const v=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(d){i.push(d);const v=cg.As(c.targetId,d);s.push(v)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,d){const f=ve(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>q.forEach(d,g=>q.forEach(g.Es,E=>f.persistence.referenceDelegate.addReference(v,g.targetId,E)).next(()=>q.forEach(g.ds,E=>f.persistence.referenceDelegate.removeReference(v,g.targetId,E)))))}catch(v){if(!zo(v))throw v;ie(ug,"Failed to update sequence numbers: "+v)}for(const v of d){const g=v.targetId;if(!v.fromCache){const E=f.Ms.get(g),P=E.snapshotVersion,R=E.withLastLimboFreeSnapshotVersion(P);f.Ms=f.Ms.insert(g,R)}}}(r.localStore,s))}async function bN(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ie(Sg,"User change. New user:",e.toKey());const r=await DE(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new ne(W.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gl(n,r.Ls)}}function xN(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let i=Ie();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function QE(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EN.bind(null,e),e.Pu.H_=uN.bind(null,e.eventManager),e.Pu.yu=dN.bind(null,e.eventManager),e}function kN(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CN.bind(null,e),e}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return N2(this.persistence,new A2,e.initialUser,this.serializer)}Cu(e){return new NE(lg.mi,this.serializer)}Du(e){return new U2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class AN extends Qu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ae(this.persistence.referenceDelegate instanceof Ku,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new NE(r=>Ku.mi(r,n),this.serializer)}}class bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bN.bind(null,this.syncEngine),await aN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cN}()}createDatastore(e){const n=qd(e.databaseInfo.databaseId),r=function(s){return new W2(s)}(e.databaseInfo);return function(s,o,l,c){return new K2(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new Q2(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Z0(this.syncEngine,n,0),function(){return G0.v()?new G0:new B2}())}createSyncEngine(e,n){return function(i,s,o,l,c,d,f){const v=new mN(i,s,o,l,c,d);return f&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ve(i);ie(ps,"RemoteStore shutting down."),s.Ea.add(5),await Hl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="FirestoreClient";class PN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ie(Ti,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ie(Ti,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tf(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Ti,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RN(t);ie(Ti,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>X0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>X0(e.remoteStore,i)),t._onlineComponents=e}async function RN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Ti,"Using user provided OfflineComponentProvider");try{await tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await tf(t,new Qu)}}else ie(Ti,"Using default OfflineComponentProvider"),await tf(t,new AN(void 0));return t._offlineComponents}async function YE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Ti,"Using user provided OnlineComponentProvider"),await t1(t,t._uninitializedComponentsProvider._online)):(ie(Ti,"Using default OnlineComponentProvider"),await t1(t,new bp))),t._onlineComponents}function NN(t){return YE(t).then(e=>e.syncEngine)}async function Yu(t){const e=await YE(t),n=e.eventManager;return n.onListen=gN.bind(null,e.syncEngine),n.onUnlisten=_N.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wN.bind(null,e.syncEngine),n}function DN(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const f=new Tg({next:g=>{f.Nu(),o.enqueueAndForget(()=>vg(s,v));const E=g.docs.has(l);!E&&g.fromCache?d.reject(new ne(W.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&c&&c.source==="server"?d.reject(new ne(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),v=new wg(Ud(l.path),f,{includeMetadataChanges:!0,qa:!0});return yg(s,v)}(await Yu(t),t.asyncQueue,e,n,r)),r.promise}function ON(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const f=new Tg({next:g=>{f.Nu(),o.enqueueAndForget(()=>vg(s,v)),g.fromCache&&c.source==="server"?d.reject(new ne(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),v=new wg(l,f,{includeMetadataChanges:!0,qa:!0});return yg(s,v)}(await Yu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firestore.googleapis.com",r1=!0;class i1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZE,this.ssl=r1}else this.host=e.host,this.ssl=(n=e.ssl)!=null?n:r1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h2)throw new ne(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JE((r=e.experimentalLongPollingOptions)!=null?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zP;switch(r.type){case"firstParty":return new qP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n1.get(n);r&&(ie("ComponentProvider","Removing Datastore"),n1.delete(n),r.terminate())}(this),Promise.resolve()}}function MN(t,e,n,r={}){var d;t=tn(t,Kd);const i=Lo(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(qw(`https://${l}`),Hw("Firestore",!0)),s.host!==ZE&&s.host!==l&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!cs(c,o)&&(t._setSettings(c),r.mockUserToken)){let f,v;if(typeof r.mockUserToken=="string")f=r.mockUserToken,v=xt.MOCK_USER;else{f=tx(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ne(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new xt(g)}t._authCredentials=new jP(new zS(f,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}toJSON(){return{type:Je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(jl(n,Je._jsonSchema))return new Je(e,r||null,new ce(Le.fromString(n.referencePath)))}}Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:it("string",Je._jsonSchemaVersion),referencePath:it("string")};class di extends Ts{constructor(e,n,r){super(e,n,Ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new ce(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function Ni(t,e,...n){if(t=ct(t),jS("collection","path",e),t instanceof Kd){const r=Le.fromString(e,...n);return y0(r),new di(t,null,r)}{if(!(t instanceof Je||t instanceof di))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return y0(r),new di(t.firestore,null,r)}}function Rt(t,e,...n){if(t=ct(t),arguments.length===1&&(e=Ym.newId()),jS("doc","path",e),t instanceof Kd){const r=Le.fromString(e,...n);return g0(r),new Je(t,null,new ce(r))}{if(!(t instanceof Je||t instanceof di))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return g0(r),new Je(t.firestore,t instanceof di?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="AsyncQueue";class o1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ME(this,"async_queue_retry"),this._c=()=>{const r=ef();r&&ie(s1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;ie(s1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Er("INTERNAL UNHANDLED ERROR: ",a1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=mg.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&fe(47125,{Pc:a1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function a1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ci extends Kd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new o1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o1(e),this._firestoreClient=void 0,await e}}}function LN(t,e){const n=typeof t=="object"?t:Qw(),r=typeof t=="string"?t:e||zu,i=zm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Zb("firestore");s&&MN(i,...s)}return i}function Xd(t){if(t._terminated)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FN(t),t._firestoreClient}function FN(t){var r,i,s;const e=t._freezeSettings(),n=function(l,c,d,f){return new lR(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,JE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||((i=e.localCache)==null?void 0:i._offlineComponentProvider)&&((s=e.localCache)==null?void 0:s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new PN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hn(Ct.fromBase64String(e))}catch(n){throw new ne(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jl(e,hn._jsonSchema))return hn.fromBase64String(e.bytes)}}hn._jsonSchemaVersion="firestore/bytes/1.0",hn._jsonSchema={type:it("string",hn._jsonSchemaVersion),bytes:it("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gn._jsonSchemaVersion}}static fromJSON(e){if(jl(e,Gn._jsonSchema))return new Gn(e.latitude,e.longitude)}}Gn._jsonSchemaVersion="firestore/geoPoint/1.0",Gn._jsonSchema={type:it("string",Gn._jsonSchemaVersion),latitude:it("number"),longitude:it("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jl(e,Kn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Kn(e.vectorValues);throw new ne(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kn._jsonSchemaVersion="firestore/vectorValue/1.0",Kn._jsonSchema={type:it("string",Kn._jsonSchemaVersion),vectorValues:it("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=/^__.*__$/;class UN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(e,this.data,n,this.fieldTransforms)}}class eT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Ig{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ju(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tT(this.Ac)&&VN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qd(e)}Cc(e,n,r,i=!1){return new Ig({Ac:e,methodName:n,Dc:r,path:St.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yd(t){const e=t._freezeSettings(),n=qd(t._databaseId);return new BN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nT(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);bg("Data must be an object, but it was:",o,r);const l=rT(r,o);let c,d;if(s.merge)c=new Zt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const v of s.mergeFields){const g=xp(e,v,n);if(!o.contains(g))throw new ne(W.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sT(f,g)||f.push(g)}c=new Zt(f),d=o.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,d=o.fieldTransforms;return new UN(new Ht(l),c,d)}class Jd extends Cg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jd}}function zN(t,e,n,r){const i=t.Cc(1,e,n);bg("Data must be an object, but it was:",i,r);const s=[],o=Ht.empty();Pi(r,(c,d)=>{const f=xg(e,c,n);d=ct(d);const v=i.yc(f);if(d instanceof Jd)s.push(f);else{const g=Kl(d,v);g!=null&&(s.push(f),o.set(f,g))}});const l=new Zt(s);return new eT(o,l,i.fieldTransforms)}function jN(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[xp(e,r,n)],c=[i];if(s.length%2!=0)throw new ne(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(xp(e,s[g])),c.push(s[g+1]);const d=[],f=Ht.empty();for(let g=l.length-1;g>=0;--g)if(!sT(d,l[g])){const E=l[g];let P=c[g];P=ct(P);const R=o.yc(E);if(P instanceof Jd)d.push(E);else{const y=Kl(P,R);y!=null&&(d.push(E),f.set(E,y))}}const v=new Zt(d);return new eT(f,v,o.fieldTransforms)}function $N(t,e,n,r=!1){return Kl(n,t.Cc(r?4:3,e))}function Kl(t,e){if(iT(t=ct(t)))return bg("Unsupported field value:",e,t),rT(t,e);if(t instanceof Cg)return function(r,i){if(!tT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=Kl(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Fe.fromDate(r);return{timestampValue:Gu(i.serializer,s)}}if(r instanceof Fe){const s=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gu(i.serializer,s)}}if(r instanceof Gn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hn)return{bytesValue:CE(i.serializer,r._byteString)};if(r instanceof Je){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:og(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kn)return function(o,l){return{mapValue:{fields:{[YS]:{stringValue:ZS},[ju]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return rg(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Md(r)}`)}(t,e)}function rT(t,e){const n={};return qS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(t,(r,i)=>{const s=Kl(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function iT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof Gn||t instanceof hn||t instanceof Je||t instanceof Cg||t instanceof Kn)}function bg(t,e,n){if(!iT(n)||!$S(n)){const r=Md(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xp(t,e,n){if((e=ct(e))instanceof Qd)return e._internalPath;if(typeof e=="string")return xg(t,e);throw Ju("Field path arguments must be of type string or ",t,!1,void 0,n)}const WN=new RegExp("[~\\*/\\[\\]]");function xg(t,e,n){if(e.search(WN)>=0)throw Ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qd(...e.split("."))._internalPath}catch{throw Ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ju(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ne(W.INVALID_ARGUMENT,l+t+c)}function sT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qN extends oT{data(){return super.data()}}function kg(t,e){return typeof e=="string"?xg(t,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ag{}class HN extends Ag{}function Ii(t,e,...n){let r=[];e instanceof Ag&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof Pg).length,l=s.filter(c=>c instanceof Zd).length;if(o>1||o>0&&l>0)throw new ne(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zd extends HN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zd(e,n,r)}_apply(e){const n=this._parse(e);return lT(e._query,n),new Ts(e.firestore,e.converter,gp(e._query,n))}_parse(e){const n=Yd(e.firestore);return function(s,o,l,c,d,f,v){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ne(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){u1(v,f);const P=[];for(const R of v)P.push(c1(c,s,R));g={arrayValue:{values:P}}}else g=c1(c,s,v)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||u1(v,f),g=$N(l,o,v,f==="in"||f==="not-in");return rt.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gt(t,e,n){const r=e,i=kg("where",t);return Zd._create(i,r,n)}class Pg extends Ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const c of l)lT(o,c),o=gp(o,c)}(e._query,n),new Ts(e.firestore,e.converter,gp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function c1(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new ne(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aE(e)&&n.indexOf("/")!==-1)throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!ce.isDocumentKey(r))throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return I0(t,new ce(r))}if(n instanceof Je)return I0(t,n._key);throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(n)}.`)}function u1(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GN{convertValue(e,n="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ju].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>et(o.doubleValue));return new Kn(n)}convertGeoPoint(e){return new Gn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const n=_i(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);Ae(PE(r),9688,{name:e});const i=new Cl(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||Er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class La{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rs extends oT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=rs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",rs._jsonSchema={type:it("string",rs._jsonSchemaVersion),bundleSource:it("string","DocumentSnapshot"),bundleName:it("string"),bundle:it("string")};class iu extends rs{data(e={}){return super.data(e)}}class is{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new La(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new iu(this._firestore,this._userDataWriter,r.key,r,new La(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new iu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new La(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new iu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new La(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:KN(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){t=tn(t,Je);const e=tn(t.firestore,Ci);return DN(Xd(e),t._key).then(n=>hT(e,t,n))}is._jsonSchemaVersion="firestore/querySnapshot/1.0",is._jsonSchema={type:it("string",is._jsonSchemaVersion),bundleSource:it("string","QuerySnapshot"),bundleName:it("string"),bundle:it("string")};class Rg extends GN{constructor(e){super(),this.firestore=e}convertBytes(e){return new hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function eh(t){t=tn(t,Ts);const e=tn(t.firestore,Ci),n=Xd(e),r=new Rg(e);return aT(t._query),ON(n,t._query).then(i=>new is(e,r,t,i))}function uT(t,e,n){t=tn(t,Je);const r=tn(t.firestore,Ci),i=cT(t.converter,e,n);return Ng(r,[nT(Yd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,kn.none())])}function hi(t,e,n,...r){t=tn(t,Je);const i=tn(t.firestore,Ci),s=Yd(i);let o;return o=typeof(e=ct(e))=="string"||e instanceof Qd?jN(s,"updateDoc",t._key,e,n,r):zN(s,"updateDoc",t._key,e),Ng(i,[o.toMutation(t._key,kn.exists(!0))])}function dT(t,e){const n=tn(t.firestore,Ci),r=Rt(t),i=cT(t.converter,e);return Ng(n,[nT(Yd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}function kl(t,...e){var c,d,f;t=ct(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||l1(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(l1(e[r])){const v=e[r];e[r]=(c=v.next)==null?void 0:c.bind(v),e[r+1]=(d=v.error)==null?void 0:d.bind(v),e[r+2]=(f=v.complete)==null?void 0:f.bind(v)}let s,o,l;if(t instanceof Je)o=tn(t.firestore,Ci),l=Ud(t._key.path),s={next:v=>{e[r]&&e[r](hT(o,t,v))},error:e[r+1],complete:e[r+2]};else{const v=tn(t,Ts);o=tn(v.firestore,Ci),l=v._query;const g=new Rg(o);s={next:E=>{e[r]&&e[r](new is(o,g,v,E))},error:e[r+1],complete:e[r+2]},aT(t._query)}return function(g,E,P,R){const y=new Tg(R),_=new wg(E,y,P);return g.asyncQueue.enqueueAndForget(async()=>yg(await Yu(g),_)),()=>{y.Nu(),g.asyncQueue.enqueueAndForget(async()=>vg(await Yu(g),_))}}(Xd(o),l,i,s)}function Ng(t,e){return function(r,i){const s=new gr;return r.asyncQueue.enqueueAndForget(async()=>SN(await NN(r),i,s)),s.promise}(Xd(t),e)}function hT(t,e,n){const r=n.docs.get(e._key),i=new Rg(t);return new rs(t,i,e._key,r,new La(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Uo=i})(Fo),go(new us("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ci(new $P(r.getProvider("auth-internal")),new HP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(d.options.projectId,f)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ci(h0,f0,e),ci(h0,f0,"esm2020")})();const d1=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},nf=t=>{const e=localStorage.getItem(t);return e?JSON.parse(e):null};var XN="firebase",QN="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(XN,QN,"app");const YN={apiKey:"AIzaSyBdAla3vH9KyPZLufH8bnIrA7W4qEs4ZBA",authDomain:"adhd-calendar-app.firebaseapp.com",projectId:"adhd-calendar-app",storageBucket:"adhd-calendar-app.firebasestorage.app",messagingSenderId:"226358576594",appId:"1:226358576594:web:47c154fd3bd270d6c3340b"},fT=Xw(YN),To=Jn(fT),He=LN(fT),th=async t=>{var e;try{const r=Jn().currentUser;if(!r){console.warn("[gameProgress] No user logged in, not saving to Firestore");return}const i=Rt(He,"users",r.uid),s=await $o(i),o=s.exists()?((e=s.data())==null?void 0:e.gameProgress)||{}:{},l={...o,...t,lastUpdated:new Date().toISOString()};console.log("[gameProgress] Merging:",{existing:o,new:t,merged:l,newTasks:t==null?void 0:t.tasks,mergedTasks:l.tasks,newPets:t==null?void 0:t.pets,mergedPets:l.pets,newCurrentPetId:t==null?void 0:t.currentPetId,mergedCurrentPetId:l.currentPetId}),await uT(i,{gameProgress:l},{merge:!0}),console.log("[gameProgress] \u2705 Saved to Firestore:",l)}catch(n){console.error("[gameProgress] \u274C Error saving to Firestore:",n)}},JN=async()=>{var t;try{const n=Jn().currentUser;if(!n)return console.warn("[gameProgress] No user logged in, not loading from Firestore"),null;const r=Rt(He,"users",n.uid),i=await $o(r);if(!i.exists())return console.warn("[gameProgress] User document not found"),null;const s=i.data();console.log("[gameProgress] Full user doc data:",s);const o=s==null?void 0:s.gameProgress;return console.log("[gameProgress] gameProgress field:",o),console.log("[gameProgress] gameProgress.xp =",o==null?void 0:o.xp),console.log("[gameProgress] gameProgress.tasks =",o==null?void 0:o.tasks,"| type:",typeof(o==null?void 0:o.tasks)),console.log("[gameProgress] gameProgress.pets =",o==null?void 0:o.pets,"| length:",(t=o==null?void 0:o.pets)==null?void 0:t.length),console.log("[gameProgress] gameProgress.currentPetId =",o==null?void 0:o.currentPetId),o?(console.log("[gameProgress] \u2705 Loaded from Firestore:",o),o):(console.warn("[gameProgress] No gameProgress field found in user document"),null)}catch(e){return console.error("[gameProgress] \u274C Error loading from Firestore:",e),null}},ZN=async t=>{console.log("[syncXpToFirestore] Syncing XP:",t,"to Firestore...");try{await th({xp:t}),console.log("[syncXpToFirestore] \u2705 XP sync complete")}catch(e){throw console.error("[syncXpToFirestore] \u274C XP sync failed:",e),e}},pT=async(t,e)=>{await th({unlockedTitles:t,selectedTitle:e})},eD=async t=>{console.log("[syncTasksToFirestore] \u{1F4E4} Syncing tasks to Firestore...",{taskCount:t==null?void 0:t.length,taskIds:t==null?void 0:t.map(e=>e.id)});try{await th({tasks:t}),console.log("[syncTasksToFirestore] \u2705 Tasks sync complete")}catch(e){throw console.error("[syncTasksToFirestore] \u274C Tasks sync failed:",e),e}},nh=async(t,e)=>{console.log("[syncPetsToFirestore] \u{1F4E4} Syncing pets to Firestore...",{petsCount:t==null?void 0:t.length,currentPetId:e,petIds:t==null?void 0:t.map(n=>n.id)});try{const n=await th({pets:t,currentPetId:e});return console.log("[syncPetsToFirestore] \u2705 Pets sync complete"),n}catch(n){throw console.error("[syncPetsToFirestore] \u274C Pets sync failed:",n),n}},rf="adhd_tasks",h1="adhd_events",Wo=()=>{const[t,e]=M.exports.useState(()=>nf(h1)||{}),[n,r]=M.exports.useState(()=>nf(rf)||[]),[i,s]=M.exports.useState(!1),o=M.exports.useRef(!0);return M.exports.useEffect(()=>{const g=()=>{console.log("[useCalendar] Tasks restored event received, reloading from localStorage"),o.current=!0;const P=nf(rf)||[];console.log("[useCalendar] Reloaded",P.length,"tasks from localStorage"),r(P),setTimeout(()=>{o.current=!1,console.log("[useCalendar] Restoration complete, syncing re-enabled")},500)},E=()=>{console.log("[useCalendar] Tasks cleared event received, clearing tasks"),r([])};return window.addEventListener("tasks:restored",g),window.addEventListener("tasks:cleared",E),()=>{window.removeEventListener("tasks:restored",g),window.removeEventListener("tasks:cleared",E)}},[]),M.exports.useEffect(()=>{try{console.log("[useCalendar] Tasks changed, saving to localStorage:",n.length,"tasks",n),d1(rf,n),Jn().currentUser&&!o.current?(console.log("[useCalendar] Syncing",n.length,"tasks to Firestore..."),eD(n).catch(E=>console.warn("[useCalendar] Failed to sync tasks:",E))):o.current?console.log("[useCalendar] Skipping sync - still in restoration period"):console.log("[useCalendar] Not syncing - user not logged in")}catch{}},[n]),M.exports.useEffect(()=>{try{d1(h1,t)}catch{}},[t]),{events:t,tasks:n,loading:i,addEvent:(g,E)=>{const P=g.toDateString();e(R=>{const y={...R};return y[P]=[...y[P]||[],E],y})},removeEvent:(g,E)=>{const P=g.toDateString();e(R=>{const y={...R};return y[P]?(y[P]=y[P].filter((_,k)=>k!==E),y):R})},addTask:g=>{console.log("[useCalendar.addTask] Adding task:",g);const E={...g,createdAt:Date.now()};r(P=>(console.log("[useCalendar.addTask] Updating tasks state from",P.length,"to",P.length+1),[...P,E]))},removeTask:g=>{r(E=>E.filter(P=>P.id!==g))},updateTask:g=>{r(E=>E.map(P=>P.id===g.id?{...P,...g}:P))}}};var rh={exports:{}},Xl={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tD=M.exports,mT=60103;Xl.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var f1=Symbol.for;mT=f1("react.element"),Xl.Fragment=f1("react.fragment")}var nD=tD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rD=Object.prototype.hasOwnProperty,iD={key:!0,ref:!0,__self:!0,__source:!0};function gT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rD.call(e,r)&&!iD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:mT,type:t,key:s,ref:o,props:i,_owner:nD.current}}Xl.jsx=gT;Xl.jsxs=gT;rh.exports=Xl;const u=rh.exports.jsx,p=rh.exports.jsxs,Vt=rh.exports.Fragment,Dg=({task:t,timeUntilXp:e=0,xpAmount:n=20,onComplete:r=()=>{},onUpdate:i=()=>{},onRemove:s=()=>{}})=>{const[o,l]=M.exports.useState(!1),[c,d]=M.exports.useState(t.title||""),[f,v]=M.exports.useState(t.description||""),[g,E]=M.exports.useState(t.dueDate||""),[P,R]=M.exports.useState(e),y=()=>{i({...t,title:c,description:f,dueDate:g}),l(!1)},[_,k]=M.exports.useState(!1),[D,O]=M.exports.useState(!1),[B,F]=M.exports.useState(()=>g?new Date(g).getHours():9),[b,S]=M.exports.useState(()=>g?new Date(g).getMinutes():0);M.exports.useEffect(()=>{if(P<=0)return;const x=setInterval(()=>{R(N=>Math.max(0,N-1e3))},1e3);return()=>clearInterval(x)},[P]);const T=()=>{const x=g?new Date(g):new Date,N=new Date(x.getFullYear(),x.getMonth(),x.getDate(),B,b);E(N.toISOString())},C=({onPick:x,initial:N})=>{const w=N||new Date,[G,J]=M.exports.useState(new Date(w.getFullYear(),w.getMonth(),1)),se=G.getFullYear(),me=G.getMonth(),ye=M.exports.useMemo(()=>{const K=[],H=new Date(se,me,1);let z=new Date(H);for(z.setDate(z.getDate()-z.getDay());K.length<6;){const V=[];for(let $=0;$<7;$++)V.push(new Date(z)),z.setDate(z.getDate()+1);K.push(V)}return K},[se,me]);return p("div",{className:"panel day-popup",style:{width:280},children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u("button",{className:"btn ghost",onClick:()=>J(K=>new Date(K.getFullYear(),K.getMonth()-1,1)),children:"\u25C0"}),u("div",{children:G.toLocaleString(void 0,{month:"long",year:"numeric"})}),u("button",{className:"btn ghost",onClick:()=>J(K=>new Date(K.getFullYear(),K.getMonth()+1,1)),children:"\u25B6"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6},children:["S","M","T","W","T","F","S"].map(K=>u("div",{style:{textAlign:"center",fontSize:12,color:"var(--muted)"},children:K},K))}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6,marginTop:6},children:ye.flat().map((K,H)=>u("button",{className:"btn ghost",style:{padding:8,minWidth:0,opacity:K.getMonth()===me?1:.35},onClick:()=>x(new Date(K.getFullYear(),K.getMonth(),K.getDate())),children:K.getDate()},H))})]})};return u("div",{className:"task-card",children:o?p("div",{className:"task-edit",children:[p("div",{style:{display:"flex",flexDirection:"column",gap:8,width:"100%"},children:[u("input",{className:"input",value:c,onChange:x=>d(x.target.value)}),u("input",{className:"input",value:f,onChange:x=>v(x.target.value)}),p("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("button",{type:"button",className:"btn ghost",onClick:()=>k(x=>!x),children:g?new Date(g).toLocaleDateString():"Set due date"}),u("button",{type:"button",className:"btn ghost",onClick:()=>O(x=>!x),style:{marginLeft:6},children:g?new Date(g).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Set time"}),u("div",{style:{flex:1}})]}),_&&u("div",{style:{marginTop:8},children:u(C,{onPick:x=>{E(new Date(x.getFullYear(),x.getMonth(),x.getDate()).toISOString()),k(!1)},initial:g?new Date(g):void 0})}),D&&u("div",{style:{marginTop:8},children:u("div",{className:"panel day-popup",style:{padding:12},children:p("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("select",{value:B,onChange:x=>F(Number(x.target.value)),children:Array.from({length:24}).map((x,N)=>u("option",{value:N,children:String(N).padStart(2,"0")},N))}),":",u("select",{value:b,onChange:x=>S(Number(x.target.value)),children:Array.from({length:12}).map((x,N)=>u("option",{value:N*5,children:String(N*5).padStart(2,"0")},N))}),u("div",{style:{flex:1}}),u("button",{className:"btn",onClick:()=>{T(),O(!1)},children:"Apply"})]})})})]}),p("div",{className:"task-actions",style:{marginTop:12},children:[u("button",{className:"btn",onClick:y,children:"Save"}),u("button",{className:"btn ghost",onClick:()=>l(!1),children:"Cancel"})]})]}):p(Vt,{children:[p("div",{className:"task-content",children:[u("h3",{style:{margin:0},children:t.title}),t.description&&u("div",{className:"subtle",style:{marginTop:6},children:t.description}),t.dueDate&&p("div",{className:"subtle",style:{marginTop:6},children:["Due: ",t.dueDate.includes("T")?new Date(t.dueDate).toLocaleString():new Date(t.dueDate+"T00:00:00").toLocaleString()]}),P>0&&p("div",{className:"subtle",style:{marginTop:6,color:"var(--accent)"},children:["+",n," XP in ",Math.ceil(P/1e3),"s"]})]}),p("div",{className:"task-actions",children:[u("button",{className:"btn ghost",onClick:()=>l(!0),children:"Edit"}),u("button",{className:"btn ghost",onClick:r,disabled:P>0,children:"Done"}),u("button",{className:"btn ghost",onClick:s,children:"Delete"})]})]})})},yT=({date:t,events:e=[],onClick:n=()=>{}})=>p("div",{className:"day-cell clickable",onClick:s=>{n(t,s)},role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),n(t,s))},style:e.length>0?{background:"linear-gradient(135deg, var(--primary)15 0%, var(--accent)15 100%)"}:{},children:[u("div",{className:"date",children:t.getDate()}),u("div",{className:"events",children:e.map((s,o)=>u("div",{className:"event",children:s},o))})]}),vT=8,_T=2,Ql="adhd_critical_test_mode",Yl="adhd_crate_test_mode",sD=()=>{const t=localStorage.getItem(Ql)==="true",e=localStorage.getItem(Yl)==="true",n=t?100:vT,r=e?100:_T,i=Math.random()*100;let s=1,o=!1;return i<n&&(s=2),Math.random()*100<r&&(o=!0),{isCritical:s===2,xpMultiplier:s,crateReward:o}},Fn=()=>{const t=localStorage.getItem(Ql)==="true",e=localStorage.getItem(Yl)==="true";return{criticalHitChance:t?100:vT,crateRewardChance:e?100:_T}},wT=()=>{localStorage.setItem(Ql,"true")},ST=()=>{localStorage.removeItem(Ql)},ET=()=>localStorage.getItem(Ql)==="true",TT=()=>{localStorage.setItem(Yl,"true")},CT=()=>{localStorage.removeItem(Yl)},IT=()=>localStorage.getItem(Yl)==="true",kp="adhd_xp";function Al(t){if(t<=1)return 0;let e=0;for(let n=1;n<t;n++)e+=100+n*75;return e}function Co(t){let e=1;for(;Al(e+1)<=t;)e++;return e}function oD(t){const e=Co(t),n=Al(e+1);return Math.max(0,n-t)}function aD(t){const e=Co(t),n=Al(e);return t-n}function lD(t){const e=Co(t),n=Al(e+1),r=Al(e);return n-r}function Oe(){try{const t=localStorage.getItem(kp);return t?Number(t):0}catch{return 0}}function xn(t,e=!0){try{const n=String(t);localStorage.setItem(kp,n);const r=localStorage.getItem(kp);console.log("[XP] Setting XP to:",t,"| Verified in localStorage:",r),e?(console.log("[XP] \u2B06\uFE0F Syncing XP",t,"to Firestore..."),ZN(t).catch(i=>console.warn("[XP] \u274C Failed to sync:",i))):console.log("[XP] \u23ED\uFE0F Skipping sync (logout in progress)")}catch(n){console.error("[XP] \u274C Error in setXp:",n)}window.dispatchEvent(new CustomEvent("xp:update",{detail:{xp:t}}))}function yr(t=10){const e=sD(),n=t*e.xpMultiplier,i=Oe()+n;return xn(i),window.dispatchEvent(new CustomEvent("xp:granted",{detail:{amount:n,baseAmount:t,isCritical:e.isCritical,crateReward:e.crateReward}})),i}function nl(t=!0){xn(0,t);try{window.dispatchEvent(new CustomEvent("xp:reset",{detail:{xp:0}}))}catch{}}const bT=({view:t="month"})=>{var x,N;const[e,n]=M.exports.useState(()=>new Date),[r,i]=M.exports.useState(null),[s,o]=M.exports.useState(null),{events:l,addEvent:c,removeEvent:d}=Wo(),f=M.exports.useRef(null),v=e.getFullYear(),g=e.getMonth(),E=e.toLocaleString(void 0,{month:"long",year:"numeric"}),P=M.exports.useMemo(()=>{const w=new Date(v,g+1,0).getDate(),J=Math.ceil(w/7)*7,se=new Array(J).fill(null);for(let me=0;me<w;me++)se[me]=new Date(v,g,me+1);return se},[v,g]),R=(w,G)=>{G.stopPropagation();const se=G.currentTarget.getBoundingClientRect(),me=se.left+se.width/2,ye=se.bottom;i(w),o({x:me,y:ye})};M.exports.useEffect(()=>{const w=G=>{!f.current||G.target instanceof Node&&(f.current.contains(G.target)||(i(null),o(null)))};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[]);const y=(w,G)=>{c(w,G)},_=()=>n(w=>new Date(w.getFullYear(),w.getMonth()-1,1)),k=()=>n(w=>new Date(w.getFullYear(),w.getMonth()+1,1)),D=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()-1)),O=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()+1)),B=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()-7)),F=()=>n(w=>new Date(w.getFullYear(),w.getMonth(),w.getDate()+7)),S=t==="week"?(w=>{const G=new Date(w),J=G.getDay(),se=G.getDate()-J,me=new Date(G.setDate(se)),ye=[];for(let K=0;K<7;K++)ye.push(new Date(me)),me.setDate(me.getDate()+1);return ye})(e):[],T=t==="week"?`${(x=S[0])==null?void 0:x.toLocaleDateString()} - ${(N=S[6])==null?void 0:N.toLocaleDateString()}`:"",C=t==="day"?e.toDateString():t==="week"?T:E;return p("div",{className:"calendar",style:{position:"relative"},children:[p("header",{className:"calendar-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,paddingBottom:12},children:[u("button",{className:"btn ghost",onClick:t==="day"?D:t==="week"?B:_,"aria-label":"Previous",style:{color:"var(--text)"},children:"\u25C0"}),u("h1",{style:{flex:1,textAlign:"center",margin:0},children:C}),u("button",{className:"btn ghost",onClick:t==="day"?O:t==="week"?F:k,"aria-label":"Next",style:{color:"var(--text)"},children:"\u25B6"})]}),t==="day"&&u("div",{style:{display:"flex",flexDirection:"column",gap:12},children:p("div",{style:{padding:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Events"}),e>new Date&&u("div",{style:{marginBottom:12,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only complete events for today or past days"}),e<new Date&&u("div",{style:{marginBottom:12,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only create events for today or future days"}),u("div",{style:{marginBottom:12},children:(l[e.toDateString()]||[]).map((w,G)=>{const J=e<=new Date;return p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u("span",{children:w}),p("div",{style:{display:"flex",gap:6},children:[u("button",{className:"btn ghost",onClick:()=>{J&&(d(e,G),yr(15))},disabled:!J,style:{opacity:J?1:.5,cursor:J?"pointer":"not-allowed"},children:"Done"}),u("button",{className:"btn ghost",onClick:()=>{d(e,G)},style:{cursor:"pointer",color:"#f43f5e"},children:"\u2715"})]})]},G)})}),u("form",{onSubmit:w=>{w.preventDefault();const G=w.target.elements.title.value;G.trim()&&e>=new Date&&(c(e,G.trim()),w.target.elements.title.value="")},children:p("div",{style:{display:"flex",gap:8},children:[u("input",{className:"input",name:"title",placeholder:"Add event...",disabled:e<new Date}),u("button",{className:"btn",type:"submit",disabled:e<new Date,children:"Add"})]})})]})}),t==="week"&&u("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:12},children:S.map(w=>{const G=w<=new Date;return p("div",{style:{borderLeft:"4px solid #6366f1",paddingLeft:12},children:[u("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:u("h4",{style:{margin:0},children:w.toDateString()})}),w>new Date&&u("div",{style:{marginBottom:8,padding:"6px 10px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.8rem",color:"#f43f5e"},children:"Complete events for today or past days only"}),w<new Date&&u("div",{style:{marginBottom:8,padding:"6px 10px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.8rem",color:"#f43f5e"},children:"Cannot create events for past days"}),u("div",{style:{marginBottom:8},children:(l[w.toDateString()]||[]).map((J,se)=>p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6,paddingBottom:6,borderBottom:"1px solid #374151"},children:[u("span",{children:J}),p("div",{style:{display:"flex",gap:4},children:[u("button",{className:"btn ghost",onClick:()=>{G&&(d(w,se),yr(15))},disabled:!G,style:{opacity:G?1:.5,cursor:G?"pointer":"not-allowed",fontSize:"0.8rem"},children:"Done"}),u("button",{className:"btn ghost",onClick:()=>{d(w,se)},style:{cursor:"pointer",color:"#f43f5e",fontSize:"0.8rem"},children:"\u2715"})]})]},se))}),u("form",{onSubmit:J=>{var me;J.preventDefault();const se=(me=J.target.elements[`title-${w.toDateString()}`])==null?void 0:me.value;(se==null?void 0:se.trim())&&w>=new Date&&(c(w,se.trim()),J.target.elements[`title-${w.toDateString()}`].value="")},children:p("div",{style:{display:"flex",gap:6},children:[u("input",{className:"input",name:`title-${w.toDateString()}`,placeholder:"Add event...",style:{fontSize:"0.875rem"},disabled:w<new Date}),u("button",{className:"btn",type:"submit",style:{padding:"4px 8px"},disabled:w<new Date,children:"+"})]})})]},w.toDateString())})}),t!=="day"&&t!=="week"&&p(Vt,{children:[u("div",{className:"calendar-body",children:P.map((w,G)=>w?u(yT,{date:w,events:l[w.toDateString()]||[],onClick:R},G):u("div",{className:"day-cell empty"},G))}),r&&s&&(()=>{const J=(ye,K,H)=>Math.max(K,Math.min(H,ye)),se=J(s.x-160,12,window.innerWidth-320-12),me=J(s.y+8,12,window.innerHeight-220-12);return p("div",{ref:f,className:"panel day-popup",style:{position:"fixed",left:se,top:me,width:320,zIndex:300},children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p("div",{children:[u("strong",{children:r.toDateString()}),u("div",{className:"subtle",children:"Quick actions for this day"})]}),u("button",{className:"btn ghost",onClick:()=>{i(null),o(null)},children:"Close"})]}),u("div",{style:{marginTop:12},children:u(cD,{date:r,onAdd:ye=>{y(r,ye)}})}),p("div",{style:{marginTop:12},children:[u("h4",{style:{margin:0},children:"Events"}),u("div",{className:"subtle",style:{marginTop:6},children:(l[r.toDateString()]||[]).length===0?"No events":""}),r>new Date&&u("div",{style:{marginTop:8,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only complete events for today or past days"}),r<new Date&&u("div",{style:{marginTop:8,padding:"8px 12px",backgroundColor:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",borderRadius:"4px",fontSize:"0.875rem",color:"#f43f5e"},children:"You can only create events for today or future days"}),u("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:6},children:(l[r.toDateString()]||[]).map((ye,K)=>{const H=r<=new Date;return p("div",{className:"event",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u("span",{style:{flex:1,textAlign:"center"},children:ye}),p("div",{style:{display:"flex",gap:4},children:[u("button",{className:"btn ghost",onClick:()=>{H&&(d(r,K),yr(15))},disabled:!H,style:{opacity:H?1:.5,cursor:H?"pointer":"not-allowed",color:"black",fontWeight:"bold",backgroundColor:"transparent",border:"2px solid black",padding:"3px 8px",borderRadius:"4px",fontSize:"12px"},children:"Done"}),u("button",{className:"btn ghost",onClick:()=>{d(r,K)},style:{cursor:"pointer",color:"black",fontWeight:"bold",backgroundColor:"transparent",border:"2px solid black",padding:"3px 8px",borderRadius:"4px",fontSize:"12px"},children:"\u2715"})]})]},K)})})]})]})})()]})]})},cD=({date:t,onAdd:e})=>{const[n,r]=M.exports.useState(""),i=t>=new Date;return u("form",{onSubmit:s=>{s.preventDefault(),n.trim()&&i&&(e(n.trim()),r(""))},children:p("div",{style:{display:"flex",gap:8},children:[u("input",{className:"input",placeholder:"Event title",value:n,onChange:s=>r(s.target.value),disabled:!i}),u("button",{className:"btn",type:"submit",disabled:!i,children:"Add"})]})})},$e=({onClick:t=()=>{},children:e,className:n="",variant:r="default"})=>{const i=`btn ${r==="ghost"?"ghost":""} ${n}`.trim();return u("button",{onClick:t,className:i,children:e})},uD=({onAdd:t})=>{const[e,n]=M.exports.useState(""),[r,i]=M.exports.useState(""),[s,o]=M.exports.useState(!1),l=D=>{D.preventDefault(),e.trim()&&(t(e,r||void 0),n(""),i(""),o(!1))},c=({onPick:D,initial:O})=>{const B=O||new Date,[F,b]=M.exports.useState(new Date(B.getFullYear(),B.getMonth(),1)),S=F.getFullYear(),T=F.getMonth(),C=M.exports.useMemo(()=>{const w=[],G=new Date(S,T,1);let J=new Date(G);for(J.setDate(J.getDate()-J.getDay());w.length<6;){const se=[];for(let me=0;me<7;me++)se.push(new Date(J)),J.setDate(J.getDate()+1);w.push(se)}return w},[S,T]),x=()=>b(w=>new Date(w.getFullYear(),w.getMonth()-1,1)),N=()=>b(w=>new Date(w.getFullYear(),w.getMonth()+1,1));return p("div",{style:{width:280},className:"panel day-popup",children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[u("button",{className:"btn ghost",onClick:x,children:"\u25C0"}),u("div",{children:F.toLocaleString(void 0,{month:"long",year:"numeric"})}),u("button",{className:"btn ghost",onClick:N,children:"\u25B6"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6},children:["S","M","T","W","T","F","S"].map(w=>u("div",{style:{textAlign:"center",fontSize:12,color:"var(--muted)"},children:w},w))}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(7,1fr)",gap:6,marginTop:6},children:C.flat().map((w,G)=>{const J=w.getMonth()===T;return u("button",{onClick:()=>D(new Date(w.getFullYear(),w.getMonth(),w.getDate())),className:"btn ghost",style:{padding:8,opacity:J?1:.35,minWidth:0},children:w.getDate()},G)})})]})},d=D=>{i(new Date(D.getFullYear(),D.getMonth(),D.getDate()).toISOString()),o(!1)},f=r?new Date(r).toLocaleDateString():"",[v,g]=M.exports.useState(!1),[E,P]=M.exports.useState(()=>r?new Date(r).getHours():9),[R,y]=M.exports.useState(()=>r?new Date(r).getMinutes():0),_=r?new Date(r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",k=()=>{const D=r?new Date(r):new Date,O=new Date(D.getFullYear(),D.getMonth(),D.getDate(),E,R);i(O.toISOString()),g(!1)};return p("form",{onSubmit:l,style:{display:"flex",flexDirection:"column",gap:8,position:"relative"},children:[u("input",{type:"text",value:e,onChange:D=>n(D.target.value),placeholder:"Add a new task...",className:"input"}),p("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("button",{type:"button",className:"btn ghost",onClick:()=>o(D=>!D),children:f||"Set due date"}),u("div",{style:{flex:1}})]}),s&&u("div",{style:{position:"absolute",left:0,top:"100%",marginTop:8,zIndex:400},children:u(c,{onPick:d,initial:r?new Date(r):void 0})}),p("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("button",{type:"button",className:"btn ghost",onClick:()=>g(D=>!D),children:_||"Set time"}),u("div",{style:{flex:1}})]}),v&&u("div",{style:{position:"absolute",left:0,top:"100%",marginTop:8,zIndex:400},children:u("div",{className:"panel day-popup",style:{padding:12},children:p("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[u("select",{value:E,onChange:D=>P(Number(D.target.value)),children:Array.from({length:24}).map((D,O)=>u("option",{value:O,children:String(O).padStart(2,"0")},O))}),":",u("select",{value:R,onChange:D=>y(Number(D.target.value)),children:Array.from({length:12}).map((D,O)=>u("option",{value:O*5,children:String(O*5).padStart(2,"0")},O))}),u("div",{style:{flex:1}}),u("button",{className:"btn",onClick:k,children:"Apply"})]})})}),p("div",{style:{display:"flex",gap:8},children:[u("button",{type:"submit",className:"btn",children:"Add Task"}),u("button",{type:"button",className:"btn ghost",onClick:()=>{n(""),i(""),o(!1)},children:"Clear"})]})]})},xT="adhd_gems",ot=()=>{const t=localStorage.getItem(xT);return t?parseInt(t,10):0},Ot=t=>{localStorage.setItem(xT,String(t))},Jl=t=>{const n=ot()+t;return Ot(n),n},dD="adhd_medals",hD=[{id:"first_task",name:"First Steps",icon:"\u{1F3AF}",description:"Complete your first task",earned:!1},{id:"task_master",name:"Task Master",icon:"\u2705",description:"Complete 50 tasks",earned:!1},{id:"focus_time",name:"Focus Legend",icon:"\u23F1\uFE0F",description:"Use focus timer for 5+ hours",earned:!1},{id:"streak_warrior",name:"Streak Warrior",icon:"\u{1F525}",description:"Maintain a 7-day streak",earned:!1},{id:"social_butterfly",name:"Social Butterfly",icon:"\u{1F465}",description:"Add 5 friends",earned:!1},{id:"early_bird",name:"Early Bird",icon:"\u{1F305}",description:"Complete a task before 8 AM",earned:!1},{id:"night_owl",name:"Night Owl",icon:"\u{1F319}",description:"Complete a task after 10 PM",earned:!1},{id:"premium_member",name:"Premium Member",icon:"\u{1F48E}",description:"Subscribe to Plus",earned:!1},{id:"quest_master",name:"Quest Master",icon:"\u{1F3C6}",description:"Complete 10 quests",earned:!1},{id:"money_bags",name:"Money Bags",icon:"\u{1F4B0}",description:"Earn 1000 gems",earned:!1}],Zu=()=>{const t=localStorage.getItem(dD);return t?JSON.parse(t):hD},Og="adhd_pet",Io="adhd_pets",Zl="adhd_current_pet_id",ed=[0,100,250,500,1e3,2e3],p1=5,sf=30,m1=50,td={default:{name:"Default",emoji:"\u{1F414}"},golden:{name:"Golden",emoji:"\u2728"},cosmic:{name:"Cosmic",emoji:"\u{1F30C}"},forest:{name:"Forest",emoji:"\u{1F33F}"},sunset:{name:"Sunset",emoji:"\u{1F305}"},ocean:{name:"Ocean",emoji:"\u{1F499}"},rose:{name:"Rose",emoji:"\u{1F339}"}},Mc={default:{name:"Default",description:"Classic pet"},fluffy:{name:"Fluffy",description:"Extra fluffy and soft"},shiny:{name:"Shiny",description:"Sparkly and bright"},mystical:{name:"Mystical",description:"Magical aura"}},nd=(t="My Pet")=>{const e={id:"pet_"+Date.now(),name:t,level:1,experience:0,hunger:30,happiness:80,health:100,timesFeeding:0,totalXpSpent:0,lastFedAt:Date.now(),createdAt:Date.now(),stage:"egg",color:"default",skin:"default",favoriteFood:"treats",mood:"happy"};console.log("[pet] \u{1F423} Creating default pet:",e.name,"id:",e.id),localStorage.setItem(Og,JSON.stringify(e));const n=Lt();return n.find(r=>r.id===e.id)||(n.push(e),console.log("[pet] Adding default pet to allPets array, total now:",n.length),localStorage.setItem(Io,JSON.stringify(n))),console.log("[pet] Setting as current pet"),localStorage.setItem(Zl,e.id),console.log("[pet] Syncing default pet to Firestore..."),nh(n,e.id).catch(r=>{console.error("[pet] \u274C Failed to sync default pet:",r)}),e},Et=()=>{const t=bo();if(t){const r=Lt().find(i=>i.id===t);if(r)return r}const e=localStorage.getItem(Og);return e?JSON.parse(e):null},rl=(t="gems")=>{const e=Et();if(!e)return null;const n=Oe(),r=ot();if(t==="gems"){if(r<p1)return console.warn("Not enough gems to feed pet"),e;Jl(-p1)}else if(t==="xp"){if(n<sf)return console.warn("Not enough XP to feed pet"),e;xn(n-sf),e.totalXpSpent+=sf}for(e.hunger=Math.max(0,e.hunger-30),e.happiness=Math.min(100,e.happiness+10),e.health=Math.min(100,e.health+5),e.timesFeeding+=1,e.lastFedAt=Date.now(),e.experience+=m1,yr(m1);e.experience>=ed[e.level]&&e.level<ed.length;)e.level+=1;return e.stage=kT(e.level),e.mood=Ap(e),ec(e),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:e}})),e},vr=()=>{const t=Et();if(!t)return null;const n=(Date.now()-t.lastFedAt)/1e3/60;if(n>1){const r=Math.min(10,Math.floor(n/10));t.hunger=Math.min(100,t.hunger+r),t.happiness=Math.max(0,t.happiness-1)}return t.hunger>80&&(t.health=Math.max(0,t.health-2)),t.health<=0&&(t.stage="egg",t.level=1,t.experience=0,t.health=50),ec(t),t},kT=t=>t===1?"egg":t<=2?"baby":t<=3?"teen":t<=4?"adult":"legendary",su=(t,e="default",n)=>{if(n)return n;if(e!=="default"&&td[e])return td[e].emoji;switch(t){case"egg":return"\u{1F95A}";case"baby":return"\u{1F423}";case"teen":return"\u{1F425}";case"adult":return"\u{1F414}";case"legendary":return"\u{1F985}";default:return"\u{1F43E}"}},Ap=t=>t.happiness>80&&t.hunger<30?"excited":t.happiness>60&&t.health>70?"happy":t.happiness>40&&t.hunger<70?"content":t.health<30?"sad":"neutral",fD=t=>{const e=Et();return e?(e.name=t.trim(),ec(e),e):null},pD=t=>{const e=Et();return e?(e.color=t,ec(e),e):null},mD=t=>{const e=Et();return e?(e.skin=t,ec(e),e):null},gD=t=>t>=ed.length?0:ed[t],ec=t=>{console.log("[pet] \u{1F4BE} savePet called for:",t.name,"hunger:",t.hunger),localStorage.setItem(Og,JSON.stringify(t));const e=localStorage.getItem(Io),n=e?JSON.parse(e):[],r=n.findIndex(i=>i.id===t.id);r>=0?(console.log("[pet] Updating pet in allPets array at index:",r),n[r]=t,localStorage.setItem(Io,JSON.stringify(n))):console.log("[pet] \u26A0\uFE0F Pet not found in allPets array, might need to add it")},Mg=[{petId:"dragon",name:"Dragon",emoji:"\u{1F409}",presetLevel:3,cost:500},{petId:"phoenix",name:"Phoenix",emoji:"\u{1F525}",presetLevel:4,cost:750},{petId:"unicorn",name:"Unicorn",emoji:"\u{1F984}",presetLevel:5,cost:1e3},{petId:"robot",name:"Robot",emoji:"\u{1F916}",presetLevel:2,cost:300},{petId:"butterfly",name:"Butterfly",emoji:"\u{1F98B}",presetLevel:2,cost:250},{petId:"lion",name:"Lion",emoji:"\u{1F981}",presetLevel:4,cost:800}],Lt=()=>{try{const t=localStorage.getItem(Io);return t?JSON.parse(t):[]}catch{return[]}},bo=()=>localStorage.getItem(Zl),rd=t=>{localStorage.setItem(Zl,t);const e=Lt();console.log("[pet] Syncing current pet selection to Firestore:",t),nh(e,t).catch(n=>console.warn("[pet] Failed to sync current pet:",n)),window.dispatchEvent(new CustomEvent("petSwitched",{detail:{petId:t}}))},yD=(t,e)=>{console.log("[pet] \u{1F6CD}\uFE0F buyPet called with petShopId:",t);const n=Mg.find(o=>o.petId===t);if(!n)return console.warn("[pet] \u274C Pet shop item not found:",t),null;const r=Oe();if(r<n.cost)return console.warn("[pet] \u274C Not enough XP to buy pet. Need:",n.cost,"Have:",r),null;xn(r-n.cost);const i={id:"pet_"+Date.now(),name:e||n.name,level:n.presetLevel,experience:0,hunger:30,happiness:80,health:100,timesFeeding:0,totalXpSpent:0,lastFedAt:Date.now(),createdAt:Date.now(),stage:kT(n.presetLevel),color:"default",skin:"default",favoriteFood:"treats",mood:"happy",emoji:n.emoji},s=Lt();return s.push(i),console.log("[pet] \u2705 Pet purchased, total pets now:",s.length),localStorage.setItem(Io,JSON.stringify(s)),console.log("[pet] \u{1F4E4} Syncing new pet purchase to Firestore:",i.id),nh(s,i.id).catch(o=>{console.error("[pet] \u274C Failed to sync pet purchase:",o)}),localStorage.setItem(Zl,i.id),window.dispatchEvent(new CustomEvent("petSwitched",{detail:{petId:i.id}})),console.log("[pet] \u2705 Pet bought successfully:",i.name),i},Pp=t=>{const n=Lt().filter(i=>i.id!==t);localStorage.setItem(Io,JSON.stringify(n));let r=null;bo()===t&&(n.length>0?(r=n[0].id,rd(n[0].id)):(localStorage.removeItem(Zl),r=null)),console.log("[pet] Syncing pet deletion to Firestore:",t),nh(n,r).catch(i=>console.warn("[pet] Failed to sync pet deletion:",i))},vD=t=>Lt().some(n=>{var r;return n.name===((r=Mg.find(i=>i.petId===t))==null?void 0:r.name)}),AT="adhd_skills",Jr={forgive_skip_day:{id:"forgive_skip_day",name:"Skip a Day",description:"Skip one day without losing your streak",icon:"\u23ED\uFE0F",cost:100,costType:"xp",tree:"forgiveness",level:1,effects:["Use once to skip a day without losing streak bonus"],unlocked:!1,purchased:!1},forgive_retry:{id:"forgive_retry",name:"Task Retry",description:"Get another attempt on a failed task",icon:"\u{1F504}",cost:50,costType:"xp",tree:"forgiveness",level:1,effects:["Retry a task you marked as incomplete"],unlocked:!1,purchased:!1},forgive_double_streak:{id:"forgive_double_streak",name:"Streak Multiplier",description:"2x your streak bonus rewards",icon:"\u26A1",cost:150,costType:"xp",tree:"forgiveness",level:2,effects:["Doubles XP gained from streak bonuses"],unlocked:!1,purchased:!1,prerequisites:["forgive_skip_day"]},forgive_extend:{id:"forgive_extend",name:"Emergency Extension",description:"Extend a task due date by 1 day",icon:"\u{1F4C5}",cost:75,costType:"xp",tree:"forgiveness",level:1,effects:["Use to extend a task deadline when you need more time"],unlocked:!1,purchased:!1},xp_boost_10:{id:"xp_boost_10",name:"XP Boost +10%",description:"Gain 10% more XP from all tasks",icon:"\u{1F4C8}",cost:80,costType:"xp",tree:"xp_mastery",level:1,effects:["+10% XP from completing tasks"],unlocked:!1,purchased:!1},xp_streak_bonus:{id:"xp_streak_bonus",name:"Streak Bonus",description:"+5% XP per day of streak",icon:"\u{1F525}",cost:100,costType:"xp",tree:"xp_mastery",level:1,effects:["Earn bonus XP based on current streak (5% per day)"],unlocked:!1,purchased:!1},xp_combo:{id:"xp_combo",name:"Task Combo",description:"Complete 3 tasks in a row for 25% bonus XP",icon:"\u{1F3AF}",cost:120,costType:"xp",tree:"xp_mastery",level:2,effects:["Complete 3 consecutive tasks to earn 25% XP bonus"],unlocked:!1,purchased:!1,prerequisites:["xp_boost_10"]},xp_social:{id:"xp_social",name:"Social XP",description:"Earn XP by helping friends",icon:"\u{1F465}",cost:90,costType:"xp",tree:"xp_mastery",level:1,effects:["Gain XP when friends complete their tasks"],unlocked:!1,purchased:!1},pet_xp_boost:{id:"pet_xp_boost",name:"Pet XP Boost",description:"Your pet gains 15% more XP",icon:"\u{1F423}",cost:85,costType:"xp",tree:"pet_power",level:1,effects:["+15% XP gains for your pet"],unlocked:!1,purchased:!1},pet_discount:{id:"pet_discount",name:"Efficient Feeding",description:"Pet feeding costs 2 gems instead of 5",icon:"\u{1F48E}",cost:110,costType:"xp",tree:"pet_power",level:1,effects:["Reduce pet feeding gem cost from 5 to 2"],unlocked:!1,purchased:!1},pet_talent:{id:"pet_talent",name:"Pet Talent",description:"Unlock special pet abilities",icon:"\u2728",cost:130,costType:"xp",tree:"pet_power",level:2,effects:["Pet can perform special actions for bonus rewards"],unlocked:!1,purchased:!1,prerequisites:["pet_xp_boost"]},pet_buddy:{id:"pet_buddy",name:"Buddy Bonus",description:"Get rewards when pet reaches new level",icon:"\u{1F381}",cost:95,costType:"xp",tree:"pet_power",level:1,effects:["Earn XP and gems when your pet levels up"],unlocked:!1,purchased:!1}},qo=()=>{const t=localStorage.getItem(AT);if(t){const e=JSON.parse(t);return{unlockedSkills:new Set(e.unlockedSkills),purchasedSkills:new Set(e.purchasedSkills),skillPoints:e.skillPoints||0}}return{unlockedSkills:new Set,purchasedSkills:new Set,skillPoints:0}},ih=()=>{const t=qo();return Object.values(Jr).map(e=>({...e,unlocked:t.unlockedSkills.has(e.id),purchased:t.purchasedSkills.has(e.id)}))},_D=t=>ih().filter(e=>e.tree===t),zr=t=>{const e=Jr[t];if(!e||!e.prerequisites)return!0;const n=qo();return e.prerequisites.every(r=>n.purchasedSkills.has(r))},wD=t=>{const e=Jr[t];if(!e)return!1;const n=qo();if(n.purchasedSkills.has(t))return console.warn("Skill already purchased"),!1;if(!zr(t))return console.warn("Prerequisites not met"),!1;if(e.costType==="xp"){const r=Oe();if(r<e.cost)return console.warn("Not enough XP"),!1;xn(r-e.cost)}else if(e.costType==="gems"){if(ot()<e.cost)return console.warn("Not enough gems"),!1;Jl(-e.cost)}return n.purchasedSkills.add(t),n.unlockedSkills.add(t),RT(n),!0},of=t=>qo().purchasedSkills.has(t),id=()=>{const t=qo();return Array.from(t.purchasedSkills)},PT=t=>{if(!Jr[t])return!1;const n=qo();return n.purchasedSkills.add(t),n.unlockedSkills.add(t),RT(n),window.dispatchEvent(new CustomEvent("skillUnlocked",{detail:{skillId:t}})),!0},RT=t=>{localStorage.setItem(AT,JSON.stringify({unlockedSkills:Array.from(t.unlockedSkills),purchasedSkills:Array.from(t.purchasedSkills),skillPoints:t.skillPoints}))},Lg="adhd_titles",il=[{id:"task_master",name:"Task Master",description:"Complete 100 tasks",unlockedFrom:"achievement",source:"Complete 100 tasks"},{id:"focus_wizard",name:"Focus Wizard",description:"Complete 10 focus sessions",unlockedFrom:"achievement",source:"Complete 10 focus sessions"},{id:"level_legend",name:"Level Legend",description:"Reach Level 20",unlockedFrom:"achievement",source:"Reach Level 20"},{id:"streak_keeper",name:"Streak Keeper",description:"Maintain a 30-day streak",unlockedFrom:"achievement",source:"Maintain a 30-day streak"},{id:"pet_lover",name:"Pet Lover",description:"Reach maximum pet happiness",unlockedFrom:"achievement",source:"Reach maximum pet happiness"},{id:"skill_scholar",name:"Skill Scholar",description:"Unlock 10 skills",unlockedFrom:"achievement",source:"Unlock 10 skills"},{id:"early_bird",name:"Early Bird",description:"Complete 5 tasks before 9 AM",unlockedFrom:"achievement",source:"Complete 5 tasks before 9 AM"},{id:"night_owl",name:"Night Owl",description:"Complete 5 tasks after 9 PM",unlockedFrom:"achievement",source:"Complete 5 tasks after 9 PM"},{id:"calendar_creator",name:"Calendar Creator",description:"Create 50 events",unlockedFrom:"achievement",source:"Create 50 events"},{id:"explorer",name:"Explorer",description:"Visit all pages in the app",unlockedFrom:"achievement",source:"Visit all pages in the app"},{id:"founder",name:"Founder",description:"Support the app early",unlockedFrom:"store",source:"Purchase from store"},{id:"collector",name:"Collector",description:"Unlock 50 titles",unlockedFrom:"achievement",source:"Unlock 50 titles"},{id:"developer",name:"Developer",description:"Secret dev title",unlockedFrom:"special",source:"For Devs Only ;)"}],g1=()=>({unlockedIds:[],selectedTitleId:null}),sh=()=>{try{const t=localStorage.getItem(Lg);return t?JSON.parse(t):g1()}catch{return g1()}},NT=t=>{try{const e=sh();e.unlockedIds.includes(t)||(e.unlockedIds.push(t),localStorage.setItem(Lg,JSON.stringify(e)),console.log("[titles] Syncing unlocked title to Firestore:",t),pT(e.unlockedIds,e.selectedTitleId).catch(n=>console.warn("[titles] Failed to sync:",n)),window.dispatchEvent(new CustomEvent("titleUnlocked",{detail:{titleId:t}})))}catch(e){console.error("Error unlocking title:",e)}},ou=t=>{try{const e=sh();e.selectedTitleId=t,localStorage.setItem(Lg,JSON.stringify(e));const n=e.unlockedIds;console.log("[titles] Syncing selected title to Firestore:",t),pT(n,t).catch(r=>console.warn("[titles] Failed to sync:",r)),window.dispatchEvent(new CustomEvent("selectedTitleChanged",{detail:{titleId:t}}))}catch(e){console.error("Error setting selected title:",e)}},js=()=>{const t=sh();return il.filter(e=>t.unlockedIds.includes(e.id))},Gi=()=>{const t=sh();return t.selectedTitleId&&il.find(e=>e.id===t.selectedTitleId)||null},SD=async(t,e,n,r)=>{const i=Ni(He,"users"),s=Ii(i,Gt("username","==",n));if(!(await eh(s)).empty)throw new Error("Username already taken");const c=(await IA(To,t,e)).user,d={uid:c.uid,email:c.email||t,username:n,hashtag:r,avatar:"\u{1F464}",createdAt:Date.now()};return await uT(Rt(He,"users",c.uid),d),d},ED=async(t,e)=>{const r=(await bA(To,t,e)).user,i=await $o(Rt(He,"users",r.uid));if(!i.exists())throw new Error("User profile not found");return i.data()},TD=async()=>{await AA(To)},CD=t=>TS(To,t),ID=async t=>{const e=await $o(Rt(He,"users",t));return e.exists()?e.data():null},Lc="adhd_purchases",ji="adhd_daily_creations",$i="adhd_profile",Ki="adhd_streak",Ms="adhd_users",y1="adhd_current_user",Fc="adhd_bronze_crate_last_opened",ln="adhd_quests_progress",v1=["\u{1F464}","\u{1F60A}","\u{1F9E0}","\u{1F3AF}","\u{1F31F}","\u2728","\u{1F680}","\u{1F4AA}","\u{1F3A8}","\u{1F4DA}","\u{1F3AD}","\u{1F9D8}","\u{1F438}","\u{1F9B8}","\u{1F47B}","\u{1F916}"],bD=()=>({username:"Guest",hashtag:"0000",tasksCompleted:0,eventsCreated:0,avatar:"\u{1F464}",customAvatarUrl:void 0}),Wi=()=>{const t=localStorage.getItem(Ki);return t?JSON.parse(t):{current:0,lastDate:null,longest:0}},xD=()=>{const{tasks:t,events:e,addTask:n,updateTask:r,removeTask:i}=Wo(),s=Fw(),[o,l]=M.exports.useState(!1),[c,d]=M.exports.useState(!1),[f,v]=M.exports.useState(null),[g,E]=M.exports.useState(""),[P,R]=M.exports.useState(9),[y,_]=M.exports.useState(0),[k,D]=M.exports.useState("AM"),[O,B]=M.exports.useState("month"),[F,b]=M.exports.useState(0),[S,T]=M.exports.useState(!1),[C,x]=M.exports.useState(""),[N,w]=M.exports.useState(!1),[G,J]=M.exports.useState(""),[se,me]=M.exports.useState(""),[ye,K]=M.exports.useState(!1),[H,z]=M.exports.useState(()=>{const A=localStorage.getItem($i);return A?JSON.parse(A):bD()}),[V,$]=M.exports.useState(!1),[re,ee]=M.exports.useState(H.username);M.exports.useState(!1);const[ue,_e]=M.exports.useState(H.hashtag||""),[Re,de]=M.exports.useState(!1),[Zn,br]=M.exports.useState(""),[Rn,Nn]=M.exports.useState(()=>Wi()),[ke,er]=M.exports.useState(()=>{const A=localStorage.getItem(Lc);return A?new Set(JSON.parse(A)):new Set}),[Ho,tr]=M.exports.useState(!1),[yn,xr]=M.exports.useState("login"),[Ke,j]=M.exports.useState(""),[ae,te]=M.exports.useState(""),[Ve,ze]=M.exports.useState(""),[Ze,nr]=M.exports.useState(""),[rr,ir]=M.exports.useState(""),[je,tc]=M.exports.useState(""),[Go,Ko]=M.exports.useState(""),[kr,vn]=M.exports.useState(""),[Ar,Bt]=M.exports.useState(ot()),[Cs,Is]=M.exports.useState(Oe()),[Xo,Dn]=M.exports.useState(""),[Pr,mt]=M.exports.useState(()=>Zu()),[qe,gt]=M.exports.useState(Et),[bs,ah]=M.exports.useState(ot()),[Qo,_n]=M.exports.useState(()=>js()),[yt,Rr]=M.exports.useState(()=>Gi()),[Di,Nr]=M.exports.useState(()=>Lt()),[xs,Yo]=M.exports.useState(()=>bo()),[Dr,nc]=M.exports.useState(ET()),[wn,Jo]=M.exports.useState(IT()),[Zo,Or]=M.exports.useState(Fn()),sn=ke.has(4)?6:3,rc=t.slice(0,sn),ea=()=>new Date().toDateString(),on=()=>{const A=localStorage.getItem(ji),Q=A?JSON.parse(A):{},le=ea();return Q[le]||0},ic=()=>{const A=localStorage.getItem(ji),Q=A?JSON.parse(A):{},le=ea();Q[le]=(Q[le]||0)+1;const we=new Date;we.setDate(we.getDate()-30),Object.keys(Q).forEach(X=>{new Date(X)<we&&delete Q[X]}),localStorage.setItem(ji,JSON.stringify(Q))},ks=(A,Q)=>{if(console.log("[Dashboard.handleAdd] Called with title:",A,"due:",Q),t.length>=sn){alert(`Task limit reached (${sn}). Unlock more in the Store!`);return}const le=ke.has(4)?6:3;if(on()>=le){alert(`Daily task creation limit reached (${le}). Try again tomorrow or unlock more in the Store!`);return}const X={id:Date.now(),title:A,description:"",dueDate:Q||"",completed:!1};console.log("[Dashboard.handleAdd] Adding task:",X),n(X),ic(),l(!1)},ta=()=>{const A=Wi(),Q=new Date().toDateString(),le=A.lastDate;if(le===Q)return;const we=new Date;we.setDate(we.getDate()-1);const X=we.toDateString();le===X?A.current+=1:A.current=1,A.longest=Math.max(A.longest,A.current),A.lastDate=Q,localStorage.setItem(Ki,JSON.stringify(A))};M.exports.useEffect(()=>{const A=CD(async Q=>{var le;if(Q){tr(!0);try{const we=await ID(Q.uid);we&&(console.log("[Auth] Loaded profile from Firestore:",we),z(we),localStorage.setItem($i,JSON.stringify(we)));const X=await JN();if(console.log("[Auth] gameProgress object:",X),X){if(console.log("[Auth] Loaded game progress from Firestore:",X),console.log("[Auth] gameProgress.xp =",X.xp),X.xp!==void 0&&X.xp!==null?(console.log("[Auth] \u2705 Restoring XP:",X.xp),xn(X.xp,!1)):console.log("[Auth] \u26A0\uFE0F No XP to restore (xp is",X.xp,")"),X.gems!==void 0&&(console.log("[Auth] Restoring gems:",X.gems),Ot(X.gems),Bt(X.gems)),X.purchases&&er(new Set(X.purchases)),X.pets&&(Nr(X.pets),X.currentPetId&&rd(X.currentPetId)),X.unlockedSkills){const Qt="adhd_unlocked_skills";localStorage.setItem(Qt,JSON.stringify(X.unlockedSkills))}if(console.log("[Auth] \u23ED\uFE0F Restoring titles..."),console.log("[Auth] gameProgress:",X),console.log("[Auth] gameProgress.unlockedTitles:",X==null?void 0:X.unlockedTitles),console.log("[Auth] gameProgress.selectedTitle:",X==null?void 0:X.selectedTitle),((le=X==null?void 0:X.unlockedTitles)==null?void 0:le.length)||(X==null?void 0:X.selectedTitle)){const Qt="adhd_titles";if(X.unlockedTitles&&X.unlockedTitles.length>0){console.log("[Auth] \u2705 Restoring unlocked titles:",X.unlockedTitles.length);const Rs={unlockedIds:X.unlockedTitles,selectedTitleId:X.selectedTitle||null};localStorage.setItem(Qt,JSON.stringify(Rs))}console.log("[Auth] \u{1F3AF} Firing titles:restored event"),window.dispatchEvent(new CustomEvent("titles:restored"))}else console.log("[Auth] \u26A0\uFE0F No titles to restore (unlockedTitles or selectedTitle missing)");if(console.log("[Auth] \u23ED\uFE0F Restoring pets..."),console.log("[Auth] gameProgress.pets:",X==null?void 0:X.pets),console.log("[Auth] gameProgress.currentPetId:",X==null?void 0:X.currentPetId),(X==null?void 0:X.pets)&&Array.isArray(X.pets)){if(console.log("[Auth] \u2705 Restoring pets:",X.pets.length),localStorage.setItem("adhd_pets",JSON.stringify(X.pets)),X.pets.length>0){const Qt=X.pets[0];console.log("[Auth] \u2705 Setting default pet in localStorage:",Qt.name),localStorage.setItem("adhd_pet",JSON.stringify(Qt))}X.currentPetId&&(console.log("[Auth] \u2705 Restoring current pet:",X.currentPetId),localStorage.setItem("adhd_current_pet_id",X.currentPetId)),console.log("[Auth] \u{1F3AF} Firing pets:restored event"),window.dispatchEvent(new CustomEvent("pets:restored"))}else console.log("[Auth] \u26A0\uFE0F No pets to restore");X.tasks&&Array.isArray(X.tasks)?(console.log("[Auth] Restoring tasks from Firestore:",X.tasks.length,"tasks",X.tasks),localStorage.setItem("adhd_tasks",JSON.stringify(X.tasks)),window.dispatchEvent(new CustomEvent("tasks:restored"))):console.log("[Auth] \u26A0\uFE0F No tasks to restore (tasks is",X.tasks,")")}}catch(we){console.error("[Auth] Error loading profile/progress from Firestore:",we)}}else tr(!1),z({username:"Guest",hashtag:"0000",avatar:"\u{1F464}",customAvatarUrl:void 0,tasksCompleted:0,eventsCreated:0}),localStorage.removeItem($i),localStorage.removeItem(Lc),localStorage.removeItem(ji),localStorage.removeItem(Ki),localStorage.removeItem(Ms),localStorage.removeItem(y1),localStorage.removeItem(Fc),localStorage.removeItem(ln),localStorage.removeItem("adhd_tasks"),localStorage.removeItem("adhd_titles"),localStorage.removeItem("adhd_pets"),localStorage.removeItem("adhd_current_pet_id"),window.dispatchEvent(new CustomEvent("titles:cleared")),window.dispatchEvent(new CustomEvent("tasks:cleared")),window.dispatchEvent(new CustomEvent("pets:cleared")),nl(!1),Ot(0),gt(null),Nr([]),er(new Set),Nn(()=>Wi()),Bt(0)});return()=>A()},[]),M.exports.useEffect(()=>{(()=>{H.tasksCompleted>0&&Wi().lastDate!==new Date().toDateString()&&ta()})()},[H.tasksCompleted]),M.exports.useEffect(()=>{ye&&(mt(Zu()),_n(js()),Rr(Gi()))},[ye]),M.exports.useEffect(()=>{const A=()=>{gt(Et())};return window.addEventListener("petUpdated",A),()=>window.removeEventListener("petUpdated",A)},[]),M.exports.useEffect(()=>{const A=()=>{Rr(Gi())},Q=()=>{console.log("[Dashboard] Titles restored, updating UI"),_n(js()),Rr(Gi())},le=()=>{console.log("[Dashboard] Titles cleared, clearing UI"),_n([]),Rr(null)};return window.addEventListener("selectedTitleChanged",A),window.addEventListener("titles:restored",Q),window.addEventListener("titles:cleared",le),()=>{window.removeEventListener("selectedTitleChanged",A),window.removeEventListener("titles:restored",Q),window.removeEventListener("titles:cleared",le)}},[]),M.exports.useEffect(()=>{const A=()=>{Yo(bo()),gt(Et),Nr(Lt())};return window.addEventListener("petSwitched",A),()=>window.removeEventListener("petSwitched",A)},[]),M.exports.useEffect(()=>{const A=()=>{w(!0),b(0)};return window.addEventListener("devMenuKeyCombo",A),()=>window.removeEventListener("devMenuKeyCombo",A)},[]);const na=()=>{b(A=>A+1),F+1===7&&(w(!0),b(0)),setTimeout(()=>b(0),3e3)},Mr=()=>{G==="adhd123"?(T(!0),w(!1),J(""),me("")):(me("Incorrect password"),J(""))},sr=A=>{yr(A),x("")},ra=()=>{const A=localStorage.getItem(ji),Q=A?JSON.parse(A):{},le=ea();delete Q[le],localStorage.setItem(ji,JSON.stringify(Q))},Oi=A=>{const Q=new Set(ke);Q.has(A)?Q.delete(A):Q.add(A),er(Q),localStorage.setItem(Lc,JSON.stringify(Array.from(Q)))},sc=()=>{const A=Wi();A.current+=1,A.longest=Math.max(A.longest,A.current),localStorage.setItem(Ki,JSON.stringify(A)),Nn(A)},oc=()=>{const A=Wi();A.current>0&&(A.current-=1),localStorage.setItem(Ki,JSON.stringify(A)),Nn(A)},ac=()=>{const A={current:0,lastDate:null,longest:0};localStorage.setItem(Ki,JSON.stringify(A)),Nn(A)},ia=()=>{const A=localStorage.getItem(Ms),Q=A?JSON.parse(A):[],le={id:"testbot",username:"TestBot",hashtag:"9999",avatar:"\u{1F916}"},we=Q.filter(X=>X.id!=="testbot");we.push(le),localStorage.setItem(Ms,JSON.stringify(we)),alert("Test Friend (TestBot#9999) added to the user registry. You can now add them as a friend!")},sa=()=>{K(!0)},or=async A=>{if(console.log("[saveProfile] Saving profile with:",A),z(A),localStorage.setItem($i,JSON.stringify(A)),To.currentUser)try{console.log("[saveProfile] Syncing to Firestore...");const X={username:A.username,hashtag:A.hashtag||"1000",avatar:A.avatar,customAvatarUrl:A.customAvatarUrl||null,updatedAt:new Date().toISOString()};console.log("[saveProfile] Update payload:",X),await hi(Rt(He,"users",To.currentUser.uid),X),console.log("[saveProfile] \u2705 Firestore sync successful with avatar:",A.avatar),z(A)}catch(X){console.error("Error updating profile in Firestore:",X);const Qt=localStorage.getItem($i);Qt&&z(JSON.parse(Qt))}window.dispatchEvent(new Event("profileUpdated"));const Q=localStorage.getItem(Ms),we=(Q?JSON.parse(Q):[]).filter(X=>X.id!==A.username.toLowerCase().replace(/\s+/g,"_"));we.push({id:A.username.toLowerCase().replace(/\s+/g,"_"),username:A.username,hashtag:A.hashtag||"1000",avatar:A.avatar}),localStorage.setItem(Ms,JSON.stringify(we))},As=async()=>{if(ze(""),!Ke.trim()||!ae.trim()){ze("Email and password are required");return}try{await ED(Ke,ae),j(""),te("")}catch(A){ze(A.message||"Login failed. Check your email and password.")}},lc=async()=>{try{z({username:"Guest",hashtag:"0000",avatar:"\u{1F464}",customAvatarUrl:void 0,tasksCompleted:0,eventsCreated:0}),tr(!1),K(!1),ze(""),j(""),te(""),localStorage.removeItem($i),localStorage.removeItem(Lc),localStorage.removeItem(ji),localStorage.removeItem(Ki),localStorage.removeItem(Ms),localStorage.removeItem(y1),localStorage.removeItem(Fc),localStorage.removeItem(ln),localStorage.removeItem("adhd_tasks"),localStorage.removeItem("adhd_titles"),localStorage.removeItem("adhd_pets"),localStorage.removeItem("adhd_current_pet_id"),window.dispatchEvent(new CustomEvent("tasks:cleared")),window.dispatchEvent(new CustomEvent("titles:cleared")),window.dispatchEvent(new CustomEvent("pets:cleared")),nl(!1),Ot(0),gt(null),Nr([]),er(new Set),Nn(()=>Wi()),Bt(0),await TD()}catch{ze("Logout failed")}},Mi=async()=>{if(vn(""),!Ze.trim()||!rr.trim()){vn("Email and password are required");return}if(!je.trim()){vn("Username is required");return}const A=Go.trim()||String(Math.floor(Math.random()*9e3)+1e3);if(!/^\d{1,6}$/.test(A)){vn("Hashtag must be 1-6 digits (e.g., 1234)");return}try{await SD(Ze,rr,je,A);const Q={username:je.trim(),hashtag:A,tasksCompleted:0,eventsCreated:0,avatar:v1[0],customAvatarUrl:void 0};z(Q),localStorage.setItem($i,JSON.stringify(Q)),window.dispatchEvent(new Event("profileUpdated")),nr(""),ir(""),tc(""),Ko("")}catch(Q){vn(Q.message||"Sign up failed. Try again.")}},Sn=async()=>{re.trim()&&await or({...H,username:re.trim()})},an=async()=>{const A={...H,username:re.trim()||H.username,hashtag:ue.trim()||H.hashtag};await or(A),$(!1)},Li=async A=>{await or({...H,avatar:A,customAvatarUrl:void 0}),de(!1)},Fi=A=>{var we;br("");const Q=(we=A.target.files)==null?void 0:we[0];if(!Q)return;if(!Q.type.startsWith("image/")){br("Please upload an image file");return}if(Q.size>500*1024){br("Image must be smaller than 500KB");return}const le=new FileReader;le.onload=X=>{var Rs;const Qt=(Rs=X.target)==null?void 0:Rs.result;or({...H,customAvatarUrl:Qt}),de(!1)},le.onerror=()=>{br("Failed to read file")},le.readAsDataURL(Q)},oa=()=>t.filter(Q=>!Q.completed).sort((Q,le)=>{const we=new Date(Q.dueDate).getTime(),X=new Date(le.dueDate).getTime();return we-X}).slice(0,3),Ne=[{title:"Brush teeth",icon:"\u{1FAA5}",xp:10},{title:"Pay bills",icon:"\u{1F4B0}",xp:50},{title:"Take out trash",icon:"\u{1F5D1}\uFE0F",xp:15},{title:"Clean house",icon:"\u{1F3E0}",xp:40},{title:"Take medication",icon:"\u{1F48A}",xp:10},{title:"Shower",icon:"\u{1F6BF}",xp:15},{title:"Call friend",icon:"\u{1F4DE}",xp:25},{title:"Take a break",icon:"\u{1F3AE}",xp:5},{title:"Eat something",icon:"\u{1F34E}",xp:10},{title:"Drink water",icon:"\u{1F4A7}",xp:5},{title:"Tidy desk",icon:"\u{1F9F9}",xp:20},{title:"Check email",icon:"\u{1F4E7}",xp:15}],Ps=(A,Q=20)=>{v({title:A,xp:Q}),E(new Date().toISOString().split("T")[0]),R(9),_(0)},Vi=()=>{if(!f)return;if(t.length>=sn){alert(`Task limit reached (${sn}). Unlock more in the Store!`);return}const A=ke.has(4)?6:3;if(on()>=A){alert(`Daily task creation limit reached (${A}). Try again tomorrow or unlock more in the Store!`);return}let le=P;k==="PM"&&P!==12?le=P+12:k==="AM"&&P===12&&(le=0);const we=new Date(`${g}T${String(le).padStart(2,"0")}:${String(y).padStart(2,"0")}:00`).toISOString(),X={id:Date.now(),title:f.title,description:"",dueDate:we,completed:!1,templateXp:f.xp};n(X),ic(),v(null),E(""),D("AM"),d(!1)};return oa(),p("div",{className:"container",children:[p("div",{className:"header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[p("div",{children:[u("h1",{onClick:na,style:{cursor:"pointer",userSelect:"none"},children:"Dashboard"}),u("div",{className:"subtle",children:"Plan your day \u2014 quick add tasks or jump to views"})]}),p("div",{style:{display:"flex",alignItems:"center",gap:0,justifyContent:"space-between"},children:[p("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[p("div",{children:[u("div",{style:{fontWeight:600,fontSize:"1.1rem",marginLeft:100},children:H.username}),yt&&u("div",{style:{fontSize:"0.8rem",color:"var(--accent)",fontWeight:500,marginLeft:75},children:yt.name})]}),p("div",{style:{fontSize:"0.9rem",display:"flex",flexDirection:"column",gap:1},children:[p("div",{style:{fontWeight:500,marginLeft:75},children:["Level ",Math.floor(Oe()/100)+1]}),p("div",{className:"subtle",style:{fontSize:"0.8rem",marginLeft:100},children:[Oe()," XP"]})]})]}),u("div",{style:{width:48,height:48,borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,fontWeight:"bold",color:"var(--bg)",cursor:"pointer",border:ke.has(3)?"3px solid var(--accent-2)":"none",backgroundImage:H.customAvatarUrl?`url(${H.customAvatarUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",flexShrink:0,marginLeft:-4},onClick:sa,children:!H.customAvatarUrl&&H.avatar})]})]}),p("div",{className:"app-grid",children:[p("aside",{className:"panel",children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,gap:24,flexWrap:"nowrap"},children:[p("div",{style:{display:"flex",alignItems:"center",gap:8,whiteSpace:"nowrap",minWidth:0},children:[u("h3",{style:{margin:0},children:"Your Tasks"}),p("span",{className:"subtle",style:{fontSize:"0.875rem"},children:[on(),"/",ke.has(4)?6:3]})]}),p("div",{style:{display:"flex",gap:8},children:[u($e,{onClick:()=>d(!0),title:"Quick add from templates",children:"Quick Add"}),u($e,{onClick:()=>l(A=>!A),disabled:on()>=(ke.has(4)?6:3)&&!o,children:o?"Close":"+ Add"})]})]}),p("div",{className:"tasks-list",style:{maxHeight:"400px",overflowY:"auto"},children:[o&&u(uD,{onAdd:ks}),t.length===0&&u("div",{className:"subtle",children:"No tasks yet \u2014 hit + Add to create one"}),rc.map(A=>{const Q=A.createdAt?Date.now()-A.createdAt:1/0,le=Q>=5*60*1e3,we=A.createdAt?Math.max(0,5*60*1e3-Q):0;return u(Dg,{task:A,timeUntilXp:we,xpAmount:A.templateXp||20,onUpdate:X=>r(X),onComplete:()=>{if(i(A.id),le){const X=A.templateXp||20;yr(X),or({...H,tasksCompleted:H.tasksCompleted+1}),ta()}},onRemove:()=>i(A.id)},A.id)}),t.length>sn&&p("div",{className:"subtle",style:{marginTop:8,fontSize:"0.875rem"},children:["+",t.length-sn," more ",t.length-sn===1?"task":"tasks"," (unlock in Store)"]})]})]}),p("main",{className:"panel",children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[p("div",{children:[u("h3",{style:{margin:0},children:"Upcoming Events"}),u("div",{className:"subtle",children:new Date().toLocaleDateString()})]}),p("div",{style:{display:"flex",gap:8},children:[u($e,{variant:O==="day"?void 0:"ghost",onClick:()=>B("day"),children:"Day"}),u($e,{variant:O==="week"?void 0:"ghost",onClick:()=>B("week"),children:"Week"}),u($e,{variant:O==="month"?void 0:"ghost",onClick:()=>B("month"),children:"Month"})]})]}),u(bT,{view:O})]}),qe&&p("aside",{className:"panel",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:12,padding:16},children:[u("h3",{style:{margin:0,marginBottom:8},children:"Your Pet"}),u("div",{style:{fontSize:"3rem"},children:su(qe.stage,qe.color,qe.emoji)}),p("div",{style:{textAlign:"center",fontSize:"0.85rem"},children:[u("div",{style:{fontWeight:"bold",marginBottom:2},children:qe.name}),p("div",{style:{color:"var(--muted)",fontSize:"0.8rem",marginBottom:8},children:["Level ",qe.level," ",qe.stage.charAt(0).toUpperCase()+qe.stage.slice(1)]})]}),p("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:6},children:[u("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:"Hunger"}),u("div",{style:{height:6,background:"var(--border)",borderRadius:3},children:u("div",{style:{height:"100%",width:`${Math.max(0,100-qe.hunger)}%`,background:qe.hunger>70?"#ef4444":"#22c55e",borderRadius:3}})})]}),p("div",{style:{width:"100%",marginBottom:6},children:[u("div",{style:{fontSize:"0.7rem",color:"var(--muted)",marginBottom:12,textAlign:"center"},children:"Switch Pet"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(60px, 1fr))",gap:4},children:Di.map(A=>u("button",{onClick:()=>rd(A.id),style:{padding:"6px 4px",borderRadius:4,border:xs===A.id?"2px solid var(--accent)":"1px solid var(--border)",background:xs===A.id?"rgba(167, 139, 250, 0.2)":"transparent",cursor:"pointer",fontSize:"0.75rem",color:"var(--text)",fontWeight:xs===A.id?"bold":"normal",transition:"all 0.2s",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",justifyContent:"center"},title:A.name,children:A.name},A.id))})]}),p("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[u("button",{className:"btn primary",onClick:()=>{const A=rl("gems");A&&(gt(A),ah(ot()))},disabled:Ar<5,style:{fontSize:"0.7rem",padding:"6px",opacity:Ar<5?.5:1,cursor:Ar<5?"not-allowed":"pointer",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"Feed with gems (5)"}),u("button",{className:"btn primary",onClick:()=>{const A=rl("xp");A&&(gt(A),Is(Oe()))},disabled:Cs<30,style:{fontSize:"0.7rem",padding:"6px",opacity:Cs<30?.5:1,cursor:Cs<30?"not-allowed":"pointer",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"Feed with XP (30)"})]}),u("button",{className:"btn primary",onClick:()=>s.push("/pet"),style:{width:"100%",fontSize:"0.85rem",padding:"8px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:"Care for Pet \u2192"})]})]}),N&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99998},children:p("div",{className:"panel",style:{maxWidth:400,padding:24,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:"Developer Menu"}),u("p",{style:{textAlign:"center",color:"var(--muted)",marginBottom:16},children:"Enter password to continue"}),u("input",{type:"password",className:"input",placeholder:"Password",value:G,onChange:A=>J(A.target.value),onKeyDown:A=>A.key==="Enter"&&Mr(),autoFocus:!0,style:{marginBottom:12}}),se&&u("div",{style:{color:"#ef4444",marginBottom:12,fontSize:"0.9rem",textAlign:"center"},children:se}),p("div",{style:{display:"flex",gap:8},children:[u("button",{className:"btn primary",onClick:Mr,style:{flex:1},children:"Unlock"}),u("button",{className:"btn ghost",onClick:()=>{w(!1),J(""),me("")},style:{flex:1},children:"Cancel"})]})]})}),S&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:p("div",{className:"panel",style:{maxWidth:500,maxHeight:"80vh",padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",userSelect:"none",overflow:"auto"},children:[u("h2",{style:{margin:"0 0 12px 0",textAlign:"center"},children:"Development Menu"}),p("div",{style:{marginBottom:16,fontSize:"0.9rem",color:"var(--muted)"},children:[p("div",{children:["Current XP: ",Oe()," | Daily Tasks Created: ",on(),"/",ke.has(4)?6:3]}),p("div",{children:["Streak: ",Rn.current," current | ",Rn.longest," longest"]})]}),p("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"XP Controls"}),p("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"XP amount",value:C,onChange:A=>x(A.target.value),style:{flex:1}}),u("button",{className:"btn",onClick:()=>sr(parseInt(C)||0),children:"Grant"})]}),u("button",{className:"btn ghost",onClick:()=>nl(),style:{marginTop:8,width:"100%"},children:"Reset XP"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Task Limit Controls"}),u("button",{className:"btn ghost",onClick:ra,style:{width:"100%"},children:"Reset Daily Limit"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Streak Controls"}),p("div",{className:"subtle",style:{fontSize:"0.85rem",marginBottom:8},children:["Current: ",Rn.current," days"]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:sc,style:{fontSize:"0.85rem"},children:"+1 Streak"}),u("button",{className:"btn ghost",onClick:oc,style:{fontSize:"0.85rem"},children:"-1 Streak"}),u("button",{className:"btn ghost",onClick:ac,style:{fontSize:"0.85rem"},children:"Reset"})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Purchases"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[p("button",{className:"btn ghost",onClick:()=>Oi(1),style:{opacity:ke.has(1)?1:.5},children:[ke.has(1)?"\u2713":"\u2717"," Sunset Theme"]}),p("button",{className:"btn ghost",onClick:()=>Oi(2),style:{opacity:ke.has(2)?1:.5},children:[ke.has(2)?"\u2713":"\u2717"," Ocean Theme"]}),p("button",{className:"btn ghost",onClick:()=>Oi(3),style:{opacity:ke.has(3)?1:.5},children:[ke.has(3)?"\u2713":"\u2717"," Avatar Border"]}),p("button",{className:"btn ghost",onClick:()=>Oi(4),style:{opacity:ke.has(4)?1:.5},children:[ke.has(4)?"\u2713":"\u2717"," Extra Slots"]}),p("button",{className:"btn ghost",onClick:()=>Oi(5),style:{opacity:ke.has(5)?1:.5},children:[ke.has(5)?"\u2713":"\u2717"," Custom Avatar"]})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Social Testing"}),u("button",{className:"btn ghost",onClick:ia,style:{width:"100%"},children:"Add Test Friend (TestBot#9999)"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Gem Controls"}),p("div",{style:{marginBottom:8},children:[p("div",{style:{fontSize:"0.9rem",marginBottom:8},children:["Current Gems: ",u("strong",{children:Ar})]}),p("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"Gem amount",value:Xo,onChange:A=>Dn(A.target.value),style:{flex:1}}),u("button",{className:"btn",onClick:()=>{const A=parseInt(Xo);!isNaN(A)&&A>0&&(Jl(A),Bt(ot()),Dn(""),window.dispatchEvent(new Event("currencyUpdated")))},children:"Add"})]})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{Ot(0),Bt(0),Dn(""),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 0"}),u("button",{className:"btn ghost",onClick:()=>{Ot(1e3),Bt(1e3),Dn(""),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 1000"})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Skill Tree Controls"}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,maxHeight:200,overflowY:"auto"},children:ih().map(A=>p("button",{className:"btn ghost",onClick:()=>PT(A.id),style:{fontSize:"0.75rem",opacity:id().includes(A.id)?1:.5},children:[id().includes(A.id)?"\u2713":"\u2717"," ",A.name]},A.id))})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12,marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Pet Controls"}),qe&&p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{if(qe){qe.hunger=0;const A=rl("gems");A&&(gt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"Feed Pet"}),u("button",{className:"btn ghost",onClick:()=>{if(qe){qe.happiness=100;const A=vr();A&&(gt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"Max Happiness"}),u("button",{className:"btn ghost",onClick:()=>{if(qe){qe.health=100;const A=vr();A&&(gt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"Max Health"}),u("button",{className:"btn ghost",onClick:()=>{if(qe){qe.level=Math.min(qe.level+1,10);const A=vr();A&&(gt(A),window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:A}})))}},style:{fontSize:"0.8rem"},children:"+1 Level"})]}),p("div",{style:{marginBottom:12},children:[u("h4",{style:{margin:"0 0 8px 0",fontSize:"0.8rem",color:"var(--muted)"},children:"Delete Pet"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:6},children:Di.map(A=>p("button",{className:"btn ghost",onClick:()=>{window.confirm(`Delete ${A.name}?`)&&(Pp(A.id),Nr(Lt()),gt(Et()),alert(`${A.name} deleted!`))},style:{fontSize:"0.7rem",padding:"4px 8px"},children:["Delete ",A.name]},A.id))})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Crate Timer Controls"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(Fc,"0"),alert("Bronze crate timer reset!")},style:{fontSize:"0.8rem"},children:"Reset Bronze Timer"}),u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(Fc,String(Date.now()-12*60*60*1e3)),alert("Bronze crate ready!")},style:{fontSize:"0.8rem"},children:"Bronze Ready Now"})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12,marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Title Controls"}),p("div",{style:{marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{NT("developer"),_n(js()),alert("Developer title unlocked!")},style:{fontSize:"0.8rem",width:"100%",marginBottom:8},children:"Unlock Developer Title"}),u("button",{className:"btn ghost",onClick:()=>{ou("developer"),Rr(Gi()),alert("Developer title equipped!")},style:{fontSize:"0.8rem",width:"100%"},children:"Equip Developer Title"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:js().map(A=>u("button",{className:"btn ghost",onClick:()=>{ou(A.id),Rr(Gi())},style:{fontSize:"0.75rem",padding:6,background:(yt==null?void 0:yt.id)===A.id?"rgba(167, 139, 250, 0.3)":"transparent",border:(yt==null?void 0:yt.id)===A.id?"1px solid var(--accent)":"1px solid var(--border)"},children:A.id==="developer"?u("span",{style:{background:"linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"bold"},children:A.name}):A.name},A.id))})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Critical Hit Testing"}),p("div",{style:{marginBottom:12,fontSize:"0.85rem",color:"var(--muted)"},children:[p("div",{children:["2x XP Chance: ",p("strong",{children:[Zo.criticalHitChance,"%"]})]}),p("div",{children:["Crate Chance: ",p("strong",{children:[Zo.crateRewardChance,"%"]})]})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[p("button",{className:`btn ${Dr?"primary":"ghost"}`,onClick:()=>{wT(),nc(!0),Or(Fn()),alert("Critical test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[Dr?"\u2713 ":"","Max Critical (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{ST(),nc(!1),Or(Fn()),alert("Critical test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Critical"})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[p("button",{className:`btn ${wn?"primary":"ghost"}`,onClick:()=>{TT(),Jo(!0),Or(Fn()),alert("Crate test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[wn?"\u2713 ":"","Max Crate (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{CT(),Jo(!1),Or(Fn()),alert("Crate test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Crate"})]}),u("button",{className:"btn ghost",onClick:()=>{yr(10),alert("Granted 10 XP - check for critical!")},style:{fontSize:"0.8rem",width:"100%"},children:"Test Grant 10 XP"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Quest Controls"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(ln)||"[]");A.forEach(Q=>Q.completed=!1),localStorage.setItem(ln,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests reset!")},style:{fontSize:"0.8rem"},children:"Reset All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(ln)||"[]");A.forEach(Q=>Q.completed=!0),localStorage.setItem(ln,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests completed!")},style:{fontSize:"0.8rem"},children:"Complete All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(ln)||"[]"),Q=A.find(le=>le.id===1);Q&&(Q.progress=5),localStorage.setItem(ln,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Task Master quest progressed!")},style:{fontSize:"0.8rem"},children:"+5 Tasks (Q1)"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(ln)||"[]"),Q=A.find(le=>le.id===4);Q&&(Q.progress=7),localStorage.setItem(ln,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Streak Keeper quest progressed!")},style:{fontSize:"0.8rem"},children:"+7 Streak (Q4)"}),u("button",{className:"btn ghost",onClick:()=>{const A=JSON.parse(localStorage.getItem(ln)||"[]"),Q=A.find(le=>le.id===5);Q&&(Q.progress=5),localStorage.setItem(ln,JSON.stringify(A)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Level Up quest progressed!")},style:{fontSize:"0.8rem"},children:"+Level 5 (Q5)"})]})]}),u("button",{className:"btn",onClick:()=>T(!1),style:{width:"100%"},children:"Close"})]})]})}),c&&!f&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:p("div",{className:"panel",style:{maxWidth:500,padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:"Quick Add Templates"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16,marginBottom:16},children:Ne.map((A,Q)=>p("button",{onClick:()=>{Ps(A.title,A.xp)},disabled:on()>=(ke.has(4)?6:3),style:{padding:"5px 4px",borderRadius:8,backgroundColor:"var(--bg)",border:"2px solid var(--border)",color:"var(--text)",cursor:on()>=(ke.has(4)?6:3)?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:500,transition:"all 0.2s",opacity:on()>=(ke.has(4)?6:3)?.5:1,textAlign:"center",display:"flex",flexDirection:"column",gap:2,userSelect:"none"},onMouseOver:le=>{on()<(ke.has(4)?6:3)&&(le.target.style.backgroundColor="var(--accent)",le.target.style.color="var(--bg)",le.target.style.borderColor="var(--accent)")},onMouseOut:le=>{le.target.style.backgroundColor="var(--bg)",le.target.style.color="var(--text)",le.target.style.borderColor="var(--border)"},children:[A.title,p("span",{className:"subtle",style:{fontSize:"0.75rem",fontWeight:400,userSelect:"none",pointerEvents:"none"},children:["+",A.xp," XP"]})]},Q))}),u("button",{className:"btn",onClick:()=>d(!1),style:{width:"100%"},children:"Close"})]})}),f&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:p("div",{className:"panel",style:{width:"95vw",maxWidth:450,padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:f.title}),p("div",{style:{marginBottom:16},children:[u("label",{style:{display:"block",marginBottom:8,fontSize:"0.9rem",fontWeight:500},children:"Due Date"}),u("input",{type:"date",className:"input",value:g,onChange:A=>E(A.target.value)})]}),p("div",{style:{marginBottom:20},children:[u("label",{style:{display:"block",marginBottom:8,fontSize:"0.9rem",fontWeight:500},children:"Time"}),p("div",{style:{display:"flex",gap:12},children:[u("select",{className:"input",value:P,onChange:A=>R(Number(A.target.value)),style:{flex:1,color:"var(--text)",backgroundColor:"var(--bg)"},children:[12,1,2,3,4,5,6,7,8,9,10,11].map(A=>u("option",{value:A,style:{color:"white",backgroundColor:"var(--panel)"},children:String(A).padStart(2,"0")},A))}),p("select",{className:"input",value:k,onChange:A=>D(A.target.value),style:{flex:.6,color:"var(--text)",backgroundColor:"var(--bg)"},children:[u("option",{value:"AM",style:{color:"white",backgroundColor:"var(--panel)"},children:"AM"}),u("option",{value:"PM",style:{color:"white",backgroundColor:"var(--panel)"},children:"PM"})]}),u("select",{className:"input",value:y,onChange:A=>_(Number(A.target.value)),style:{flex:1,color:"var(--text)",backgroundColor:"var(--bg)"},children:Array.from({length:12}).map((A,Q)=>u("option",{value:Q*5,style:{color:"white",backgroundColor:"var(--panel)"},children:String(Q*5).padStart(2,"0")},Q))})]})]}),p("div",{style:{display:"flex",gap:12},children:[u("button",{className:"btn ghost",onClick:()=>v(null),style:{flex:1},children:"Back"}),u("button",{className:"btn",onClick:Vi,style:{flex:1},children:"Add Task"})]})]})}),ye&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9998},onClick:()=>K(!1),children:u("div",{className:"panel custom-scrollbar",style:{maxWidth:500,padding:24,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",userSelect:"none",maxHeight:"90vh",overflowY:"auto"},onClick:A=>A.stopPropagation(),children:Ho?p(Vt,{children:[p("div",{style:{textAlign:"center",marginBottom:24},children:[Re?u("div",{children:p("div",{style:{marginBottom:12},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:8},children:"CHOOSE AVATAR"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginBottom:12},children:v1.map(A=>u("button",{className:"btn ghost",onClick:()=>Li(A),style:{fontSize:32,padding:8,border:H.avatar===A&&!H.customAvatarUrl?"2px solid var(--accent)":"2px solid transparent"},children:A},A))}),ke.has(5)?p("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12,marginTop:12},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:8},children:"UPLOAD CUSTOM IMAGE"}),u("input",{type:"file",accept:"image/*",onChange:Fi,style:{display:"block",width:"100%",marginBottom:8,padding:8,borderRadius:4,border:"1px solid var(--border)",backgroundColor:"var(--bg)",color:"var(--text)",cursor:"pointer"}}),Zn&&u("div",{className:"subtle",style:{color:"var(--accent)",fontSize:"0.8rem",marginBottom:8},children:Zn}),H.customAvatarUrl&&u("button",{className:"btn ghost",onClick:()=>or({...H,customAvatarUrl:void 0}),style:{width:"100%"},children:"Remove Custom Image"})]}):p("div",{style:{borderTop:"1px solid var(--border)",paddingTop:12,marginTop:12},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:8},children:"UPLOAD CUSTOM IMAGE"}),u("div",{className:"subtle",style:{fontSize:"0.85rem",marginBottom:8,padding:12,backgroundColor:"var(--bg)",borderRadius:4},children:"\u{1F512} Unlock in the Store for 150 XP to upload custom images"})]}),u("button",{className:"btn ghost",onClick:()=>de(!1),style:{width:"100%",marginTop:12},children:"Done"})]})}):u(Vt,{children:u("div",{style:{width:80,height:80,borderRadius:"50%",backgroundColor:"var(--accent)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:40,margin:"0 auto 12px",border:ke.has(3)?"4px solid var(--accent-2)":"none",cursor:"pointer",backgroundImage:H.customAvatarUrl?`url(${H.customAvatarUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden"},onClick:()=>de(!0),children:!H.customAvatarUrl&&H.avatar})}),V?p("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:12},children:[p("div",{style:{display:"flex",gap:8},children:[u("input",{type:"text",className:"input",placeholder:"Username",value:re,onChange:A=>ee(A.target.value),autoFocus:!0,onKeyPress:A=>A.key==="Enter"&&Sn(),style:{flex:1}}),u("input",{type:"text",className:"input",placeholder:"#1234",value:ue,onChange:A=>_e(A.target.value.replace(/\D/g,"").slice(0,6)),onKeyPress:A=>A.key==="Enter"&&Sn(),style:{width:100}})]}),p("div",{style:{display:"flex",gap:8},children:[u("button",{className:"btn",onClick:an,style:{flex:1},children:"Save"}),u("button",{className:"btn ghost",onClick:()=>$(!1),style:{flex:1},children:"Cancel"})]})]}):p("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:12},children:[p("h2",{style:{margin:0},children:[H.username,p("span",{style:{color:"var(--muted)",fontSize:"0.8em",marginLeft:4},children:["#",H.hashtag||"1000"]})]}),u("button",{className:"btn ghost",onClick:()=>{$(!0),ee(H.username),_e(H.hashtag||"")},style:{padding:"4px 8px",fontSize:"1rem"},children:"\u270F\uFE0F"})]}),p("div",{className:"subtle",children:["Level ",Math.floor(Oe()/100)+1," \u2022 ",Oe()," XP"]}),yt&&u("div",{style:{fontSize:"0.9rem",marginTop:4},children:yt.id==="developer"?p("span",{style:{background:"linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"bold"},children:["\u2728 ",yt.name]}):p("span",{style:{color:"var(--accent)"},children:["\u2728 ",yt.name]})})]}),p("div",{style:{backgroundColor:"var(--bg)",borderRadius:8,padding:16,marginBottom:16,textAlign:"center"},children:[u("div",{style:{fontSize:"2rem",marginBottom:8},children:"\u{1F525}"}),p("div",{style:{fontSize:"1.2rem",fontWeight:500},children:[Rn.current," day streak"]}),p("div",{className:"subtle",style:{fontSize:"0.9rem",marginTop:4},children:["Longest: ",Rn.longest," days"]})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[p("div",{style:{backgroundColor:"var(--bg)",borderRadius:8,padding:12,textAlign:"center"},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:4},children:"Tasks Completed"}),u("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:H.tasksCompleted})]}),p("div",{style:{backgroundColor:"var(--bg)",borderRadius:8,padding:12,textAlign:"center"},children:[u("div",{className:"subtle",style:{fontSize:"0.8rem",marginBottom:4},children:"Events Created"}),u("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:H.eventsCreated})]})]}),p("div",{style:{marginBottom:16},children:[p("div",{style:{textAlign:"center",marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"TITLES"}),p("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:8},children:[Qo.length,"/",il.length]}),u("div",{style:{width:"100%",height:6,background:"var(--border)",borderRadius:3,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Qo.length/il.length*100}%`,background:"linear-gradient(90deg, var(--accent), #a78bfa)",transition:"width 0.3s ease"}})})]}),u("div",{className:"custom-scrollbar",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:12,maxHeight:"300px",overflowY:"auto"},children:il.map(A=>{const Q=Qo.some(we=>we.id===A.id),le=(yt==null?void 0:yt.id)===A.id;return p("div",{onClick:()=>Q&&ou(le?null:A.id),style:{display:"flex",gap:8,padding:10,background:le?"linear-gradient(135deg, rgba(167, 139, 250, 0.3) 0%, rgba(147, 112, 219, 0.3) 100%)":Q?"linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(22, 163, 74, 0.15) 100%)":"rgba(0, 0, 0, 0.1)",border:le?"2px solid var(--accent)":Q?"1px solid rgba(34, 197, 94, 0.5)":"1px solid var(--border)",borderRadius:6,cursor:Q?"pointer":"default",transition:"all 0.2s ease",alignItems:"flex-start"},onMouseEnter:we=>{Q&&(we.currentTarget.style.transform="translateY(-2px)",we.currentTarget.style.boxShadow="0 4px 12px rgba(167, 139, 250, 0.3)")},onMouseLeave:we=>{we.currentTarget.style.transform="translateY(0)",we.currentTarget.style.boxShadow="none"},children:[u("div",{style:{fontSize:"1.5rem",flexShrink:0},children:Q?"\u2728":"\u{1F512}"}),p("div",{style:{flex:1,minWidth:0},children:[p("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:2},children:[A.id==="developer"?u("span",{style:{background:"linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:A.name}):A.name,le&&u("span",{style:{marginLeft:4,color:"var(--accent)"},children:"\u2605"})]}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)",lineHeight:"1.3",marginBottom:4},children:A.description}),u("div",{style:{fontSize:"0.65rem",color:"var(--accent)",fontStyle:"italic"},children:A.source})]})]},A.id)})})]}),p("div",{style:{marginBottom:16},children:[p("div",{style:{textAlign:"center",marginBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"MEDALS"}),p("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:8},children:[Pr.filter(A=>A.earned).length,"/",Pr.length]}),u("div",{style:{width:"100%",height:6,background:"var(--border)",borderRadius:3,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Pr.filter(A=>A.earned).length/Pr.length*100}%`,background:"linear-gradient(90deg, var(--accent), #fbbf24)",transition:"width 0.3s ease"}})})]}),u("div",{className:"custom-scrollbar",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:12,maxHeight:"300px",overflowY:"auto"},children:Pr.map(A=>p("div",{style:{display:"flex",gap:8,padding:10,background:A.earned?"linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.15) 100%)":"rgba(0, 0, 0, 0.1)",border:A.earned?"1px solid rgba(251, 191, 36, 0.5)":"1px solid var(--border)",borderRadius:6,cursor:"pointer",transition:"all 0.2s ease",alignItems:"flex-start"},onMouseEnter:Q=>{A.earned&&(Q.currentTarget.style.transform="translateY(-2px)",Q.currentTarget.style.boxShadow="0 4px 12px rgba(251, 191, 36, 0.3)")},onMouseLeave:Q=>{Q.currentTarget.style.transform="translateY(0)",Q.currentTarget.style.boxShadow="none"},children:[u("div",{style:{fontSize:"1.5rem",flexShrink:0},children:A.earned?A.icon:"\u{1F512}"}),p("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontSize:"0.8rem",fontWeight:"bold",marginBottom:2},children:A.name}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)",lineHeight:"1.3"},children:A.description}),A.earned&&A.earnedDate&&p("div",{style:{fontSize:"0.65rem",color:"var(--accent)",marginTop:4},children:["\u2713 ",new Date(A.earnedDate).toLocaleDateString()]})]})]},A.id))})]}),p("div",{style:{marginBottom:16,textAlign:"center"},children:[u("h3",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"ABOUT"}),u("div",{className:"subtle",style:{fontSize:"0.9rem"},children:"An ADHD explorer on a journey of self-care and productivity. Crushing goals one task at a time! \u{1F680}"})]}),u("button",{className:"btn ghost",onClick:lc,style:{width:"100%",marginBottom:8,backgroundColor:"rgba(255,68,68,0.2)",color:"var(--text)"},children:"Logout"}),u("button",{className:"btn",onClick:()=>K(!1),style:{width:"100%"},children:"Close"})]}):p("div",{children:[p("div",{style:{display:"flex",gap:8,marginBottom:24,borderBottom:"1px solid var(--border)",paddingBottom:0},children:[u("button",{className:yn==="login"?"btn":"btn ghost",onClick:()=>{xr("login"),ze(""),vn("")},style:{flex:1,borderBottom:yn==="login"?"2px solid var(--accent)":"none"},children:"Login"}),u("button",{className:yn==="signup"?"btn":"btn ghost",onClick:()=>{xr("signup"),ze(""),vn("")},style:{flex:1,borderBottom:yn==="signup"?"2px solid var(--accent)":"none"},children:"Sign Up"})]}),yn==="login"?p("div",{children:[u("h2",{style:{textAlign:"center",marginBottom:24,fontSize:"1.5rem"},children:"Login"}),p("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"EMAIL"}),u("input",{type:"email",className:"input",placeholder:"Enter your email",value:Ke,onChange:A=>j(A.target.value),onKeyDown:A=>A.key==="Enter"&&As()})]}),p("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"PASSWORD"}),u("input",{type:"password",className:"input",placeholder:"Enter your password",value:ae,onChange:A=>te(A.target.value),onKeyDown:A=>A.key==="Enter"&&As()})]}),Ve&&u("div",{style:{backgroundColor:"#ff4444",color:"white",padding:12,borderRadius:4,marginBottom:16,fontSize:"0.9rem"},children:Ve}),u("button",{className:"btn",onClick:As,style:{width:"100%",marginBottom:12},children:"Login"}),u("button",{className:"btn ghost",onClick:()=>K(!1),style:{width:"100%"},children:"Close"})]}):p("div",{children:[u("h2",{style:{textAlign:"center",marginBottom:24,fontSize:"1.5rem"},children:"Create Account"}),p("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"EMAIL"}),u("input",{type:"email",className:"input",placeholder:"Enter your email",value:Ze,onChange:A=>nr(A.target.value),onKeyDown:A=>A.key==="Enter"&&Mi()})]}),p("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"PASSWORD"}),u("input",{type:"password",className:"input",placeholder:"Create a password (min 6 chars)",value:rr,onChange:A=>ir(A.target.value),onKeyDown:A=>A.key==="Enter"&&Mi()})]}),p("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"USERNAME"}),u("input",{type:"text",className:"input",placeholder:"Choose a username",value:je,onChange:A=>tc(A.target.value),onKeyDown:A=>A.key==="Enter"&&Mi()})]}),p("div",{style:{marginBottom:16},children:[u("label",{className:"subtle",style:{fontSize:"0.8rem",display:"block",marginBottom:6},children:"HASHTAG (Optional)"}),u("div",{style:{fontSize:"0.85rem",marginBottom:8,color:"var(--muted)"},children:"Leave blank to auto-generate"}),u("input",{type:"text",className:"input",placeholder:"e.g., 1234 (or leave blank)",value:Go,onChange:A=>Ko(A.target.value),onKeyDown:A=>A.key==="Enter"&&Mi()})]}),kr&&u("div",{style:{backgroundColor:"#ff4444",color:"white",padding:12,borderRadius:4,marginBottom:16,fontSize:"0.9rem"},children:kr}),u("button",{className:"btn",onClick:Mi,style:{width:"100%",marginBottom:12},children:"Create Account"}),u("button",{className:"btn ghost",onClick:()=>K(!1),style:{width:"100%"},children:"Close"})]})]})})})]})},kD=()=>{const{date:t}=Bb(),{getTasksForDate:e}=Wo(),n=e(t);return p("div",{className:"day-view",children:[p("h1",{className:"text-2xl font-bold",children:["Tasks for ",t]}),u("div",{className:"tasks-list",children:n.length>0?n.map(r=>u(Dg,{task:r},r.id)):u("p",{children:"No tasks for this day."})})]})},AD=({days:t,onDayClick:e=()=>{}})=>u(Vt,{children:t.map((n,r)=>u(yT,{date:n,onClick:e},r))}),PD=()=>{const{events:t,tasks:e}=Wo();return p("div",{className:"week-view",children:[u("h1",{className:"text-2xl font-bold",children:"Weekly Overview"}),u("div",{className:"week-rows",children:t.map((n,r)=>u(AD,{event:n},r))}),u("div",{className:"tasks",children:e.map((n,r)=>u(Dg,{task:n},r))})]})},RD=()=>{const{currentMonth:t,events:e}=Wo();return p("div",{className:"month-view",children:[u("h1",{className:"text-2xl font-bold mb-4",children:t}),u(bT,{events:e,view:"month"})]})},DT=M.exports.createContext(void 0),_1="adhd_prefs_v1",w1=t=>{const e=document.documentElement,n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;e.classList.remove("theme-light","theme-sunset","theme-ocean"),t==="light"?e.classList.add("theme-light"):t==="dark"||(t==="sunset"?e.classList.add("theme-sunset"):t==="ocean"?e.classList.add("theme-ocean"):t==="system"&&(n||e.classList.add("theme-light")))},ND=({children:t})=>{const[e,n]=M.exports.useState(()=>{try{const i=localStorage.getItem(_1);if(i)return JSON.parse(i)}catch{}return{theme:"dark",notificationsEnabled:!0}});M.exports.useEffect(()=>{w1(e.theme);try{localStorage.setItem(_1,JSON.stringify(e))}catch{}},[e]);const r=i=>{n(i)};return M.exports.useEffect(()=>{const i=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{e.theme==="system"&&w1("system")};return i&&i.addEventListener?i.addEventListener("change",s):i&&i.addListener&&i.addListener(s),()=>{i&&i.removeEventListener?i.removeEventListener("change",s):i&&i.removeListener&&i.removeListener(s)}},[e.theme]),u(DT.Provider,{value:{preferences:e,setPreferences:r},children:t})},DD=()=>{const t=M.exports.useContext(DT);if(!t)throw new Error("usePreferences must be used within a PreferencesProvider");return t},OD="adhd_purchases",MD=()=>{var c;const{preferences:t,setPreferences:e}=DD();M.exports.useState(t.theme||"dark");const[n,r]=M.exports.useState((c=t.notificationsEnabled)!=null?c:!0),[i,s]=M.exports.useState(()=>{const d=localStorage.getItem(OD);return d?new Set(JSON.parse(d)):new Set}),o=d=>{e({...t,theme:d})},l=()=>{e({...t,notificationsEnabled:n})};return u("div",{className:"container",children:p("div",{className:"panel",style:{maxWidth:900,margin:"24px auto"},children:[p("div",{style:{textAlign:"center",marginBottom:24},children:[u("h2",{style:{margin:"0 0 8px 0",fontSize:"2.5rem"},children:"Settings"}),u("div",{className:"subtle",style:{fontSize:"1.1rem"},children:"Customize your experience"})]}),p("div",{className:"settings-grid",children:[p("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Appearance"}),p("div",{className:"setting-row",children:[u("label",{children:"Theme"}),p("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[u("button",{className:`btn ${t.theme==="light"?"":"ghost"}`,onClick:()=>o("light"),children:"Light"}),u("button",{className:`btn ${t.theme==="dark"?"":"ghost"}`,onClick:()=>o("dark"),children:"Dark"}),i.has(1)&&u("button",{className:`btn ${t.theme==="sunset"?"":"ghost"}`,onClick:()=>o("sunset"),children:"Sunset"}),i.has(2)&&u("button",{className:`btn ${t.theme==="ocean"?"":"ghost"}`,onClick:()=>o("ocean"),children:"Ocean"})]})]})]}),p("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Notifications"}),p("div",{className:"setting-row",children:[u("label",{style:{marginRight:12},children:"Enable notifications"}),p("label",{className:"switch",children:[u("input",{type:"checkbox",checked:n,onChange:d=>r(d.target.checked)}),u("span",{className:"slider"})]})]}),u("div",{className:"subtle",style:{marginTop:8},children:"Turn on desktop notifications for reminders and XP achievements."})]}),p("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Account"}),p("div",{className:"setting-row",children:[u("label",{children:"Export data"}),u("div",{children:u($e,{onClick:()=>alert("Exporting..."),children:"Export JSON"})})]}),p("div",{style:{marginTop:12},className:"setting-row",children:[u("label",{children:"Reset Level"}),u("div",{children:u($e,{variant:"ghost",onClick:()=>{confirm("Reset your XP to zero? This cannot be undone.")&&(nl(),alert("XP reset to 0"))},children:"Reset XP"})})]})]}),p("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Support"}),u("div",{className:"subtle",style:{marginBottom:12},children:"Need help with the app? Check out these resources:"}),p("div",{className:"setting-row",style:{flexDirection:"column",gap:8},children:[u($e,{onClick:()=>window.open("https://github.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4DA} View Documentation"}),u($e,{variant:"ghost",onClick:()=>window.open("https://github.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F41B} Report a Bug"}),u($e,{variant:"ghost",onClick:()=>window.open("https://github.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4A1} Request a Feature"})]})]}),p("section",{className:"settings-section panel",style:{padding:16},children:[u("h4",{style:{marginTop:0},children:"Contact Developer"}),u("div",{className:"subtle",style:{marginBottom:12},children:"Have feedback or just want to say hello?"}),p("div",{className:"setting-row",style:{flexDirection:"column",gap:8},children:[u($e,{onClick:()=>window.location.href="mailto:developer@example.com",style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4E7} Send Email"}),u($e,{variant:"ghost",onClick:()=>window.open("https://twitter.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1D54F} Twitter"}),u($e,{variant:"ghost",onClick:()=>window.open("https://discord.com","_blank"),style:{width:"100%",justifyContent:"flex-start"},children:"\u{1F4AC} Discord Community"})]})]})]}),u("div",{style:{marginTop:24,textAlign:"center"},children:u($e,{onClick:l,children:"Save"})})]})})};const af=({tier:t,cost:e,costType:n,rewards:r,onOpen:i,isDisabled:s,isFree:o=!1,cooldownMs:l=0,lastOpenedTime:c=0})=>{const[d,f]=M.exports.useState(!1),[v,g]=M.exports.useState(null),[E,P]=M.exports.useState(0),[R,y]=M.exports.useState(0);Ee.useEffect(()=>{if(!o)return;const S=()=>{const x=Date.now()-c,N=Math.max(0,l-x);y(N)};S();const T=setInterval(S,1e3);return()=>clearInterval(T)},[o,c,l]);const _={bronze:"#CD7F32",silver:"#C0C0C0",gold:"#FFD700"},k={bronze:"\u{1F4E6}",silver:"\u{1F381}",gold:"\u{1F48E}"},D=()=>{if(s||d||o&&R>0)return;f(!0),P(0);let S=0;const T=setInterval(()=>{S+=1,P(S%r.length)},100);setTimeout(()=>{clearInterval(T);const C=r[Math.floor(Math.random()*r.length)];g(C),i(C)},2e3)},O=S=>{const T=Math.floor(S/36e5),C=Math.floor(S%(1e3*60*60)/(1e3*60));return`${T}h ${C}m`},B=S=>S.type==="xp"?`${S.amount} XP`:`${S.amount} \u{1F48E}`,F=k[t],b=_[t];return u("div",{className:"loot-crate-container",children:p("div",{className:"panel",style:{padding:16,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[p("div",{children:[p("h4",{style:{margin:"0 0 8px 0",textTransform:"capitalize"},children:[F," ",t," Crate"]}),u("div",{className:"subtle",style:{fontSize:"0.9rem",marginBottom:12},children:"Open for random rewards"})]}),d&&!v?u("div",{className:"loot-reward-display",children:u("div",{className:"reward-scroll",style:{color:b,fontSize:"1.5rem",fontWeight:"bold"},children:B(r[E])})}):v?p("div",{className:"loot-reward-display",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%)"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#22c55e"},children:B(v)}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)",marginTop:8},children:"You won!"})]}):u("div",{style:{fontSize:"3rem",margin:"12px 0"},children:F}),u("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,marginTop:12},children:v?u("button",{onClick:()=>{g(null),f(!1)},className:"btn primary",style:{padding:"8px 16px",fontSize:"0.9rem",backgroundColor:"var(--primary)",border:"1px solid var(--accent)",color:"white",fontWeight:"bold"},children:"Close"}):o?p(Vt,{children:[u("button",{onClick:D,disabled:d||R>0,className:"btn primary",style:{padding:"8px 16px",fontSize:"0.9rem",opacity:R>0?.5:1,cursor:R>0?"not-allowed":"pointer"},children:d?"...":"Open"}),u("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#22c55e"},children:R>0?O(R):"FREE"})]}):p(Vt,{children:[u("button",{onClick:D,disabled:s||d,className:"btn primary",style:{padding:"8px 16px",fontSize:"0.9rem",opacity:s?.5:1,cursor:s?"not-allowed":"pointer"},children:d?"...":"Open"}),u("span",{style:{fontSize:"0.9rem",fontWeight:"bold",color:n==="xp"?"#6366f1":"#ec4899"},children:n==="xp"?`${e} XP`:`${e} \u{1F48E}`})]})})]})})},S1="adhd_purchases",E1="adhd_premium_purchases",lf="adhd_plus_subscription",T1="adhd_bronze_crate_last_opened",LD=()=>{const[t,e]=M.exports.useState(Oe()),[n,r]=M.exports.useState(ot()),[i,s]=M.exports.useState(()=>{const C=localStorage.getItem(S1);return C?new Set(JSON.parse(C)):new Set}),[o,l]=M.exports.useState(()=>{const C=localStorage.getItem(E1);return C?new Set(JSON.parse(C)):new Set}),[c,d]=M.exports.useState(()=>{const C=localStorage.getItem(lf);return C?JSON.parse(C):{isActive:!1,expiresAt:0,lastClaimedMonthlyGems:""}}),[f,v]=M.exports.useState(()=>{const C=localStorage.getItem(T1);return C?Number(C):0}),[g,E]=M.exports.useState(()=>Lt()),P=c.isActive&&c.expiresAt>Date.now(),R=()=>P?Math.ceil((c.expiresAt-Date.now())/(1e3*60*60*24)):0,y=()=>new Date().toDateString(),_=P&&c.lastClaimedMonthlyGems!==y(),k=[{id:1,name:"Theme Unlock: Sunset",cost:100,description:"Unlock a warm sunset color theme",type:"xp"},{id:2,name:"Theme Unlock: Ocean",cost:100,description:"Unlock a cool ocean color theme",type:"xp"},{id:3,name:"Custom Avatar Border",cost:150,description:"Personalize your profile with a custom border",type:"xp"},{id:4,name:"Extra Task Slots",cost:200,description:"Double your daily task capacity",type:"xp"},{id:5,name:"Custom Avatar Upload",cost:150,description:"Upload custom images for your avatar",type:"xp"}],D=[{id:101,name:"Premium Avatar Frame",cost:99,description:"Exclusive golden frame for your avatar",type:"gems"},{id:102,name:"Custom Profile Banner",cost:149,description:"Personalize your profile with a custom banner",type:"gems"},{id:103,name:"XP Booster (7 days)",cost:199,description:"+50% XP gain for 7 days",type:"gems"},{id:104,name:"Unlimited Tasks",cost:299,description:"Unlock unlimited daily tasks",type:"gems"},{id:105,name:"Exclusive Badge",cost:79,description:"Show off your premium status with an exclusive badge",type:"gems"}],O=(C,x,N,w)=>{if((w==="xp"?i:o).has(C)){alert("You already own this item!");return}if(w==="xp")if(t>=x){const J=t-x;xn(J),e(J);const se=new Set(i);se.add(C),s(se),localStorage.setItem(S1,JSON.stringify(Array.from(se))),alert(`Purchased: ${N}!`),window.dispatchEvent(new Event("profileUpdated"))}else alert("Not enough XP to purchase this item.");else if(n>=x){const J=n-x;Ot(J),r(J);const se=new Set(o);se.add(C),l(se),localStorage.setItem(E1,JSON.stringify(Array.from(se))),alert(`Purchased: ${N}!`),window.dispatchEvent(new Event("currencyUpdated"))}else alert("Not enough Gems to purchase this item.")},B=(C,x)=>{const N=n+C;Ot(N),r(N),alert(`Successfully purchased ${C} Gems for ${x}!`),window.dispatchEvent(new Event("currencyUpdated"))},F=()=>{const C=Date.now()+2592e6,x={isActive:!0,expiresAt:C,lastClaimedMonthlyGems:""};d(x),localStorage.setItem(lf,JSON.stringify(x)),alert("Successfully subscribed to Plus! \u{1F389}"),window.dispatchEvent(new Event("subscriptionUpdated"))},b=()=>{if(!_){alert("You can only claim daily gems once per day!");return}const C=n+10;Ot(C),r(C);const x={...c,lastClaimedMonthlyGems:y()};d(x),localStorage.setItem(lf,JSON.stringify(x)),alert("Claimed 10 daily gems! \u{1F48E}"),window.dispatchEvent(new Event("currencyUpdated"))},S=(C,x)=>(x==="xp"?i:o).has(C),T=(C,x,N)=>{if(t<N){alert("Not enough XP to buy this pet!");return}if(yD(C)){const G=Oe();e(G),E(Lt()),alert(`Welcome ${x}! Your new companion has arrived! \u{1F389}`),window.dispatchEvent(new Event("currencyUpdated"))}};return p("div",{className:"container",children:[p("div",{className:"header",style:{textAlign:"center"},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:16},children:"Store"}),u("div",{className:"subtle",style:{fontSize:"1.1rem"},children:"Spend your hard-earned XP and Gems on exclusive items"})]}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,gap:16,flexWrap:"wrap"},children:[p("div",{className:"panel",style:{padding:16},children:[u("h3",{style:{margin:0},children:"Your XP"}),p("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#6366f1",marginTop:8},children:[t," XP"]})]}),p("div",{className:"panel",style:{padding:16},children:[u("h3",{style:{margin:0},children:"Your Gems"}),p("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ec4899",marginTop:8},children:["\u{1F48E} ",n]})]})]}),u("div",{style:{marginBottom:32},children:u("div",{className:"panel",style:{padding:24,background:"linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",border:"2px solid rgba(236, 72, 153, 0.5)",borderRadius:12,position:"relative"},children:p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:20},children:[p("div",{style:{flex:1},children:[u("h2",{style:{margin:"0 0 8px 0",fontSize:"1.8rem"},children:"\u2728 ADHD Plus"}),u("div",{className:"subtle",style:{fontSize:"1rem",marginBottom:16},children:"Unlock exclusive benefits and monthly rewards"}),p("div",{style:{marginBottom:16},children:[u("h4",{style:{margin:"0 0 12px 0",color:"#ec4899"},children:"\u2705 Benefits:"}),p("ul",{style:{margin:0,paddingLeft:20,lineHeight:"1.8"},children:[p("li",{children:["\u{1F4E6} ",u("strong",{children:"10 Gems Daily"})," - Claim once per day"]}),p("li",{children:["\u2B50 ",u("strong",{children:"2x XP Multiplier"})," - Earn XP faster"]}),p("li",{children:["\u{1F3A8} ",u("strong",{children:"Exclusive Themes"})," - Premium color schemes"]}),p("li",{children:["\u{1F3C6} ",u("strong",{children:"Premium Badge"})," - Show your VIP status"]}),p("li",{children:["\u{1F381} ",u("strong",{children:"Bonus Items"})," - Early access to new store items"]})]})]})]}),u("div",{style:{minWidth:320,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",paddingTop:40},children:P?p("div",{style:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",padding:16,borderRadius:8,textAlign:"center",border:"2px solid #6366f1"},children:[u("div",{style:{color:"#6366f1",fontWeight:"bold",marginBottom:12},children:"\u2713 Active Subscription"}),p("div",{className:"subtle",style:{marginBottom:12},children:["Expires in ",R()," days"]}),u($e,{onClick:b,disabled:!_,style:{width:"100%"},children:_?"\u{1F381} Claim 10 Gems":"\u2713 Gems Claimed Today"})]}):p("div",{style:{background:"var(--panel)",padding:32,borderRadius:8,textAlign:"center",width:"100%"},children:[u("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#ec4899",marginBottom:16},children:"$9.99/mo"}),u($e,{onClick:F,style:{width:"100%",marginBottom:8},children:"Subscribe Now"}),u("div",{className:"subtle",style:{fontSize:"0.85rem"},children:"Cancel anytime"})]})})]})})}),p("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"Get Premium Gems"}),p("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:16,marginBottom:24},children:[p("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[p("div",{children:[u("h4",{style:{margin:"0 0 8px 0"},children:"\u{1F48E} 100 Gems"}),u("div",{className:"subtle",style:{fontSize:"0.9rem"},children:"Starter Pack"})]}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[u("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ec4899"},children:"$4.99"}),u($e,{onClick:()=>B(100,"$4.99"),style:{fontSize:"0.85rem"},children:"Buy"})]})]}),p("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",justifyContent:"space-between",border:"2px solid #ec4899"},children:[p("div",{children:[u("h4",{style:{margin:"0 0 8px 0"},children:"\u{1F48E} 550 Gems"}),u("div",{className:"subtle",style:{fontSize:"0.9rem",color:"#ec4899"},children:"\u2B50 Best Value (+50 bonus)"})]}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[u("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ec4899"},children:"$19.99"}),u($e,{onClick:()=>B(550,"$19.99"),style:{fontSize:"0.85rem"},children:"Buy"})]})]}),p("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[p("div",{children:[u("h4",{style:{margin:"0 0 8px 0"},children:"\u{1F48E} 1200 Gems"}),u("div",{className:"subtle",style:{fontSize:"0.9rem"},children:"Premium Pack"})]}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[u("span",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#ec4899"},children:"$39.99"}),u($e,{onClick:()=>B(1200,"$39.99"),style:{fontSize:"0.85rem"},children:"Buy"})]})]})]})]}),p("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"\u{1F3B2} Loot Crates - Random Rewards!"}),p("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:16,marginBottom:24},children:[u(af,{tier:"bronze",cost:25,costType:"gems",isFree:!0,cooldownMs:12*60*60*1e3,lastOpenedTime:f,rewards:[{type:"gems",amount:10},{type:"gems",amount:15},{type:"xp",amount:50},{type:"xp",amount:75},{type:"gems",amount:20},{type:"xp",amount:100}],onOpen:C=>{if(C.type==="xp"){const x=t+C.amount;xn(x),e(x)}else{const x=n+C.amount;Ot(x),r(x)}v(Date.now()),localStorage.setItem(T1,String(Date.now())),window.dispatchEvent(new Event("currencyUpdated"))},isDisabled:!1}),u(af,{tier:"silver",cost:60,costType:"gems",rewards:[{type:"gems",amount:30},{type:"gems",amount:50},{type:"xp",amount:150},{type:"xp",amount:200},{type:"gems",amount:75},{type:"xp",amount:250},{type:"gems",amount:100}],onOpen:C=>{if(C.type==="xp"){const x=t+C.amount;xn(x),e(x)}else{const x=n+C.amount;Ot(x),r(x)}window.dispatchEvent(new Event("currencyUpdated"))},isDisabled:n<60}),u(af,{tier:"gold",cost:150,costType:"gems",rewards:[{type:"gems",amount:100},{type:"gems",amount:150},{type:"xp",amount:400},{type:"xp",amount:500},{type:"gems",amount:200},{type:"xp",amount:600},{type:"gems",amount:250},{type:"xp",amount:750}],onOpen:C=>{if(C.type==="xp"){const x=t+C.amount;xn(x),e(x)}else{const x=n+C.amount;Ot(x),r(x)}window.dispatchEvent(new Event("currencyUpdated"))},isDisabled:n<150})]})]}),p("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"Premium Items (Gems)"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:D.map(C=>p("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[u("h4",{style:{margin:"0 0 8px 0"},children:C.name}),u("p",{style:{margin:"0 0 12px 0",color:"#9ca3af"},children:C.description}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[p("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#ec4899"},children:["\u{1F48E} ",C.cost]}),u($e,{onClick:()=>O(C.id,C.cost,C.name,"gems"),variant:S(C.id,"gems")?"ghost":n>=C.cost?void 0:"ghost",disabled:S(C.id,"gems")||n<C.cost,children:S(C.id,"gems")?"Owned":"Buy"})]})]},C.id))})]}),p("div",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"Pet Shop (Companion Pets)"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:Mg.map(C=>{const x=vD(C.petId);return p("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column"},children:[u("div",{style:{fontSize:"3rem",marginBottom:12,textAlign:"center"},children:C.emoji}),u("h4",{style:{margin:"0 0 8px 0"},children:C.name}),p("p",{style:{margin:"0 0 12px 0",color:"#9ca3af",fontSize:"0.9rem"},children:["Starts at Level ",C.presetLevel]}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[p("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:[C.cost," XP"]}),u($e,{onClick:()=>T(C.petId,C.name,C.cost),variant:x?"ghost":t>=C.cost?void 0:"ghost",disabled:x||t<C.cost,children:x?"Owned":"Buy"})]})]},C.petId)})})]}),p("div",{style:{marginBottom:120},children:[u("h2",{style:{marginBottom:16},children:"Free Items (XP)"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:k.map(C=>p("div",{className:"panel",style:{padding:16,display:"flex",flexDirection:"column"},children:[u("h4",{style:{margin:"0 0 8px 0"},children:C.name}),u("p",{style:{margin:"0 0 12px 0",color:"#9ca3af"},children:C.description}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[p("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#6366f1"},children:[C.cost," XP"]}),u($e,{onClick:()=>O(C.id,C.cost,C.name,"xp"),variant:S(C.id,"xp")?"ghost":t>=C.cost?void 0:"ghost",disabled:S(C.id,"xp")||t<C.cost,children:S(C.id,"xp")?"Purchased":"Buy"})]})]},C.id))})]})]})},FD="adhd_profile",VD="adhd_xp",cf="adhd_leaderboard_monthly",UD="adhd_friends",C1="adhd_leaderboard_reset_date",BD=()=>{const[t,e]=M.exports.useState([]),[n,r]=M.exports.useState(null),[i,s]=M.exports.useState("global"),[o,l]=M.exports.useState(new Set),[c,d]=M.exports.useState({daysLeft:0,hoursLeft:0,minutesLeft:0,totalDaysLeft:0}),f=()=>{const R=new Date,_=new Date(R.getFullYear(),R.getMonth()+1,1).getTime()-R.getTime(),k=Math.floor(_/(1e3*60*60*24)),D=Math.floor(_%(1e3*60*60*24)/(1e3*60*60)),O=Math.floor(_%(1e3*60*60)/(1e3*60));return{daysLeft:k,hoursLeft:D,minutesLeft:O,totalDaysLeft:k}},v=()=>{const R=new Date,y=`${R.getFullYear()}-${R.getMonth()}`;return localStorage.getItem(C1)!==y?(localStorage.setItem(C1,y),localStorage.removeItem(cf),!0):!1};M.exports.useEffect(()=>{try{v();const R=f();d(R);const y=setInterval(()=>{const N=f();d(N)},6e4),_=localStorage.getItem(FD),k=_?JSON.parse(_):{username:"Player",avatar:"\u{1F464}"},D=localStorage.getItem(VD),O=D?JSON.parse(D):{current:0,total:0},B=Math.floor(O.total/100)+1,F=localStorage.getItem(UD),b=F?new Set(JSON.parse(F)):new Set;l(b);let S=localStorage.getItem(cf),T=[];if(S)try{const N=JSON.parse(S);T=Array.isArray(N)?N.filter(w=>w&&typeof w.xp=="number"):[]}catch{T=[]}const C={id:"player",username:k.username,avatar:k.avatar||"\u{1F464}",xp:O.total||0,level:B};T=T.filter(N=>N&&N.id!=="player"),T.push(C),T.sort((N,w)=>(w.xp||0)-(N.xp||0));const x=T.findIndex(N=>N.id==="player")+1;return r(x),e(T),localStorage.setItem(cf,JSON.stringify(T)),()=>clearInterval(y)}catch(R){console.error("Error loading leaderboard:",R),e([])}},[]);const g=t.length>0?t:[{id:"1",username:"You",avatar:"\u{1F31F}",xp:500,level:6},{id:"2",username:"TaskMaster",avatar:"\u{1F680}",xp:1200,level:13},{id:"3",username:"FocusNinja",avatar:"\u{1F9D8}",xp:950,level:10},{id:"4",username:"ProductivityKing",avatar:"\u{1F451}",xp:850,level:9},{id:"5",username:"HabitBuilder",avatar:"\u{1F3D7}\uFE0F",xp:750,level:8}],E=i==="friends"?g.filter(R=>R.id==="player"||o.has(R.id)):g,P=E.findIndex(R=>R.id==="player")+1;return u("div",{className:"container",children:p("div",{className:"panel",style:{maxWidth:700,margin:"24px auto"},children:[p("div",{style:{marginBottom:24,textAlign:"center"},children:[u("h2",{style:{margin:"0 0 8px 0"},children:"\u{1F3C6} Leaderboards"}),u("div",{className:"subtle",children:"Compete with others. Complete tasks. Earn XP."}),p("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(99, 102, 241, 0.1)",borderRadius:6,border:"1px solid var(--primary)",fontSize:"0.85rem",color:"var(--text)"},children:["Resets Monthly \u2022 Next reset in ",c.daysLeft,"d ",c.hoursLeft,"h ",c.minutesLeft,"m"]})]}),p("div",{style:{display:"flex",gap:12,marginBottom:24,borderBottom:"1px solid var(--border)",paddingBottom:12,justifyContent:"center"},children:[u("button",{onClick:()=>s("global"),style:{padding:"8px 16px",border:"none",background:i==="global"?"var(--primary)":"transparent",color:i==="global"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:i==="global"?"bold":"normal",fontSize:"0.95rem"},children:"\u{1F30D} Global"}),u("button",{onClick:()=>s("friends"),style:{padding:"8px 16px",border:"none",background:i==="friends"?"var(--primary)":"transparent",color:i==="friends"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:i==="friends"?"bold":"normal",fontSize:"0.95rem"},children:"\u{1F465} Friends"})]}),P>0&&p("div",{style:{background:"var(--panel)",border:"2px solid var(--primary)",borderRadius:8,padding:16,marginBottom:24,textAlign:"center"},children:[u("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:4},children:"YOUR RANK"}),p("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--primary)"},children:["#",P]})]}),E.length===0?p("div",{style:{textAlign:"center",padding:32,color:"var(--text-secondary)"},children:[u("div",{style:{fontSize:"2rem",marginBottom:12},children:"\u{1F465}"}),u("div",{children:"No friends on the leaderboard yet!"})]}):u("div",{style:{display:"flex",flexDirection:"column",gap:12},children:E.map((R,y)=>p("div",{style:{display:"flex",alignItems:"center",gap:12,padding:12,background:"var(--panel)",borderRadius:8,border:R.id==="player"?"2px solid var(--primary)":"1px solid var(--border)"},children:[u("div",{style:{minWidth:32,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"1.2rem"},children:y===0?"\u{1F947}":y===1?"\u{1F948}":y===2?"\u{1F949}":`#${y+1}`}),u("div",{style:{fontSize:"1.8rem",minWidth:40,textAlign:"center"},children:R.avatar}),p("div",{style:{flex:1},children:[p("div",{style:{fontWeight:"bold",marginBottom:4},children:[R.username,R.id==="player"&&u("span",{style:{color:"var(--primary)",marginLeft:8},children:"(You)"})]}),p("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:["Level ",R.level]})]}),p("div",{style:{textAlign:"right",minWidth:80},children:[u("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--primary)"},children:(R.xp||0).toLocaleString()}),u("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"XP"})]})]},R.id))}),p("div",{style:{marginTop:32,padding:16,background:"var(--panel)",borderRadius:8,textAlign:"center"},children:[u("div",{className:"subtle",style:{marginBottom:12},children:"Complete tasks and focus sessions to earn XP and climb the leaderboard!"}),u($e,{onClick:()=>window.location.href="/",children:"Back to Dashboard"})]})]})})},uf="adhd_quests_progress",zD=[{id:1,title:"Task Master",description:"Complete 5 tasks",category:"daily",progress:0,target:5,reward:{xp:50,gems:10},icon:"\u2705",completed:!1},{id:2,title:"Focus Time",description:"Use the focus timer for 30 minutes",category:"daily",progress:0,target:30,reward:{xp:30,gems:5},icon:"\u23F1\uFE0F",completed:!1},{id:3,title:"Social Butterfly",description:"Add 3 friends to your social circle",category:"weekly",progress:0,target:3,reward:{xp:100,gems:25},icon:"\u{1F465}",completed:!1},{id:4,title:"Streak Keeper",description:"Maintain a 7-day streak",category:"weekly",progress:0,target:7,reward:{xp:150,gems:30},icon:"\u{1F525}",completed:!1},{id:5,title:"Level Up",description:"Reach Level 5",category:"long-term",progress:0,target:5,reward:{xp:500,gems:100},icon:"\u2B50",completed:!1},{id:6,title:"Premium Journey",description:"Subscribe to Plus for 30 days",category:"long-term",progress:0,target:30,reward:{xp:300,gems:150},icon:"\u{1F48E}",completed:!1}],jD=()=>{const{tasks:t}=Wo(),[e,n]=M.exports.useState(()=>{const c=localStorage.getItem(uf);return c?JSON.parse(c):zD});M.exports.useEffect(()=>{const c=t.filter(E=>{const P=new Date(E.dueDate).toDateString(),R=new Date().toDateString();return P===R&&E.completed}).length,f=JSON.parse(localStorage.getItem("adhd_streak")||'{"current": 0}').current||0,v=Co(Oe()),g=e.map(E=>{let P=E.progress,R=!1;switch(E.id){case 1:P=Math.min(c,5),R=P>=5;break;case 4:P=Math.min(f,7),R=P>=7;break;case 5:P=Math.min(v,5),R=P>=5;break;default:R=E.completed;break}return{...E,progress:P,completed:E.completed||R}});n(g),localStorage.setItem(uf,JSON.stringify(g))},[t]);const r=c=>{const d=e.find(f=>f.id===c);if(d&&!d.completed&&d.progress>=d.target){console.log("[Quests] Completing quest:",d.title),yr(d.reward.xp),Jl(d.reward.gems),window.dispatchEvent(new Event("currencyUpdated"));const f=e.map(v=>v.id===c?{...v,completed:!0}:v);n(f),localStorage.setItem(uf,JSON.stringify(f))}else d&&d.progress<d.target&&console.warn("[Quests] Cannot complete quest - progress too low:",d.title,`${d.progress}/${d.target}`)},i=e.filter(c=>c.category==="daily"),s=e.filter(c=>c.category==="weekly"),o=e.filter(c=>c.category==="long-term"),l=c=>p("div",{className:"panel",style:{padding:20,background:c.completed?"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)":"transparent",border:c.completed?"2px solid rgba(34, 197, 94, 0.5)":"1px solid var(--border)",display:"flex",flexDirection:"column",gap:12,opacity:c.completed?.8:1},children:[u("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:p("div",{style:{display:"flex",gap:12,alignItems:"start",flex:1},children:[u("span",{style:{fontSize:"1.5rem"},children:c.icon}),p("div",{style:{flex:1},children:[p("h4",{style:{margin:"0 0 4px 0"},children:[c.title,c.completed&&" \u2713"]}),u("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--muted)"},children:c.description})]})]})}),p("div",{children:[p("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6,fontSize:"0.85rem"},children:[u("span",{children:"Progress"}),p("span",{children:[c.progress," / ",c.target]})]}),u("div",{style:{width:"100%",height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Math.min(100,c.progress/c.target*100)}%`,background:"linear-gradient(90deg, var(--accent), var(--accent-2))",transition:"width 0.3s ease"}})})]}),p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.9rem"},children:[p("div",{style:{display:"flex",gap:12},children:[p("span",{children:["\u{1F4E6} +",c.reward.xp," XP"]}),p("span",{children:["\u{1F48E} +",c.reward.gems," Gems"]})]}),u($e,{onClick:()=>r(c.id),disabled:c.completed||c.progress<c.target,variant:c.completed?"ghost":void 0,title:c.progress<c.target?`Complete ${c.target-c.progress} more to claim`:"",children:c.completed?"Completed":c.progress<c.target?"Incomplete":"Claim"})]})]},c.id);return u("div",{className:"container",children:p("div",{style:{maxWidth:900,margin:"24px auto"},children:[p("div",{style:{marginBottom:32},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:8},children:"Quests"}),u("p",{style:{color:"var(--muted)",marginBottom:0},children:"Complete quests to earn XP and Gems"})]}),p("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"\u2600\uFE0F Daily Quests"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:i.map(l)})]}),p("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"\u{1F4C5} Weekly Quests"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:s.map(l)})]}),p("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"\u{1F3C6} Long-term Quests"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:o.map(l)})]}),u("section",{style:{marginTop:40},children:p("div",{className:"panel",style:{padding:24,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:20},children:[p("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--accent)",marginBottom:4},children:e.filter(c=>c.completed).length}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Quests Completed"})]}),p("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ec4899",marginBottom:4},children:e.reduce((c,d)=>d.completed?c+d.reward.xp:c,0)}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Total XP Earned"})]}),p("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#06b6d4",marginBottom:4},children:e.reduce((c,d)=>d.completed?c+d.reward.gems:c,0)}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Total Gems Earned"})]})]})})]})})},I1="adhd_profile",b1="adhd_streak",x1="adhd_quests_progress",$D=()=>{const[t,e]=M.exports.useState(null),[n,r]=M.exports.useState(null),[i,s]=M.exports.useState([]),[o,l]=M.exports.useState([]),[c,d]=M.exports.useState(0),[f,v]=M.exports.useState(0),[g,E]=M.exports.useState([]);M.exports.useEffect(()=>{const k=localStorage.getItem(I1);k&&e(JSON.parse(k));const D=localStorage.getItem(b1);D&&r(JSON.parse(D));const O=localStorage.getItem(x1);O&&s(JSON.parse(O)),d(Oe()),v(ot()),E(Zu()),P()},[]);const P=()=>{const k=localStorage.getItem(I1),D=k?JSON.parse(k):{},O=localStorage.getItem(b1),B=O?JSON.parse(O):{current:0,longest:0},F=localStorage.getItem(x1),b=F?JSON.parse(F):[],S=[{title:"Total Tasks Completed",value:D.tasksCompleted||0,icon:"\u2705",description:"You've crushed it! Keep going!"},{title:"Current Streak",value:B.current||0,icon:"\u{1F525}",description:B.current>0?`${B.current} days of consistency`:"Start a new streak!"},{title:"Longest Streak",value:B.longest||0,icon:"\u2B50",description:"Your personal best!"},{title:"Quests Completed",value:b.filter(T=>T.completed).length,icon:"\u{1F3C6}",description:`${b.filter(T=>T.completed).length} of ${b.length} total`},{title:"Medals Earned",value:Zu().filter(T=>T.earned).length,icon:"\u{1F396}\uFE0F",description:"Achievements unlocked!"},{title:"Total XP Earned",value:Oe(),icon:"\u{1F4E6}",description:"Experience points accumulated"}];l(S)},R=i.filter(k=>k.completed).length,y=g.filter(k=>k.earned).length,_=t!=null&&t.tasksCompleted?(t.tasksCompleted/Math.max((n==null?void 0:n.longest)||1,1)).toFixed(1):0;return u("div",{className:"container",children:p("div",{style:{maxWidth:900,margin:"24px auto"},children:[p("div",{style:{marginBottom:32},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:8},children:"\u{1F4CA} Personal Insights"}),u("p",{style:{color:"var(--muted)",marginBottom:0},children:"Your journey of growth and achievement"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:16,marginBottom:32},children:o.map((k,D)=>p("div",{className:"panel",style:{padding:24,textAlign:"center",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(90, 208, 168, 0.1) 100%)",border:"1px solid rgba(99, 102, 241, 0.2)"},children:[u("div",{style:{fontSize:"2.5rem",marginBottom:12},children:k.icon}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)",marginBottom:8},children:k.title}),u("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--accent)",marginBottom:8},children:k.value}),k.description&&u("div",{style:{fontSize:"0.8rem",color:"var(--muted)"},children:k.description})]},D))}),p("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"\u{1F3AF} Achievement Summary"}),p("div",{className:"panel",style:{padding:24,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:20},children:[p("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--accent)",marginBottom:4},children:(t==null?void 0:t.tasksCompleted)||0}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Tasks Completed"}),_&&p("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:["~",_,"/day"]})]}),p("div",{style:{textAlign:"center"},children:[p("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ec4899",marginBottom:4},children:[R,"/",i.length]}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Quests Done"}),p("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:[i.length>0?`${Math.round(R/i.length*100)}%`:"0%"," completed"]})]}),p("div",{style:{textAlign:"center"},children:[p("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#06b6d4",marginBottom:4},children:[y,"/",g.length]}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Medals Earned"}),p("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:[g.length>0?`${Math.round(y/g.length*100)}%`:"0%"," unlocked"]})]}),p("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#fbbf24",marginBottom:4},children:f}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:"Gems Collected"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginTop:4},children:"\u{1F48E} In pocket"})]})]})]}),p("section",{style:{marginBottom:32},children:[u("h2",{style:{marginBottom:16},children:"\u{1F4A1} Personal Observations"}),u("div",{className:"panel",style:{padding:24},children:p("div",{style:{display:"grid",gap:16},children:[p("div",{style:{paddingBottom:16,borderBottom:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F4C8} Progress Trend"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:(t==null?void 0:t.tasksCompleted)>20?"\u{1F525} You're on a roll! Your consistency is impressive.":(t==null?void 0:t.tasksCompleted)>10?"\u{1F4AA} Great effort! You're building momentum.":"\u{1F331} Every journey starts with a single step. Keep going!"})]}),p("div",{style:{paddingBottom:16,borderBottom:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F525} Streak Status"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:(n==null?void 0:n.current)>7?`Amazing! You've maintained a ${n.current}-day streak. Don't break it! \u{1F3AF}`:(n==null?void 0:n.current)>0?`You're on a ${n.current}-day streak. Keep the momentum going!`:"Start a new streak today and build consistency!"})]}),p("div",{style:{paddingBottom:16,borderBottom:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F3C6} Quest Progress"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:R===i.length&&i.length>0?"Incredible! You've completed all available quests. You're a quest master! \u{1F389}":R>0?`You've completed ${R} quest${R>1?"s":""}. Great work! Keep completing more.`:"Start completing quests to earn rewards and achievements!"})]}),p("div",{children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"\u{1F396}\uFE0F Achievement Status"}),u("div",{style:{fontSize:"0.9rem",color:"var(--muted)"},children:y===g.length&&g.length>0?"\u{1F31F} Perfect! You've unlocked all available medals. You are unstoppable!":y>0?`You've earned ${y} medal${y>1?"s":""}. ${g.length-y} more to unlock!`:"Earn medals by completing tasks, quests, and achieving milestones."})]})]})})]}),p("section",{children:[u("h2",{style:{marginBottom:16},children:"\u{1F4AD} Tips for Success"}),u("div",{className:"panel",style:{padding:24,background:"linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)"},children:p("ul",{style:{margin:0,paddingLeft:20,lineHeight:"1.8"},children:[u("li",{children:"\u2728 Focus on consistency over perfection - every small task counts!"}),u("li",{children:"\u{1F3AF} Use streaks as motivation - they compound over time"}),u("li",{children:"\u{1F3C6} Complete quests regularly for extra rewards and badges"}),u("li",{children:"\u{1F396}\uFE0F Work towards unlocking all medals for ultimate achievement"}),u("li",{children:"\u{1F48E} Collect gems and XP to unlock exclusive features in the store"}),u("li",{children:"\u{1F525} If you break a streak, don't give up - start a new one immediately"})]})})]})]})})},WD=()=>{var ye,K,H,z;const[t,e]=M.exports.useState(null),[n,r]=M.exports.useState(0),[i,s]=M.exports.useState(0),[o,l]=M.exports.useState(!0),[c,d]=M.exports.useState(!1),[f,v]=M.exports.useState(""),[g,E]=M.exports.useState(!1),[P,R]=M.exports.useState(!1),[y,_]=M.exports.useState([]),[k,D]=M.exports.useState(null),O=5,B=30;M.exports.useEffect(()=>{const V=Lt();console.log("[Pet] Loaded all pets from storage:",V.length);let $=Et();console.log("[Pet] getPet() returned:",$==null?void 0:$.name),!$&&V.length===0?(console.log("[Pet] No pets found, creating default pet"),$=nd("Your Pet")):!$&&V.length>0?(console.log("[Pet] Using first store pet as legacy pet"),$=V[0]):$&&(console.log("[Pet] Updating stats for legacy pet:",$.name),$=vr(),$.mood||($.mood=Ap($)),$.color||($.color="default"),$.skin||($.skin="default"));let re=[$];V.forEach(_e=>{_e.id!==$.id&&re.push(_e)}),console.log("[Pet] Total pets to show:",re.length),_(re);const ee=bo();console.log("[Pet] Current pet ID:",ee),D(ee);let ue=null;ee&&V.some(_e=>_e.id===ee)?ue=V.find(_e=>_e.id===ee)||$:ue=$,e(ue),v((ue==null?void 0:ue.name)||""),r(ot()),s(Oe()),l(!1)},[]),M.exports.useEffect(()=>{const V=()=>{console.log("[Pet] Pets restored from Firestore, reloading...");const re=Lt();let ee=Et();ee?(ee=vr(),ee.mood||(ee.mood=Ap(ee)),ee.color||(ee.color="default"),ee.skin||(ee.skin="default")):ee=nd("Your Pet");let ue=[ee];re.forEach(de=>{de.id!==ee.id&&ue.push(de)}),_(ue);const _e=bo();D(_e);let Re=null;_e&&re.some(de=>de.id===_e)?Re=re.find(de=>de.id===_e)||ee:Re=ee,e(Re),v((Re==null?void 0:Re.name)||""),r(ot()),s(Oe())},$=()=>{console.log("[Pet] Pets cleared on logout"),e(null),_([]),D(null),v("")};return window.addEventListener("pets:restored",V),window.addEventListener("pets:cleared",$),()=>{window.removeEventListener("pets:restored",V),window.removeEventListener("pets:cleared",$)}},[]);const F=V=>{console.log("[Pet] \u{1F504} reloadCurrentPet called for:",V);const $=Lt();console.log("[Pet] getAllPets() returned:",$.length,"pets"),$.forEach(ue=>console.log("[Pet]   -",ue.id,ue.name,"hunger:",ue.hunger));const re=$.find(ue=>ue.id===V);if(console.log("[Pet] Found pet to load?",!!re),re)return console.log("[Pet] \u2705 Loading pet:",re.name,"hunger:",re.hunger,"health:",re.health),e(re),v(re.name),r(ot()),s(Oe()),re;console.log("[Pet] \u26A0\uFE0F Pet not found in allPets, trying getPet()");const ee=Et();return ee&&ee.id===V?(console.log("[Pet] \u2705 Found in legacy pet storage:",ee.name,"hunger:",ee.hunger),e(ee),v(ee.name),r(ot()),s(Oe()),ee):(console.log("[Pet] \u274C Pet not found anywhere!"),null)},b=V=>{if(V==="gems"&&n<O){alert("Not enough gems! You need 5 gems to feed your pet.");return}if(V==="xp"&&i<B){alert("Not enough XP! You need 30 XP to feed your pet.");return}const $=rl(V);$&&(e($),r(ot()),s(Oe()))},S=()=>{if(f.trim()&&t){const V=fD(f.trim());V&&(e(V),d(!1))}},T=V=>{const $=pD(V);$&&(e($),E(!1))},C=V=>{const $=mD(V);$&&(e($),R(!1))},x=()=>{if(window.confirm("Are you sure? This will reset your pet to an egg.")&&t){t.stage="egg",t.level=1,t.experience=0,t.health=50,t.hunger=30,t.happiness=80;const V=vr();V&&(e(V),_($=>$.map(re=>re.id===V.id?V:re)))}};if(o||!t)return u("div",{className:"container",style:{padding:"24px",textAlign:"center"},children:u("p",{children:"Loading your pet..."})});const N=gD(t.level),w=N>0?t.experience/N*100:100,G=t.hunger<30?"#22c55e":t.hunger<70?"#eab308":"#ef4444",J=t.happiness>70?"#22c55e":t.happiness>40?"#eab308":"#ef4444",se=t.health>70?"#22c55e":t.health>40?"#eab308":"#ef4444",me={happy:"\u{1F604}",content:"\u{1F60A}",neutral:"\u{1F610}",sad:"\u{1F622}",excited:"\u{1F929}"};return u("div",{className:"container",children:p("div",{style:{maxWidth:700,margin:"24px auto"},children:[p("div",{style:{textAlign:"center",marginBottom:32},children:[u("h1",{style:{fontSize:"2.5rem",marginBottom:8},children:"Your Pet"}),u("p",{style:{color:"var(--muted)",marginBottom:0},children:"Care, customize, and grow your companion"})]}),y.length>0&&u("div",{className:"panel",style:{padding:16,marginBottom:24},children:p("div",{style:{marginBottom:12},children:[p("h3",{style:{margin:"0 0 12px 0",fontSize:"0.9rem",color:"var(--muted)"},children:["YOUR PETS (",y.length,")"]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(60px, 1fr))",gap:8},children:y.map(V=>{const $=(t==null?void 0:t.id)===V.id;return p("button",{onClick:()=>{rd(V.id),D(V.id),F(V.id)},style:{padding:"8px",borderRadius:6,border:$?"2px solid var(--accent)":"1px solid var(--border)",background:$?"rgba(167, 139, 250, 0.2)":"var(--bg)",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:4,fontSize:"0.85rem",color:"var(--text)",fontWeight:$?"bold":"normal"},children:[u("div",{style:{fontSize:"1.5rem"},children:su(V.stage,V.color||"default",V.emoji)}),u("div",{children:V.name})]},V.id)})})]})}),p("div",{className:"panel",style:{padding:40,textAlign:"center",marginBottom:24,background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(90, 208, 168, 0.1) 100%)"},children:[u("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:16,marginBottom:20},children:u("div",{style:{fontSize:"5rem",animation:"pulse 2s infinite"},children:su(t.stage,t.color||"default",t.emoji)})}),u("div",{style:{marginBottom:16},children:c?p("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[u("input",{type:"text",className:"input",value:f,onChange:V=>v(V.target.value),onKeyDown:V=>V.key==="Enter"&&S(),autoFocus:!0,style:{maxWidth:200}}),u("button",{className:"btn primary",onClick:S,style:{padding:"6px 12px"},children:"Save"}),u("button",{className:"btn ghost",onClick:()=>{d(!1),v(t.name)},style:{padding:"6px 12px"},children:"Cancel"})]}):u("h2",{style:{fontSize:"1.8rem",marginBottom:8,cursor:"pointer"},onClick:()=>{d(!0),v(t.name)},children:t.name})}),p("p",{style:{color:"var(--muted)",marginBottom:8},children:["Level ",u("span",{style:{color:"var(--accent)",fontWeight:"bold"},children:t.level})," ",t.stage.charAt(0).toUpperCase()+t.stage.slice(1)]}),p("p",{style:{color:"var(--muted)",fontSize:"0.9rem"},children:["Mood: ",u("span",{style:{fontWeight:"bold"},children:(t.mood||"neutral").charAt(0).toUpperCase()+(t.mood||"neutral").slice(1)})," ",me[t.mood||"neutral"]]}),p("p",{style:{color:"var(--muted)",fontSize:"0.85rem"},children:["Fed ",u("span",{style:{fontWeight:"bold"},children:t.timesFeeding})," times \u2022 Skin: ",u("span",{style:{fontWeight:"bold"},children:((ye=Mc[t.skin||"default"])==null?void 0:ye.name)||"Default"})]})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:24},children:[p("div",{className:"panel",style:{padding:16,textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:8},children:"\u{1F356}"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginBottom:4},children:"Hunger"}),u("div",{style:{height:4,background:"var(--border)",borderRadius:2,marginBottom:4},children:u("div",{style:{height:"100%",width:`${Math.max(0,100-t.hunger)}%`,background:G,borderRadius:2,transition:"width 0.3s"}})}),p("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:G},children:[Math.round(100-t.hunger),"%"]})]}),p("div",{className:"panel",style:{padding:16,textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:8},children:"\u{1F60A}"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginBottom:4},children:"Happiness"}),u("div",{style:{height:4,background:"var(--border)",borderRadius:2,marginBottom:4},children:u("div",{style:{height:"100%",width:`${t.happiness}%`,background:J,borderRadius:2,transition:"width 0.3s"}})}),p("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:J},children:[t.happiness,"%"]})]}),p("div",{className:"panel",style:{padding:16,textAlign:"center"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:8},children:"\u{1F49A}"}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)",marginBottom:4},children:"Health"}),u("div",{style:{height:4,background:"var(--border)",borderRadius:2,marginBottom:4},children:u("div",{style:{height:"100%",width:`${t.health}%`,background:se,borderRadius:2,transition:"width 0.3s"}})}),p("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:se},children:[t.health,"%"]})]})]}),p("div",{className:"panel",style:{padding:16,marginBottom:24},children:[p("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,fontSize:"0.9rem"},children:[u("span",{children:"Experience"}),p("span",{style:{color:"var(--muted)"},children:[t.experience," / ",N," XP"]})]}),u("div",{style:{height:8,background:"var(--border)",borderRadius:4},children:u("div",{style:{height:"100%",width:`${w}%`,background:"linear-gradient(90deg, #6366f1, #5ad0a8)",borderRadius:4,transition:"width 0.3s"}})})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:24},children:[p("button",{onClick:()=>b("gems"),disabled:n<O,className:"btn primary",style:{padding:"14px",opacity:n<O?.5:1,cursor:n<O?"not-allowed":"pointer",textAlign:"center"},children:[u("div",{style:{fontWeight:"bold",marginBottom:4},children:"Feed with Gems"}),p("div",{style:{fontSize:"0.85rem",color:"inherit",opacity:.9},children:["\u{1F48E} ",O," (have ",n,")"]})]}),p("button",{onClick:()=>b("xp"),disabled:i<B,className:"btn primary",style:{padding:"14px",opacity:i<B?.5:1,cursor:i<B?"not-allowed":"pointer",textAlign:"center"},children:[u("div",{style:{fontWeight:"bold",marginBottom:4},children:"Feed with XP"}),p("div",{style:{fontSize:"0.85rem",color:"inherit",opacity:.9},children:["\u2B50 ",B," (have ",i,")"]})]})]}),p("div",{className:"panel",style:{padding:20,marginBottom:24},children:[u("h3",{style:{marginTop:0,marginBottom:16},children:"\u{1F3A8} Customize Your Pet"}),p("div",{style:{marginBottom:20},children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"Pet Color"}),g?u("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:Object.entries(td).map(([V,$])=>p("button",{onClick:()=>T(V),className:"btn ghost",style:{padding:"12px",border:t.color===V?"2px solid var(--accent)":"2px solid transparent",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[u("div",{style:{fontSize:"1.5rem"},children:$.emoji}),u("div",{style:{fontSize:"0.75rem"},children:$.name})]},V))}):p("button",{className:"btn ghost",onClick:()=>E(!0),style:{width:"100%"},children:[u("div",{style:{fontSize:"1.5rem",marginBottom:4},children:su(t.stage,t.color||"default",t.emoji)}),u("div",{children:((K=td[t.color||"default"])==null?void 0:K.name)||"Default"})]})]}),p("div",{children:[u("div",{style:{fontSize:"0.9rem",fontWeight:"bold",marginBottom:8},children:"Pet Skin"}),P?u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:Object.entries(Mc).map(([V,$])=>p("button",{onClick:()=>C(V),className:"btn ghost",style:{padding:"12px",border:t.skin===V?"2px solid var(--accent)":"2px solid transparent",textAlign:"left"},children:[u("div",{style:{fontWeight:"bold",marginBottom:2},children:$.name}),u("div",{style:{fontSize:"0.8rem",color:"var(--muted)"},children:$.description})]},V))}):p("button",{className:"btn ghost",onClick:()=>R(!0),style:{width:"100%",textAlign:"left"},children:[u("div",{style:{fontWeight:"bold",marginBottom:2},children:((H=Mc[t.skin||"default"])==null?void 0:H.name)||"Default"}),u("div",{style:{fontSize:"0.8rem",color:"var(--muted)"},children:((z=Mc[t.skin||"default"])==null?void 0:z.description)||"Classic pet"})]})]})]}),p("div",{className:"panel",style:{padding:16,marginBottom:24},children:[u("h3",{style:{marginTop:0},children:"\u{1F4A1} Pet Care Tips"}),p("ul",{style:{margin:0,paddingLeft:20,fontSize:"0.9rem",lineHeight:"1.6"},children:[u("li",{children:"Feed your pet regularly to keep it happy and healthy"}),u("li",{children:"Choose between gems or XP to feed your pet (both work!)"}),u("li",{children:"Your pet gains XP whenever you feed it, helping it grow"}),u("li",{children:"Each pet stage unlocks at specific levels: Baby (2), Teen (3), Adult (4), Legendary (5+)"}),u("li",{children:"Customize your pet's color and skin to make it unique!"}),u("li",{children:"Pet mood depends on hunger, happiness, and health"})]})]}),u("button",{onClick:x,className:"btn ghost",style:{width:"100%",padding:"8px",fontSize:"0.85rem",color:"var(--muted)"},children:"Reset Pet"})]})})};function qD(){const[t,e]=M.exports.useState("forgiveness"),[n,r]=M.exports.useState([]),[i,s]=M.exports.useState(0),[o,l]=M.exports.useState(0),[c,d]=M.exports.useState(null);M.exports.useEffect(()=>{f()},[]);const f=()=>{r(ih()),s(Oe()),l(ot())},v=E=>{const P=Jr[E];if(!P)return;if(of(E)){alert("Skill already purchased!");return}if(!zr(E)){Jr[E],alert("Prerequisites not met! You need to purchase prerequisite skills first.");return}if(!(P.costType==="xp"&&i>=P.cost||P.costType==="gems"&&o>=P.cost)){alert(`Not enough ${P.costType.toUpperCase()} to purchase this skill!`);return}wD(E)&&(f(),d(null))},g=_D(t);return p("div",{style:{padding:"1.5rem",maxWidth:"1200px",margin:"0 auto"},children:[p("div",{style:{marginBottom:"2rem"},children:[u("h1",{style:{marginBottom:"0.5rem",fontSize:"2rem"},children:"Skill Tree"}),u("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:"Unlock powerful skills to enhance your productivity and pet care"}),p("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem"},children:[p("div",{style:{padding:"0.75rem 1rem",backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u("span",{style:{fontSize:"1.25rem"},children:"\u2B50"}),p("div",{children:[u("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"XP Available"}),u("div",{style:{fontWeight:"bold",fontSize:"1.25rem"},children:i})]})]}),p("div",{style:{padding:"0.75rem 1rem",backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u("span",{style:{fontSize:"1.25rem"},children:"\u{1F48E}"}),p("div",{children:[u("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Gems Available"}),u("div",{style:{fontWeight:"bold",fontSize:"1.25rem"},children:o})]})]})]})]}),p("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"2rem",borderBottom:"1px solid var(--border)",paddingBottom:"1rem"},children:[u("button",{onClick:()=>e("forgiveness"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:t==="forgiveness"?"#3B82F6":"var(--panel)",color:t==="forgiveness"?"white":"var(--text)",cursor:"pointer",fontSize:"1rem",fontWeight:t==="forgiveness"?"bold":"normal",transition:"all 0.2s ease"},children:"\u{1F91D} Forgiveness Tree"}),u("button",{onClick:()=>e("xp_mastery"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:t==="xp_mastery"?"#F59E0B":"var(--panel)",color:t==="xp_mastery"?"white":"var(--text)",cursor:"pointer",fontSize:"1rem",fontWeight:t==="xp_mastery"?"bold":"normal",transition:"all 0.2s ease"},children:"\u{1F525} XP Mastery"}),u("button",{onClick:()=>e("pet_power"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:t==="pet_power"?"#10B981":"var(--panel)",color:t==="pet_power"?"white":"var(--text)",cursor:"pointer",fontSize:"1rem",fontWeight:t==="pet_power"?"bold":"normal",transition:"all 0.2s ease"},children:"\u{1F43E} Pet Power"})]}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"0.75rem"},children:g.map(E=>{const P=E.purchased,R=zr(E.id)&&(E.costType==="xp"&&i>=E.cost||E.costType==="gems"&&o>=E.cost);return p("div",{onClick:()=>d(E),style:{padding:"1rem",backgroundColor:P?"var(--primary)10":"var(--panel)",border:P?"2px solid var(--primary)":"1px solid var(--border)",borderRadius:"0.75rem",cursor:"pointer",transition:"all 0.2s ease",opacity:P?1:.8,position:"relative",display:"flex",flexDirection:"column",height:"100%"},onMouseEnter:y=>{y.currentTarget.style.transform="translateY(-4px)",y.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.1)"},onMouseLeave:y=>{y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="none"},children:[P&&u("div",{style:{position:"absolute",top:"0.75rem",right:"0.75rem",fontSize:"1.5rem"},children:"\u2705"}),u("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:E.icon}),u("h3",{style:{marginBottom:"0.25rem",fontSize:"0.95rem",fontWeight:"bold"},children:E.name}),u("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:E.description}),p("div",{style:{padding:"0.5rem",backgroundColor:"var(--background)",borderRadius:"0.5rem",marginBottom:"0.75rem",fontSize:"0.8rem",fontWeight:"bold"},children:[E.costType==="xp"?"\u2B50":"\u{1F48E}"," ",E.cost," ",E.costType.toUpperCase()]}),E.level>1&&p("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:["Level ",E.level," Skill"]}),E.prerequisites&&E.prerequisites.length>0&&!P&&p("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"0.5rem",padding:"0.4rem",backgroundColor:"var(--background)",borderRadius:"0.25rem"},children:["Requires: ",E.prerequisites.map(y=>{var _;return(_=Jr[y])==null?void 0:_.name}).join(", ")]}),u("div",{style:{flex:1}}),!P&&u("button",{onClick:y=>{y.stopPropagation(),v(E.id)},disabled:!R,style:{width:"100%",marginTop:"0.75rem",padding:"0.6rem",backgroundColor:R?"var(--primary)":"#666",color:"white",border:R?"2px solid var(--primary)":"2px solid #666",borderRadius:"0.5rem",cursor:R?"pointer":"not-allowed",fontWeight:"bold",fontSize:"0.85rem",opacity:R?1:.6,transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"0.5px"},onMouseEnter:y=>{R&&(y.currentTarget.style.transform="translateY(-2px)",y.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)")},onMouseLeave:y=>{R&&(y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="none")},children:zr(E.id)?"Unlock":"Locked"}),P&&u("div",{style:{width:"100%",marginTop:"0.75rem",padding:"0.6rem",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"0.5rem",fontWeight:"bold",textAlign:"center",fontSize:"0.85rem"},children:"Unlocked"})]},E.id)})}),c&&u("div",{onClick:()=>d(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:p("div",{onClick:E=>E.stopPropagation(),style:{backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"1rem",padding:"2rem",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)"},children:[p("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1.5rem"},children:[u("div",{style:{fontSize:"3rem"},children:c.icon}),p("div",{children:[u("h2",{style:{marginBottom:"0.25rem",fontSize:"1.5rem"},children:c.name}),p("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:[c.tree.replace("_"," ")," Tree"]})]})]}),u("p",{style:{marginBottom:"1.5rem",fontSize:"1rem",lineHeight:"1.6"},children:c.description}),p("div",{style:{marginBottom:"1.5rem"},children:[u("h3",{style:{marginBottom:"0.75rem",fontWeight:"bold"},children:"Effects:"}),u("ul",{style:{marginLeft:"1.5rem",color:"var(--text-secondary)"},children:c.effects.map((E,P)=>u("li",{style:{marginBottom:"0.5rem"},children:E},P))})]}),p("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"var(--background)",borderRadius:"0.5rem"},children:[p("div",{style:{marginBottom:"0.75rem"},children:[u("strong",{children:"Cost:"})," ",c.costType==="xp"?"\u2B50":"\u{1F48E}"," ",c.cost," ",c.costType.toUpperCase()]}),c.prerequisites&&c.prerequisites.length>0&&p("div",{children:[u("strong",{children:"Prerequisites:"}),u("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem"},children:c.prerequisites.map(E=>{const P=Jr[E],R=of(E);return p("li",{style:{color:R?"var(--primary)":"var(--text-secondary)"},children:[R?"\u2705":"\u2B1C"," ",P==null?void 0:P.name]},E)})})]})]}),p("div",{style:{display:"flex",gap:"1rem"},children:[!of(c.id)&&u("button",{onClick:()=>{v(c.id)},disabled:!zr(c.id)||c.costType==="xp"&&i<c.cost||c.costType==="gems"&&o<c.cost,style:{flex:1,padding:"0.75rem",backgroundColor:zr(c.id)&&(c.costType==="xp"&&i>=c.cost||c.costType==="gems"&&o>=c.cost)?"var(--primary)":"var(--text-secondary)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"bold",opacity:zr(c.id)&&(c.costType==="xp"&&i>=c.cost||c.costType==="gems"&&o>=c.cost)?1:.5},children:zr(c.id)?"Unlock Skill":"Prerequisites Not Met"}),u("button",{onClick:()=>d(null),style:{flex:1,padding:"0.75rem",backgroundColor:"var(--panel)",border:"1px solid var(--border)",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"bold"},children:"Close"})]})]})})]})}const HD=()=>!!(window.AudioContext||window.webkitAudioContext);let Wt=null,df=!1;const GD=async()=>{if(df){console.log("[SOUND] AudioContext already initialized");return}try{if(!Wt){console.log("[SOUND] Creating AudioContext..."),Wt=new(window.AudioContext||window.webkitAudioContext),console.log("[SOUND] \u2705 AudioContext created, state:",Wt.state),console.log("[SOUND] === Audio System Diagnostics ==="),console.log("[SOUND] Sample Rate:",Wt.sampleRate),console.log("[SOUND] Channel Count:",Wt.destination.maxChannelCount),console.log("[SOUND] State:",Wt.state),console.log("[SOUND] Running Time:",Wt.currentTime),Wt.addEventListener("statechange",()=>{console.log("[SOUND] AudioContext state changed to:",Wt.state)});try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind.includes("audio"));console.log("[SOUND] Available audio devices:",e.length),e.forEach((n,r)=>{console.log(`[SOUND]   ${r}: ${n.kind} - ${n.label||"(unnamed)"}`)})}catch(t){console.log("[SOUND] Could not enumerate devices:",t)}}df=!0}catch(t){console.log("[SOUND] \u274C Failed to initialize AudioContext:",t),df=!0}},oh=async()=>{if(!HD())return console.log("[SOUND] Web Audio API not supported"),null;if(!Wt)return console.log("[SOUND] AudioContext not initialized yet. Was user gesture captured?"),null;if(Wt.state==="suspended")try{await Wt.resume(),console.log("[SOUND] AudioContext resumed, state:",Wt.state)}catch(t){console.log("[SOUND] Failed to resume AudioContext:",t)}return Wt},KD=async()=>{try{const t=await oh();if(!t)return;const e=t,n=e.currentTime;[{freq:523.25,time:0,duration:.1},{freq:659.25,time:.1,duration:.1},{freq:783.99,time:.2,duration:.2},{freq:1046.5,time:.4,duration:.3}].forEach(i=>{const s=e.createOscillator(),o=e.createGain();s.connect(o),o.connect(e.destination),s.frequency.value=i.freq,s.type="sine",o.gain.setValueAtTime(.3,n+i.time),o.gain.exponentialRampToValueAtTime(.01,n+i.time+i.duration),s.start(n+i.time),s.stop(n+i.time+i.duration)})}catch{console.log("Audio context not available")}},XD=async()=>{try{const t=await oh();if(!t)return;const e=t,n=e.currentTime;[{freq:900,time:0,duration:.12},{freq:1100,time:.15,duration:.15}].forEach(i=>{const s=e.createOscillator(),o=e.createGain();s.connect(o),o.connect(e.destination),s.frequency.value=i.freq,s.type="sine",o.gain.setValueAtTime(.1,n+i.time),o.gain.exponentialRampToValueAtTime(.01,n+i.time+i.duration),s.start(n+i.time),s.stop(n+i.time+i.duration)})}catch{console.log("Audio context not available")}},QD=async()=>{try{console.log("[SOUND] === Playing message notification sound ===");const t=await oh();if(!t){console.log("[SOUND] \u274C No AudioContext available - cannot play sound");return}try{const e=t;console.log("[SOUND] AudioContext ready, state:",e.state),e.state!=="running"&&(console.log("[SOUND] \u26A0\uFE0F  AudioContext not running, attempting to resume..."),await e.resume()),console.log("[SOUND] Creating oscillators...");const n=e.currentTime;[{freq:440,time:0,duration:.08},{freq:554.37,time:.08,duration:.08}].forEach((i,s)=>{try{const o=e.createOscillator(),l=e.createGain();o.connect(l),l.connect(e.destination),o.frequency.value=i.freq,o.type="sine",l.gain.setValueAtTime(.1,n+i.time),l.gain.exponentialRampToValueAtTime(.01,n+i.time+i.duration),o.start(n+i.time),o.stop(n+i.time+i.duration),console.log("[SOUND] \u2705 Note",s,"freq:",i.freq,"scheduled")}catch(o){console.log("[SOUND] \u274C Error creating note",s,":",o)}}),console.log("[SOUND] \u2705 Message sound setup complete")}catch(e){console.log("[SOUND] \u274C Audio system error:",e)}}catch(t){console.log("[SOUND] \u274C Error in playMessageNotificationSound:",t)}},YD=async()=>{try{console.log("[SOUND] playFriendRequestSound called - PLAYING FRIEND REQUEST SOUND NOW");const t=await oh();if(!t)return;try{await new Promise(i=>setTimeout(i,10));const e=t,n=e.currentTime;[{freq:523.25,time:0,duration:.1},{freq:659.25,time:.1,duration:.1},{freq:523.25,time:.2,duration:.15}].forEach(i=>{try{const s=e.createOscillator(),o=e.createGain();s.connect(o),o.connect(e.destination),s.frequency.value=i.freq,s.type="sine",o.gain.setValueAtTime(.1,n+i.time),o.gain.exponentialRampToValueAtTime(.01,n+i.time+i.duration),s.start(n+i.time),s.stop(n+i.time+i.duration)}catch(s){console.log("[SOUND] Error in friend request sound:",s)}})}catch{console.log("[SOUND] Audio device error (this is safe to ignore)")}}catch{console.log("Audio context not available")}},JD=({isOpen:t,onClose:e,onOpen:n})=>{const[r,i]=M.exports.useState(!1),[s,o]=M.exports.useState(null),[l,c]=M.exports.useState(0),d=[{type:"xp",amount:50},{type:"xp",amount:75},{type:"gems",amount:5},{type:"xp",amount:100},{type:"gems",amount:10},{type:"xp",amount:60}],f=()=>{if(r)return;i(!0),c(0);let g=0;const E=setInterval(()=>{g+=1,c(g%d.length)},100);setTimeout(()=>{clearInterval(E);const P=d[Math.floor(Math.random()*d.length)];o(P),n(P),setTimeout(()=>{i(!1),o(null),e()},1500)},2e3)},v=g=>g.type==="xp"?`${g.amount} XP`:`${g.amount} \u{1F48E}`;return t?p("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:[p("div",{className:"panel",style:{maxWidth:400,padding:40,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",textAlign:"center"},children:[u("h2",{style:{margin:"0 0 24px 0",fontSize:"1.5rem"},children:"\u{1F389} Critical Hit!"}),u("p",{style:{margin:"0 0 32px 0",color:"var(--muted)"},children:"You've earned a Free Bronze Crate!"}),u("div",{style:{fontSize:"4rem",marginBottom:24,animation:r?"pulse 0.3s infinite":"none"},children:"\u{1F4E6}"}),r&&u("div",{style:{marginBottom:24,fontSize:"1.2rem",fontWeight:"bold",color:"var(--accent)",minHeight:32},children:v(d[l])}),s&&u("div",{style:{marginBottom:24,fontSize:"1.5rem",fontWeight:"bold",color:"var(--accent-2)",minHeight:32,animation:"pulse 0.5s ease-out"},children:v(s)}),u("button",{className:"btn primary",onClick:f,disabled:r,style:{width:"100%",padding:"12px 24px",fontSize:"1rem",opacity:r?.6:1,cursor:r?"not-allowed":"pointer"},children:r?"Opening...":"Open Crate"}),u("button",{className:"btn ghost",onClick:e,disabled:r,style:{width:"100%",marginTop:12,opacity:r?.5:1,cursor:r?"not-allowed":"pointer"},children:"Close"})]}),u("style",{children:`
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.05); }
          100% { transform: scale(1); }
        }
      `})]}):null},ZD=()=>{const[t,e]=M.exports.useState(Oe()),n=M.exports.useRef(Co(t)),[r,i]=M.exports.useState(!1),[s,o]=M.exports.useState([]),[l,c]=M.exports.useState([]),[d,f]=M.exports.useState(!1),v=72,g=Co(t),E=aD(t),P=lD(t),R=oD(t),y=P>0?Math.max(0,Math.min(100,Math.round(E/P*100))):0;return M.exports.useEffect(()=>{const D=B=>{var F,b;return e((b=(F=B.detail)==null?void 0:F.xp)!=null?b:Oe())},O=B=>{var C,x,N,w,G,J;const F=(x=(C=B.detail)==null?void 0:C.amount)!=null?x:0,b=(w=(N=B.detail)==null?void 0:N.isCritical)!=null?w:!1,S=(J=(G=B.detail)==null?void 0:G.crateReward)!=null?J:!1,T=Date.now();b&&XD(),S&&f(!0),c(se=>[{id:T,amount:F,isCritical:b},...se].slice(0,5)),setTimeout(()=>{c(se=>se.filter(me=>me.id!==T))},4200)};return window.addEventListener("xp:update",D),window.addEventListener("xp:granted",O),()=>{window.removeEventListener("xp:update",D),window.removeEventListener("xp:granted",O)}},[]),M.exports.useEffect(()=>{const _=n.current;if(g>_){KD(),i(!0),o(Array.from({length:20},(O,B)=>B));const k=setTimeout(()=>i(!1),2500),D=setTimeout(()=>o([]),2600);return()=>{clearTimeout(k),clearTimeout(D)}}n.current=g},[g]),p(Vt,{children:[r&&u("div",{style:{position:"fixed",bottom:"100px",left:"50%",transform:"translateX(-50%)",pointerEvents:"none",zIndex:1e4,display:"block",visibility:"visible"},children:p("div",{className:"congrats-text",children:["Level Up! \u2014 Lv ",g]})}),s.length>0&&u("div",{"aria-hidden":!0,style:{position:"fixed",bottom:"100px",left:"0",right:"0",height:"80px",pointerEvents:"none",overflow:"visible",zIndex:9999,display:"block",visibility:"visible"},children:s.map(_=>u("span",{className:"confetti",style:{["--i"]:String(_%10)}},_))}),l.map((_,k)=>p("div",{className:`xp-popup show xp-bounce ${_.isCritical?"critical":""}`,role:"status","aria-live":"polite",style:{bottom:`${120+k*v}px`},children:[p("span",{className:"amount",children:["+",_.amount]}),_.isCritical&&u("span",{className:"critical-badge",style:{marginLeft:4,fontWeight:"bold",color:"#fbbf24"},children:"2x"}),u("span",{className:"label",style:{marginLeft:8},children:"XP"})]},_.id)),u("div",{className:"xp-footer","aria-live":"polite",children:p("div",{className:"xp-inner panel",style:{position:"relative",overflow:"visible"},children:[p("div",{className:"xp-left",children:[p("div",{className:"xp-level",children:["Lv ",g]}),p("div",{className:"xp-text",children:[t," XP"]})]}),u("div",{className:"xp-track","aria-hidden":!0,children:u("div",{className:"xp-fill",style:{width:`${y}%`}})}),p("div",{style:{textAlign:"center",fontSize:"0.75rem",color:"var(--muted)",marginTop:6},children:[R," XP to next level"]}),u("div",{className:"xp-actions"})]})}),u(JD,{isOpen:d,onClose:()=>f(!1),onOpen:_=>{localStorage.setItem("adhd_bronze_crate_last_opened","0"),window.dispatchEvent(new CustomEvent("currencyUpdated"))}})]})},eO=({open:t,onClose:e})=>p(Vt,{children:[u("aside",{className:`sidebar ${t?"open":""}`,"aria-hidden":!t,children:p("div",{className:"sidebar-inner panel",children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[u("h4",{style:{margin:0},children:"Menu"}),u("button",{className:"btn ghost",onClick:e,"aria-label":"Close menu",children:"\u2715"})]}),p("nav",{className:"sidebar-nav",children:[u(ar,{to:"/",onClick:e,className:"sidebar-link",children:"Dashboard"}),u(ar,{to:"/quests",onClick:e,className:"sidebar-link",children:"Quests"}),u(ar,{to:"/insights",onClick:e,className:"sidebar-link",children:"Personal Insights"}),u(ar,{to:"/skills",onClick:e,className:"sidebar-link",children:"Skill Tree"}),u(ar,{to:"/pet",onClick:e,className:"sidebar-link",children:"My Pet"}),u(ar,{to:"/store",onClick:e,className:"sidebar-link",children:"Store"}),u(ar,{to:"/leaderboards",onClick:e,className:"sidebar-link",children:"Leaderboards"}),u(ar,{to:"/settings",onClick:e,className:"sidebar-link",children:"Settings"})]})]})}),u("div",{className:`sidebar-backdrop ${t?"open":""}`,onClick:e})]}),tO=async(t,e,n,r)=>{try{const s=Jn().currentUser;if(!s)throw new Error("User not authenticated");const o=Ni(He,"messages"),l={senderUid:s.uid,senderUsername:r,recipientUid:t,recipientUsername:e,text:n,timestamp:Fe.now(),createdAt:Date.now(),read:!1};return{id:(await dT(o,l)).id,...l}}catch(i){throw console.error("Error sending message:",i),i}},nO=(t,e,n)=>{try{const r=Ni(He,"messages"),i=Ii(r,Gt("senderUid","==",t),Gt("recipientUid","==",e)),s=Ii(r,Gt("senderUid","==",e),Gt("recipientUid","==",t));return kl(i,l=>{const c=l.docs.map(d=>({id:d.id,...d.data()}));kl(s,d=>{const f=d.docs.map(g=>({id:g.id,...g.data()})),v=[...c,...f].sort((g,E)=>new Date(g.createdAt).getTime()-new Date(E.createdAt).getTime());n(v)})})}catch(r){throw console.error("Error subscribing to conversation:",r),r}},rO=(t,e)=>{try{console.log("[subscribeToConversations] Setting up listener for user:",t);const n=Ni(He,"messages"),r=Ii(n,Gt("recipientUid","==",t));return kl(r,s=>{console.log("[subscribeToConversations] Received update - received messages count:",s.docs.length);const o=new Map;for(const c of s.docs){const d=c.data(),f=d.senderUid,v=d.senderUsername,g=d.read!==!0;if(!o.has(f))o.set(f,{friendId:f,friendUid:f,friendUsername:v,lastMessage:d.text,lastMessageTime:d.timestamp,unreadCount:g?1:0});else{const E=o.get(f);d.timestamp.toMillis()>E.lastMessageTime.toMillis()&&(E.lastMessage=d.text,E.lastMessageTime=d.timestamp),g&&(E.unreadCount=(E.unreadCount||0)+1)}}const l=Array.from(o.values()).sort((c,d)=>d.lastMessageTime.toMillis()-c.lastMessageTime.toMillis());console.log("[subscribeToConversations] Calling callback with conversations:",l.length,"unread summary:",l.map(c=>({friend:c.friendUsername,unread:c.unreadCount}))),e(l)})}catch(n){throw console.error("Error subscribing to conversations:",n),n}},iO=async(t,e)=>{try{console.log("[markMessagesAsRead] Called with userUid:",t,"friendUid:",e);const n=Ni(He,"messages"),r=Ii(n,Gt("recipientUid","==",t),Gt("senderUid","==",e),Gt("read","==",!1)),i=await eh(r);console.log("[markMessagesAsRead] Found",i.docs.length,"unread messages to mark as read");const s=i.docs.map(o=>hi(o.ref,{read:!0}));await Promise.all(s),console.log("[markMessagesAsRead] Successfully marked all messages as read")}catch(n){console.error("[markMessagesAsRead] Error:",n)}},sO=async(t,e)=>{try{const r=Jn().currentUser;if(!r)throw new Error("User not authenticated");const i=Ni(He,"users"),s=Ii(i,Gt("username","==",t)),o=await eh(s),l=[e,e.startsWith("#")?e:"#"+e,e.startsWith("#")?e.substring(1):e];console.log("Searching for username:",t),console.log("Hashtag variants to try:",l),console.log("Found users with this username:",o.docs.length);const c=o.docs.map(d=>({uid:d.id,...d.data()})).filter(d=>d.uid===r.uid?!1:(console.log("Checking user:",d.username,"with hashtag:",d.hashtag),l.includes(d.hashtag)));return console.log("Final matching results:",c),c}catch(n){throw console.error("Error searching users:",n),n}},xo=async t=>{try{const e=await $o(Rt(He,"users",t));return e.exists()?{uid:e.id,...e.data()}:null}catch(e){throw console.error("Error getting user profile:",e),e}},oO=async(t,e,n)=>{try{const i=Jn().currentUser;if(!i)throw new Error("User not authenticated");const s=Ni(He,"friendRequests"),o=Ii(s,Gt("fromUid","==",i.uid),Gt("toUid","==",t)),l=await eh(o);if(!l.empty&&l.docs[0].data().status==="pending")throw new Error("Friend request already sent");const c={fromUid:i.uid,fromUsername:n,toUid:t,toUsername:e,status:"pending",createdAt:Date.now()};return{id:(await dT(s,c)).id,...c}}catch(r){throw console.error("Error sending friend request:",r),r}},aO=async(t,e,n)=>{try{const i=Jn().currentUser;if(!i)throw new Error("User not authenticated");await hi(Rt(He,"friendRequests",t),{status:"accepted"});const s=await xo(i.uid),o=await xo(e);if(s&&o){const l=s.friends||[],c=o.friends||[];l.find(d=>d.uid===e)||l.push({uid:e,username:n,hashtag:o.hashtag,avatar:o.avatar}),c.find(d=>d.uid===i.uid)||c.push({uid:i.uid,username:s.username,hashtag:s.hashtag,avatar:s.avatar}),await hi(Rt(He,"users",i.uid),{friends:l}),await hi(Rt(He,"users",e),{friends:c})}}catch(r){throw console.error("Error accepting friend request:",r),r}},lO=async t=>{try{await hi(Rt(He,"friendRequests",t),{status:"rejected"})}catch(e){throw console.error("Error rejecting friend request:",e),e}},cO=(t,e)=>{try{const n=Ni(He,"friendRequests"),r=Ii(n,Gt("toUid","==",t),Gt("status","==","pending"));return kl(r,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));e(o)})}catch(n){throw console.error("Error subscribing to friend requests:",n),n}},uO=async(t,e)=>{try{const n=await xo(t),r=await xo(e);if(n&&r){const i=(n.friends||[]).filter(o=>o.uid!==e),s=(r.friends||[]).filter(o=>o.uid!==t);await hi(Rt(He,"users",t),{friends:i}),await hi(Rt(He,"users",e),{friends:s})}}catch(n){throw console.error("Error removing friend:",n),n}},Rp=(t,e)=>{try{const n=Rt(He,"users",t);return kl(n,i=>{if(i.exists()){const s=i.data(),o={uid:i.id,...s};console.log("[Profile Listener] Firestore snapshot received for",t),console.log("[Profile Listener] Full document data:",s),console.log("[Profile Listener] Profile data to callback:",{avatar:o.avatar,username:o.username,hashtag:o.hashtag,timestamp:new Date().toISOString()}),e(o)}else console.log("[Profile Listener] \u26A0\uFE0F User document does not exist:",t)})}catch(n){throw console.error("Error subscribing to user profile:",n),n}},dO=({isOpen:t,onClose:e,title:n,children:r})=>{if(console.log("[Modal] Modal component rendering, isOpen:",t),!t)return console.log("[Modal] isOpen is false, returning null"),null;const i=u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.7)"},children:p("div",{style:{backgroundColor:"var(--panel)",borderRadius:"12px",padding:"24px",zIndex:1e4,maxWidth:"600px",width:"90%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5)",border:"1px solid var(--border)"},children:[n&&u("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"16px",color:"var(--accent)"},children:n}),u("div",{children:r}),u("button",{style:{marginTop:"16px",backgroundColor:"var(--accent)",color:"white",borderRadius:"6px",padding:"10px 20px",border:"none",cursor:"pointer",fontWeight:500},onClick:e,onMouseOver:s=>s.currentTarget.style.opacity="0.8",onMouseOut:s=>s.currentTarget.style.opacity="1",children:"Close"})]})});return Fp.exports.createPortal(i,document.body)},hO=({open:t,onClose:e,userId:n,username:r,avatar:i})=>{var v;const[s,o]=M.exports.useState(null),[l,c]=M.exports.useState(null),[d,f]=M.exports.useState(!0);return M.exports.useEffect(()=>{if(console.log("[ProfileModal] useEffect triggered, open:",t,"userId:",n),!t||!n){console.log("[ProfileModal] Skipping load - open:",t,"userId:",n);return}console.log("[ProfileModal] Starting to load profile for user:",n),f(!0);let g=!0,E=null;console.log("[ProfileModal] Subscribing to user profile...");try{E=Rp(n,R=>{g&&(console.log("[ProfileModal] Profile data received:",R),o(R))})}catch(R){console.log("[ProfileModal] Error subscribing to profile:",R)}return(async()=>{try{console.log("[ProfileModal] Fetching game progress for user:",n);const R=await $o(Rt(He,"gameProgress",n));R.exists()&&g?(console.log("[ProfileModal] Game progress loaded:",R.data()),c(R.data())):g&&console.log("[ProfileModal] No game progress document found for user:",n)}catch(R){console.log("[ProfileModal] Error fetching game progress:",R)}finally{g&&f(!1)}})(),()=>{console.log("[ProfileModal] Cleaning up - unsubscribing from profile"),g=!1,E&&E()}},[t,n]),console.log("[ProfileModal] RENDERING, open:",t,"loading:",d,"profileData exists:",!!s),u(dO,{isOpen:t,onClose:e,title:`${r}'s Profile`,children:u("div",{style:{padding:16,maxHeight:"70vh",overflowY:"auto"},children:d?u("div",{style:{textAlign:"center",color:"var(--text-secondary)"},children:"Loading profile..."}):p(Vt,{children:[p("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24,paddingBottom:16,borderBottom:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"3rem",marginBottom:8},children:(s==null?void 0:s.avatar)||i}),u("h3",{style:{margin:"0 0 4px 0",fontSize:"1.1rem"},children:(s==null?void 0:s.username)||r}),p("p",{style:{margin:0,color:"var(--text-secondary)",fontSize:"0.85rem"},children:["#",(s==null?void 0:s.hashtag)||"0000"]}),(s==null?void 0:s.email)&&u("p",{style:{margin:"4px 0 0 0",color:"var(--text-secondary)",fontSize:"0.8rem"},children:s.email})]}),l&&p(Vt,{children:[p("div",{style:{marginBottom:20},children:[u("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"\u{1F4CA} Stats"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[p("div",{style:{padding:12,background:"var(--panel)",borderRadius:6,border:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"XP"}),u("div",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:((v=l.xp)==null?void 0:v.toLocaleString())||0})]}),p("div",{style:{padding:12,background:"var(--panel)",borderRadius:6,border:"1px solid var(--border)"},children:[u("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Completed Tasks"}),u("div",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:l.completedTasks||0})]})]})]}),l.unlockedTitles&&l.unlockedTitles.length>0&&p("div",{style:{marginBottom:20},children:[u("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"\u{1F451} Titles"}),u("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:l.unlockedTitles.map((g,E)=>u("div",{style:{padding:"4px 12px",background:"linear-gradient(135deg, var(--accent), #7c4dff)",borderRadius:12,fontSize:"0.8rem",fontWeight:"bold"},children:g},E))})]}),l.medals&&l.medals.length>0&&p("div",{style:{marginBottom:20},children:[u("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"\u{1F3C5} Medals"}),u("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:l.medals.map((g,E)=>p("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,padding:8,background:"var(--panel)",borderRadius:6,border:"1px solid var(--border)",fontSize:"0.75rem",textAlign:"center"},children:[u("div",{style:{fontSize:"1.2rem"},children:g.icon||"\u{1F3C5}"}),u("div",{style:{fontWeight:"bold",maxWidth:60,wordBreak:"break-word"},children:g.name})]},E))})]}),l.lastUpdated&&p("div",{style:{padding:12,background:"var(--panel)",borderRadius:6,border:"1px solid var(--border)",fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Last active: ",new Date(l.lastUpdated).toLocaleDateString()]})]}),!l&&u("div",{style:{padding:12,background:"var(--panel)",borderRadius:6,color:"var(--text-secondary)",textAlign:"center"},children:"No game progress data available"})]})})})},fO="adhd_friends",pO=({open:t,onClose:e,currentProfile:n,onNotificationCountChange:r,initialConversations:i=[],initialFriendRequests:s=[]})=>{const[o,l]=M.exports.useState("friends"),[c,d]=M.exports.useState(null),[f,v]=M.exports.useState([]),[g,E]=M.exports.useState(""),[P,R]=M.exports.useState(""),[y,_]=M.exports.useState(""),[k,D]=M.exports.useState([]),[O,B]=M.exports.useState(null),[F,b]=M.exports.useState(""),[S,T]=M.exports.useState(!1),[C,x]=M.exports.useState(i),[N,w]=M.exports.useState(!1),[G,J]=M.exports.useState(s),[se,me]=M.exports.useState(null),[ye,K]=M.exports.useState(!1),[H,z]=M.exports.useState(null);M.exports.useEffect(()=>{i&&(console.log("[SocialMenu] Syncing conversations from props:",i.length),x(i))},[i]),M.exports.useEffect(()=>{s&&(console.log("[SocialMenu] Syncing friend requests from props:",s.length),J(s))},[s]);const V=Ee.useRef(0);M.exports.useEffect(()=>{const j=C.reduce((te,Ve)=>te+(Ve.unreadCount||0),0),ae=V.current;console.log("[SocialMenu] Sound check: open=",t,"prev=",ae,"now=",j),!t&&j>ae&&(ae>0||j>0)&&(console.log("[SocialMenu] Playing message sound"),QD().catch(te=>console.log("[SocialMenu] Sound error:",te))),V.current=j},[C,t]);const $=Ee.useRef(0);M.exports.useEffect(()=>{const j=$.current;!t&&G.length>j&&(j>0||G.length>0)&&(console.log("[SocialMenu] Playing friend request sound"),YD().catch(ae=>console.log("[SocialMenu] Sound error:",ae))),$.current=G.length},[G,t]),M.exports.useEffect(()=>{console.log("[SocialMenu] RENDER: Friends state changed, now have",f.length,"friends:",f.map(j=>({uid:j.uid,avatar:j.avatar})))},[f]),M.exports.useEffect(()=>{const j=C.reduce((te,Ve)=>te+(Ve.unreadCount||0),0),ae=G.length+j;console.log("[SocialMenu] Notification count:",{friendRequests:G.length,unreadMessages:j,total:ae,conversations:C.map(te=>({friend:te.friendUsername,unread:te.unreadCount}))}),r&&r(ae)},[G.length,C,r]);const[re,ee]=M.exports.useState(!1),ue=Ee.useRef(null),_e=["\u{1F600}","\u{1F602}","\u{1F60D}","\u{1F914}","\u{1F60E}","\u{1F389}","\u{1F525}","\u{1F44D}","\u2764\uFE0F","\u2728","\u{1F680}","\u{1F4AA}","\u{1F91D}","\u{1F605}","\u{1F38A}","\u{1F4AF}"],de=Jn().currentUser;M.exports.useEffect(()=>{if(!de){d(null);return}(async()=>{try{const te=await xo(de.uid);te&&(d(te),te.friends&&v(te.friends))}catch(te){console.error("Error loading profile:",te)}})();const ae=Rp(de.uid,te=>{console.log("[SocialMenu] Own profile updated:",{avatar:te.avatar,customAvatarUrl:!!te.customAvatarUrl}),d(Ve=>Ve?{...Ve,...te}:te)});return()=>{ae()}},[de]),M.exports.useEffect(()=>{if(f.length===0)return;const j=[],ae=f.map(te=>te.uid);return console.log("[SocialMenu] Setting up profile listeners for",ae.length,"friends:",ae),ae.forEach(te=>{try{console.log("[SocialMenu] Setting up profile listener for friend:",te);const Ve=Rp(te,ze=>{console.log("[SocialMenu] \u{1F514} Friend profile callback FIRED for:",te),console.log("[SocialMenu] Callback received avatar:",ze.avatar),console.log("[SocialMenu] Callback received full profile:",{avatar:ze.avatar,username:ze.username,hashtag:ze.hashtag,uid:ze.uid}),v(Ze=>{var ir;console.log("[SocialMenu] Before state update - current friends:",Ze.map(je=>({uid:je.uid,avatar:je.avatar})));const nr=Ze.map(je=>je.uid===te?{...je,avatar:ze.avatar||je.avatar,customAvatarUrl:ze.customAvatarUrl||je.customAvatarUrl,username:ze.username||je.username,hashtag:ze.hashtag||je.hashtag}:je),rr=nr.find(je=>je.uid===te);return rr&&console.log("[SocialMenu] \u2705 Updated friend in state:",{uid:te,oldAvatar:(ir=Ze.find(je=>je.uid===te))==null?void 0:ir.avatar,newAvatar:rr.avatar}),console.log("[SocialMenu] After state update - new friends:",nr.map(je=>({uid:je.uid,avatar:je.avatar}))),nr}),(O==null?void 0:O.uid)===te&&(console.log("[SocialMenu] Updating selectedFriend avatar from",O.avatar,"to",ze.avatar),B(Ze=>Ze&&{...Ze,avatar:ze.avatar||Ze.avatar,customAvatarUrl:ze.customAvatarUrl||Ze.customAvatarUrl,username:ze.username||Ze.username,hashtag:ze.hashtag||Ze.hashtag}))});j.push(Ve)}catch(Ve){console.error("[SocialMenu] Error subscribing to friend profile:",Ve)}}),()=>{console.log("[SocialMenu] Cleaning up profile listeners for friends:",ae),j.forEach(te=>te())}},[f.map(j=>j.uid).join(","),O==null?void 0:O.uid]);const Zn=async()=>{if(_(""),!g.trim()){_("Username is required");return}if(!P.trim()){_("Hashtag is required");return}if(!de||!c){_("You must be logged in");return}try{w(!0),console.log("Adding friend - Username:",g.trim(),"Hashtag:",P.trim());const j=await sO(g.trim(),P.trim());if(j.length===0){_("User not found");return}const ae=j[0];if(f.some(te=>te.uid===ae.uid)){_("Already friends with this user");return}if(G.some(te=>te.fromUid===de.uid&&te.toUid===ae.uid)){_("Friend request already sent");return}await oO(ae.uid,ae.username,c.username),E(""),R(""),_("")}catch(j){console.error("Error sending friend request:",j),_(j.message||"Failed to send friend request")}finally{w(!1)}},br=j=>{me(j)},Rn=async()=>{if(!(!se||!de))try{w(!0),await uO(de.uid,se.uid);const j=f.filter(te=>te.uid!==se.uid);v(j);const ae=new Set(j.map(te=>te.uid));localStorage.setItem(fO,JSON.stringify(Array.from(ae))),(O==null?void 0:O.uid)===se.uid&&B(null),me(null)}catch(j){console.error("Error removing friend:",j),_("Failed to remove friend")}finally{w(!1)}},Nn=()=>{me(null)},ke=async()=>{if(!(!F.trim()||!O||!de||!c))try{w(!0),await tO(O.uid,O.username,F,c.username),b("")}catch(j){console.error("Error sending message:",j),_("Failed to send message")}finally{w(!1)}},er=j=>{b(F+j),T(!1)},Ho=async j=>{if(!!de)try{await deleteConversationFirestore(de.uid,j),(O==null?void 0:O.uid)===j&&B(null)}catch(ae){console.error("Error deleting conversation:",ae),_("Failed to delete conversation")}},tr=async j=>{try{if(w(!0),await aO(j.id,j.fromUid,j.fromUsername),de){const ae=await xo(de.uid);ae&&ae.friends&&v(ae.friends)}}catch(ae){console.error("Error accepting friend request:",ae),_("Failed to accept friend request")}finally{w(!1)}},yn=async j=>{try{w(!0),await lO(j)}catch(ae){console.error("Error rejecting friend request:",ae),_("Failed to reject friend request")}finally{w(!1)}};M.exports.useEffect(()=>{if(!O||!de){D([]);return}console.log("[SocialMenu] Opening conversation with:",O.username);try{console.log("[SocialMenu] About to mark messages as read for:",O.username),iO(de.uid,O.uid).catch(ae=>console.warn("[SocialMenu] Failed to mark messages as read:",ae));const j=nO(de.uid,O.uid,ae=>{D(ae)});return x(ae=>{const te=ae.map(Ve=>Ve.friendUid===O.uid?{...Ve,unreadCount:0}:Ve);return console.log("[SocialMenu] Marked conversation as read locally:",{friend:O.username,conversations:te.map(Ve=>({friend:Ve.friendUsername,unread:Ve.unreadCount}))}),te}),()=>j()}catch(j){console.error("Error subscribing to conversation:",j)}},[O,de,k.length]),M.exports.useEffect(()=>{ue.current&&setTimeout(()=>{ue.current&&(ue.current.scrollTop=ue.current.scrollHeight,ee(!1))},0)},[k,O]);const xr=()=>{if(ue.current){const{scrollTop:j,scrollHeight:ae,clientHeight:te}=ue.current,Ve=ae-j-te<50;ee(!Ve)}},Ke=()=>{ue.current&&(ue.current.scrollTop=ue.current.scrollHeight,ee(!1))};return p(Vt,{children:[p("aside",{className:`sidebar ${t?"open":""}`,"aria-hidden":!t,style:{left:"auto",right:0,transform:t?"translateX(0)":"translateX(110%)"},children:[p("div",{className:"sidebar-inner panel",children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,textAlign:"center"},children:[u("h4",{style:{margin:0,flex:1,fontSize:"1.3rem"},children:"\u{1F465} Social"}),u("button",{onClick:()=>{console.log("Close button clicked, calling onClose"),e()},className:"btn ghost","aria-label":"Close menu",children:"\u2715"})]}),p("div",{style:{display:"flex",gap:8,marginBottom:16,borderBottom:"1px solid var(--border)",paddingBottom:8},children:[u("button",{onClick:()=>l("friends"),style:{flex:1,padding:"6px 12px",border:"none",background:o==="friends"?"var(--primary)":"transparent",color:o==="friends"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:o==="friends"?"bold":"normal",fontSize:"0.9rem"},children:"Friends"}),p("button",{onClick:()=>l("requests"),style:{flex:1,padding:"6px 12px",border:"none",background:o==="requests"?"var(--primary)":"transparent",color:o==="requests"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:o==="requests"?"bold":"normal",fontSize:"0.9rem",position:"relative"},children:["Requests",G.length>0&&u("span",{style:{position:"absolute",top:-8,right:-8,background:"var(--danger, #ff6b6b)",color:"white",borderRadius:"50%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:G.length})]}),u("button",{onClick:()=>l("messages"),style:{flex:1,padding:"6px 12px",border:"none",background:o==="messages"?"var(--primary)":"transparent",color:o==="messages"?"white":"var(--text)",borderRadius:6,cursor:"pointer",fontWeight:o==="messages"?"bold":"normal",fontSize:"0.9rem"},children:"Messages"})]}),o==="friends"&&p("div",{children:[p("div",{style:{marginBottom:16},children:[p("div",{style:{display:"flex",gap:8,marginBottom:8},children:[u("input",{type:"text",placeholder:"Username",value:g,onChange:j=>{E(j.target.value),_("")},onKeyPress:j=>j.key==="Enter"&&Zn(),className:"input",style:{flex:1},disabled:N}),u("input",{type:"text",placeholder:"Hashtag",value:P,onChange:j=>{R(j.target.value),_("")},onKeyPress:j=>j.key==="Enter"&&Zn(),className:"input",style:{flex:1},disabled:N})]}),y&&u("div",{style:{color:"var(--danger, #ff6b6b)",fontSize:"0.85rem",padding:8,background:"rgba(255, 107, 107, 0.1)",borderRadius:4,marginBottom:8},children:y}),u("button",{onClick:Zn,className:"btn",style:{width:"100%"},disabled:N,children:N?"Adding...":"Add Friend"})]}),p("div",{style:{display:"flex",flexDirection:"column",gap:12,maxHeight:400,overflowY:"auto"},children:[c&&p("div",{style:{display:"flex",alignItems:"center",gap:8,padding:12,background:"linear-gradient(135deg, var(--accent) 0%, var(--accent-2) 100%)",borderRadius:8,border:"2px solid var(--accent-2)",boxShadow:"0 4px 12px rgba(99, 102, 241, 0.3)",position:"relative",overflow:"hidden"},children:[u("div",{style:{position:"absolute",top:0,right:-20,width:100,height:100,background:"rgba(255,255,255,0.1)",borderRadius:"50%",pointerEvents:"none"}}),c.customAvatarUrl?u("img",{src:c.customAvatarUrl,alt:c.username,style:{width:"2rem",height:"2rem",borderRadius:"50%",objectFit:"cover",position:"relative",zIndex:1}}):u("div",{style:{fontSize:"1.5rem",position:"relative",zIndex:1},children:c.avatar}),p("div",{style:{flex:1,position:"relative",zIndex:1},children:[p("div",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"white"},children:[c.username,p("span",{style:{color:"rgba(255,255,255,0.8)",marginLeft:4},children:["#",c.hashtag]})]}),u("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)",fontWeight:500,letterSpacing:.5},children:"YOU"})]})]}),f.length===0?u("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:16},children:"No friends yet. Add one to get started!"}):f.map(j=>(console.log("[SocialMenu] Rendering friend card:",{uid:j.uid,avatar:j.avatar,username:j.username}),p("div",{style:{display:"flex",alignItems:"center",gap:8,padding:8,background:"var(--panel)",borderRadius:6,border:"1px solid var(--border)"},children:[j.customAvatarUrl?u("img",{src:j.customAvatarUrl,alt:j.username,style:{width:"1.5rem",height:"1.5rem",borderRadius:"50%",objectFit:"cover"}}):u("div",{style:{fontSize:"1.2rem"},children:j.avatar}),u("div",{style:{flex:1},children:p("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:[j.username,p("span",{style:{color:"var(--muted)",marginLeft:4},children:["#",j.hashtag]})]})}),u("button",{onClick:()=>{B(j),l("messages")},className:"btn ghost",style:{padding:"4px 8px",fontSize:"0.8rem"},children:"\u{1F4AC}"}),u("button",{onClick:()=>{console.log("[SocialMenu] \u{1F441}\uFE0F Eye button clicked for friend:",j.username,j.uid),z(j),K(!0),console.log("[SocialMenu] Set profileModalOpen to true, selectedProfileFriend:",j)},className:"btn ghost",style:{padding:"4px 8px",fontSize:"0.8rem"},children:"\u{1F441}\uFE0F"}),u("button",{onClick:()=>br(j),className:"btn ghost",style:{padding:"4px 8px",fontSize:"0.8rem",color:"var(--danger, #ff6b6b)"},children:"\u2715"})]},j.uid)))]})]}),o==="requests"&&u("div",{style:{display:"flex",flexDirection:"column",gap:12,maxHeight:"calc(100% - 60px)",overflowY:"auto"},children:G.length===0?u("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:16},children:"No pending friend requests"}):G.map(j=>p("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:12,background:"var(--panel)",borderRadius:6,border:"1px solid var(--border)"},children:[p("div",{style:{display:"flex",alignItems:"center",gap:8},children:[u("div",{style:{fontSize:"1.2rem"},children:"\u{1F464}"}),p("div",{style:{flex:1},children:[u("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:j.fromUsername}),u("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:new Date(j.createdAt).toLocaleDateString()})]})]}),p("div",{style:{display:"flex",gap:8},children:[u("button",{onClick:()=>tr(j),className:"btn",style:{flex:1,fontSize:"0.85rem",padding:"6px 8px"},disabled:N,children:"\u2713 Accept"}),u("button",{onClick:()=>yn(j.id),className:"btn ghost",style:{flex:1,fontSize:"0.85rem",padding:"6px 8px",color:"var(--danger, #ff6b6b)"},disabled:N,children:"\u2715 Reject"})]})]},j.id))}),o==="messages"&&u("div",{style:{display:"flex",flexDirection:"column",height:"calc(100% - 60px)"},children:O?p(Vt,{children:[p("div",{style:{marginBottom:12,paddingBottom:12,borderBottom:"1px solid var(--border)"},children:[u("button",{onClick:()=>B(null),className:"btn ghost",style:{marginBottom:8},children:"\u2190 Back"}),p("div",{style:{fontWeight:"bold"},children:[O.username,p("span",{style:{color:"var(--muted)",marginLeft:4},children:["#",O.hashtag]})]})]}),p("div",{style:{flex:1,overflowY:"auto",marginBottom:12,minHeight:200,maxHeight:300,padding:8,background:"var(--panel)",borderRadius:6,position:"relative"},ref:ue,onScroll:xr,children:[k.length===0?u("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:16},children:"No messages yet. Start a conversation!"}):k.map(j=>p("div",{style:{marginBottom:8,padding:8,background:j.senderUid===(de==null?void 0:de.uid)?"var(--primary)":"var(--border)",borderRadius:6,color:j.senderUid===(de==null?void 0:de.uid)?"white":"var(--text)",textAlign:j.senderUid===(de==null?void 0:de.uid)?"right":"left"},children:[u("div",{style:{fontSize:"0.75rem",opacity:.7,marginBottom:4},children:new Date(j.createdAt).toLocaleTimeString()}),u("div",{children:j.text})]},j.id)),re&&u("button",{onClick:Ke,style:{position:"sticky",bottom:8,right:8,background:"var(--primary)",color:"white",border:"none",borderRadius:20,padding:"6px 12px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"bold",zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transition:"all 0.2s",width:"fit-content",marginLeft:"auto"},onMouseEnter:j=>{j.currentTarget.style.background="var(--accent)",j.currentTarget.style.transform="scale(1.05)"},onMouseLeave:j=>{j.currentTarget.style.background="var(--primary)",j.currentTarget.style.transform="scale(1)"},children:"\u2193 Bottom"})]}),p("div",{style:{display:"flex",gap:8},children:[u("input",{type:"text",placeholder:"Type message...",value:F,onChange:j=>b(j.target.value),onKeyPress:j=>j.key==="Enter"&&ke(),className:"input",style:{flex:1},disabled:N}),u("button",{onClick:()=>T(!S),className:"btn ghost",style:{padding:"8px 12px"},title:"Add emoji",children:"\u{1F60A}"}),u("button",{onClick:ke,className:"btn",style:{padding:"8px 12px"},disabled:N,children:N?"...":"Send"})]}),S&&u("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6,padding:8,background:"var(--panel)",border:"1px solid var(--border)",borderRadius:6,marginTop:8},children:_e.map((j,ae)=>u("button",{onClick:()=>er(j),style:{padding:"6px",fontSize:"1.5rem",background:"transparent",border:"1px solid var(--border)",borderRadius:4,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:te=>{te.currentTarget.style.background="var(--primary)",te.currentTarget.style.transform="scale(1.2)"},onMouseLeave:te=>{te.currentTarget.style.background="transparent",te.currentTarget.style.transform="scale(1)"},children:j},ae))})]}):u("div",{style:{display:"flex",flexDirection:"column",gap:8,overflowY:"auto"},children:C.length===0?u("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:16},children:"No messages yet. Start a conversation from the Friends tab!"}):C.map(j=>{const ae=f.find(te=>te.uid===j.friendUid);return ae?p("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[p("button",{onClick:()=>B(ae),style:{display:"flex",gap:12,padding:12,background:"linear-gradient(135deg, var(--accent) 0%, rgba(99, 102, 241, 0.1) 100%)",border:"1px solid var(--accent)",borderRadius:8,cursor:"pointer",textAlign:"left",transition:"all 0.2s",alignItems:"center",flex:1},onMouseEnter:te=>{te.currentTarget.style.background="linear-gradient(135deg, var(--accent) 0%, rgba(99, 102, 241, 0.2) 100%)",te.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseLeave:te=>{te.currentTarget.style.background="linear-gradient(135deg, var(--accent) 0%, rgba(99, 102, 241, 0.1) 100%)",te.currentTarget.style.boxShadow="none"},children:[ae.customAvatarUrl?u("img",{src:ae.customAvatarUrl,alt:ae.username,style:{width:"2rem",height:"2rem",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):u("div",{style:{fontSize:"2rem",flexShrink:0,lineHeight:1},children:ae.avatar}),p("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"white",marginBottom:4},children:ae.username}),u("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.8)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:4},children:u("span",{style:{fontWeight:"500"},children:j.lastMessage.substring(0,30)})}),u("div",{style:{fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.5)"},children:new Date(j.lastMessageTime.toMillis()).toLocaleDateString()})]})]}),u("button",{onClick:()=>Ho(j.friendUid),className:"btn ghost",style:{padding:"6px 8px",fontSize:"1rem",color:"var(--danger, #ff6b6b)",flexShrink:0,transition:"all 0.2s"},title:"Delete conversation",onMouseEnter:te=>{te.currentTarget.style.background="rgba(255, 107, 107, 0.2)"},onMouseLeave:te=>{te.currentTarget.style.background="transparent"},children:"\u{1F5D1}\uFE0F"})]},j.friendUid):null})})})]}),se&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:p("div",{style:{background:"var(--panel)",border:"2px solid var(--border)",borderRadius:8,padding:24,maxWidth:300,textAlign:"center"},children:[u("h3",{style:{margin:"0 0 8px 0",fontSize:"1.1rem"},children:"Remove Friend?"}),p("div",{style:{color:"var(--text-secondary)",marginBottom:16,fontSize:"0.9rem"},children:["Remove ",u("strong",{children:se.username})," from your friends list?"]}),p("div",{style:{display:"flex",gap:8},children:[u("button",{onClick:Rn,className:"btn",style:{flex:1,background:"var(--danger, #ff6b6b)",color:"white"},disabled:N,children:N?"Removing...":"Remove"}),u("button",{onClick:Nn,className:"btn ghost",style:{flex:1},disabled:N,children:"Cancel"})]})]})})]}),u("div",{className:`sidebar-backdrop ${t?"open":""}`,onClick:e}),H&&ye&&u(hO,{open:ye,onClose:()=>K(!1),userId:H.uid,username:H.username,avatar:H.avatar})]})},k1="adhd_quests_progress",mO=({open:t,onClose:e})=>{const n=Fw(),[r,i]=M.exports.useState(()=>{const c=localStorage.getItem(k1);return c?JSON.parse(c):[]});M.exports.useEffect(()=>{if(t){const c=localStorage.getItem(k1);c&&i(JSON.parse(c))}},[t]);const s=r.filter(c=>c.completed).length,o=r.filter(c=>c.category==="daily"&&!c.completed),l=r.filter(c=>c.category==="weekly"&&!c.completed);return p(Vt,{children:[u("aside",{className:"sidebar custom-scrollbar","aria-hidden":!t,style:{left:"auto",right:0,transform:t?"translateX(0)":"translateX(110%)"},children:p("div",{className:"sidebar-inner panel",children:[p("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[u("h4",{style:{margin:0,flex:1,fontSize:"1.3rem"},children:"\u{1F3C6} Quests"}),u("button",{onClick:e,className:"btn ghost","aria-label":"Close menu",children:"\u2715"})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:16,padding:12,background:"rgba(0, 0, 0, 0.1)",borderRadius:8},children:[p("div",{style:{textAlign:"center"},children:[p("div",{style:{fontSize:"1.3rem",fontWeight:"bold",color:"var(--accent)"},children:[s,"/",r.length]}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)"},children:"Completed"})]}),p("div",{style:{textAlign:"center"},children:[u("div",{style:{fontSize:"1.3rem",fontWeight:"bold",color:"#06b6d4"},children:r.filter(c=>c.completed).reduce((c,d)=>c+d.reward.gems,0)}),u("div",{style:{fontSize:"0.75rem",color:"var(--muted)"},children:"Gems Earned"})]})]}),o.length>0&&p("div",{style:{marginBottom:16},children:[u("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"\u2600\uFE0F DAILY"}),u("div",{style:{display:"flex",flexDirection:"column",gap:8},children:o.slice(0,3).map(c=>p("div",{style:{padding:10,background:"rgba(99, 102, 241, 0.1)",border:"1px solid var(--border)",borderRadius:6},children:[p("div",{style:{display:"flex",gap:8,alignItems:"start",marginBottom:6},children:[u("span",{style:{fontSize:"1.2rem"},children:c.icon}),p("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:c.title}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:c.description})]})]}),p("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:[c.progress," / ",c.target]}),u("div",{style:{width:"100%",height:4,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Math.min(100,c.progress/c.target*100)}%`,background:"var(--accent)"}})})]},c.id))})]}),l.length>0&&p("div",{style:{marginBottom:16},children:[u("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"var(--muted)"},children:"\u{1F4C5} WEEKLY"}),u("div",{style:{display:"flex",flexDirection:"column",gap:8},children:l.slice(0,3).map(c=>p("div",{style:{padding:10,background:"rgba(99, 102, 241, 0.1)",border:"1px solid var(--border)",borderRadius:6},children:[p("div",{style:{display:"flex",gap:8,alignItems:"start",marginBottom:6},children:[u("span",{style:{fontSize:"1.2rem"},children:c.icon}),p("div",{style:{flex:1,minWidth:0},children:[u("div",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:c.title}),u("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:c.description})]})]}),p("div",{style:{fontSize:"0.7rem",color:"var(--muted)"},children:[c.progress," / ",c.target]}),u("div",{style:{width:"100%",height:4,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:u("div",{style:{height:"100%",width:`${Math.min(100,c.progress/c.target*100)}%`,background:"var(--accent)"}})})]},c.id))})]}),r.length===0&&u("div",{style:{textAlign:"center",color:"var(--muted)",padding:16},children:"No quests yet. Check back later!"}),u("button",{onClick:()=>{n.push("/quests"),e()},className:"btn",style:{width:"100%",marginTop:16,padding:"0.75rem 1rem",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"bold",fontSize:"0.9rem"},children:"View All Quests \u2192"})]})}),u("div",{className:"sidebar-backdrop",style:{opacity:t?1:0,pointerEvents:t?"auto":"none"},onClick:e})]})},gO=()=>{const[t,e]=M.exports.useState(ot()),[n,r]=M.exports.useState(!1);M.exports.useState(Oe()),M.exports.useEffect(()=>{const o=()=>{e(ot())};return window.addEventListener("currencyUpdated",o),()=>window.removeEventListener("currencyUpdated",o)},[]);const i=[{amount:50,price:4.99,label:"50 \u{1F48E}"},{amount:200,price:14.99,label:"200 \u{1F48E}"},{amount:500,price:29.99,label:"500 \u{1F48E}"},{amount:1200,price:59.99,label:"1200 \u{1F48E}"}],s=o=>{const l=ot()+o;Ot(l),e(l),alert(`\u2728 Added ${o} gems!`),r(!1),window.dispatchEvent(new Event("currencyUpdated"))};return p(Vt,{children:[p("div",{onClick:()=>r(!0),style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:6,background:"linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",border:"1px solid rgba(236, 72, 153, 0.3)",fontSize:"0.95rem",fontWeight:600,color:"var(--text)",marginLeft:1700,marginRight:100,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.background="linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(168, 85, 247, 0.2) 100%)",o.currentTarget.style.borderColor="rgba(236, 72, 153, 0.6)"},onMouseLeave:o=>{o.currentTarget.style.background="linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)",o.currentTarget.style.borderColor="rgba(236, 72, 153, 0.3)"},children:[u("span",{style:{fontSize:"1.2rem"},children:"\u{1F48E}"}),u("span",{children:t})]}),n&&u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>r(!1),children:p("div",{className:"panel",onClick:o=>o.stopPropagation(),style:{padding:24,borderRadius:12,maxWidth:400,backgroundColor:"var(--panel)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)"},children:[u("h2",{style:{marginTop:0,marginBottom:20,color:"var(--text)"},children:"\u{1F48E} Buy Gems"}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:20},children:i.map(o=>p("button",{onClick:()=>s(o.amount),className:"btn primary",style:{padding:16,textAlign:"center",display:"flex",flexDirection:"column",gap:6},children:[u("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:o.label}),p("div",{style:{fontSize:"0.85rem",opacity:.9},children:["$",o.price]})]},o.amount))}),u("button",{onClick:()=>r(!1),className:"btn ghost",style:{width:"100%",padding:12},children:"Close"})]})})]})},Mn="adhd_quests",yO=()=>{const[t,e]=M.exports.useState(!1),[n,r]=M.exports.useState(!1),[i,s]=M.exports.useState(""),[o,l]=M.exports.useState(""),[c,d]=M.exports.useState(ET()),[f,v]=M.exports.useState(IT()),[g,E]=M.exports.useState(Fn());M.exports.useState(()=>Gi()),M.exports.useState(()=>js());const P="adhd_bronze_crate_last_opened";M.exports.useEffect(()=>{const y=()=>{r(!0),s(""),l("")};return window.addEventListener("devMenuKeyCombo",y),()=>window.removeEventListener("devMenuKeyCombo",y)},[]);const R=()=>{i==="adhd123"?(e(!0),r(!1),s(""),l("")):(l("Incorrect password"),s(""))};return!n&&!t?null:n?u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99998},children:p("div",{className:"panel",style:{maxWidth:400,padding:24,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},children:[u("h2",{style:{margin:"0 0 16px 0",textAlign:"center"},children:"Developer Menu"}),u("p",{style:{textAlign:"center",color:"var(--muted)",marginBottom:16},children:"Enter password to continue"}),u("input",{type:"password",className:"input",placeholder:"Password",value:i,onChange:y=>s(y.target.value),onKeyDown:y=>y.key==="Enter"&&R(),autoFocus:!0,style:{marginBottom:12}}),o&&u("div",{style:{color:"#ef4444",marginBottom:12,fontSize:"0.9rem",textAlign:"center"},children:o}),p("div",{style:{display:"flex",gap:8},children:[u("button",{className:"btn primary",onClick:R,style:{flex:1},children:"Unlock"}),u("button",{className:"btn ghost",onClick:()=>{r(!1),s(""),l("")},style:{flex:1},children:"Cancel"})]})]})}):t?u("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999},children:p("div",{className:"panel",style:{maxWidth:500,maxHeight:"80vh",padding:20,backgroundColor:"var(--panel)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",userSelect:"none",overflow:"auto"},children:[u("h2",{style:{margin:"0 0 12px 0",textAlign:"center"},children:"Development Menu"}),u("div",{style:{marginBottom:16,fontSize:"0.9rem",color:"var(--muted)"},children:p("div",{children:["Current XP: ",Oe()]})}),p("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"XP Controls"}),p("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"XP amount",id:"devXpInput",style:{flex:1}}),u("button",{className:"btn",onClick:()=>{const y=document.getElementById("devXpInput"),_=parseInt(y.value)||0;xn(Oe()+_),y.value=""},children:"Grant"})]}),u("button",{className:"btn ghost",onClick:()=>nl(),style:{marginTop:8,width:"100%"},children:"Reset XP"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Gem Controls"}),p("div",{style:{marginBottom:8},children:[p("div",{style:{fontSize:"0.9rem",marginBottom:8},children:["Current Gems: ",u("strong",{children:ot()})]}),p("div",{style:{display:"flex",gap:8},children:[u("input",{type:"number",className:"input",placeholder:"Gem amount",id:"devGemInput",style:{flex:1}}),u("button",{className:"btn",onClick:()=>{const y=document.getElementById("devGemInput"),_=parseInt(y.value);!isNaN(_)&&_>0&&(Jl(_),y.value="",window.dispatchEvent(new Event("currencyUpdated")))},children:"Add"})]})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{Ot(0),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 0"}),u("button",{className:"btn ghost",onClick:()=>{Ot(1e3),window.dispatchEvent(new Event("currencyUpdated"))},children:"Set to 1000"})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Skill Tree Controls"}),u("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,maxHeight:200,overflowY:"auto"},children:ih().map(y=>p("button",{className:"btn ghost",onClick:()=>PT(y.id),style:{fontSize:"0.75rem",opacity:id().includes(y.id)?1:.5},children:[id().includes(y.id)?"\u2713":"\u2717"," ",y.name]},y.id))})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Pet Controls"}),u("div",{style:{marginBottom:12},children:u("button",{className:"btn ghost",onClick:()=>{nd("Your Pet"),alert("Default pet created and synced to Firestore!")},style:{fontSize:"0.8rem",width:"100%",marginBottom:8},children:"\u2728 Create Default Pet"})}),p("div",{style:{marginBottom:12},children:[u("h4",{style:{margin:"0 0 8px 0",fontSize:"0.8rem",color:"var(--muted)"},children:"Delete Pet"}),u("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:6},children:Lt().map(y=>p("button",{className:"btn ghost",onClick:()=>{window.confirm(`Delete ${y.name}?`)&&(Pp(y.id),alert(`${y.name} deleted!`))},style:{fontSize:"0.7rem",padding:"4px 8px"},children:["Delete ",y.name]},y.id))})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Title Controls"}),p("div",{style:{marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{NT("developer"),alert("Developer title unlocked!")},style:{fontSize:"0.8rem",width:"100%",marginBottom:8},children:"Unlock Developer Title"}),u("button",{className:"btn ghost",onClick:()=>{ou("developer"),alert("Developer title equipped!")},style:{fontSize:"0.8rem",width:"100%"},children:"Equip Developer Title"})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Crate Timer Controls"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(P,"0"),alert("Bronze crate timer reset!")},style:{fontSize:"0.8rem"},children:"Reset Bronze Timer"}),u("button",{className:"btn ghost",onClick:()=>{localStorage.setItem(P,String(Date.now()-12*60*60*1e3)),alert("Bronze crate ready!")},style:{fontSize:"0.8rem"},children:"Bronze Ready Now"})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Critical Hit Testing"}),p("div",{style:{marginBottom:12,fontSize:"0.85rem",color:"var(--muted)"},children:[p("div",{children:["2x XP Chance: ",p("strong",{children:[g.criticalHitChance,"%"]})]}),p("div",{children:["Crate Chance: ",p("strong",{children:[g.crateRewardChance,"%"]})]})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[p("button",{className:`btn ${c?"primary":"ghost"}`,onClick:()=>{wT(),d(!0),E(Fn()),alert("Critical test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[c?"\u2713 ":"","Max Critical (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{ST(),d(!1),E(Fn()),alert("Critical test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Critical"})]}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[p("button",{className:`btn ${f?"primary":"ghost"}`,onClick:()=>{TT(),v(!0),E(Fn()),alert("Crate test mode enabled (100% chance)!")},style:{fontSize:"0.8rem"},children:[f?"\u2713 ":"","Max Crate (100%)"]}),u("button",{className:"btn ghost",onClick:()=>{CT(),v(!1),E(Fn()),alert("Crate test mode disabled (normal chances)!")},style:{fontSize:"0.8rem"},children:"Reset Crate"})]}),u("button",{className:"btn ghost",onClick:()=>{yr(10),alert("Granted 10 XP - check for critical!")},style:{fontSize:"0.8rem",width:"100%"},children:"Test Grant 10 XP"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Purchases"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(1)?y.delete(1):y.add(1),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(1)?1:.5)()},children:"\u2713 Sunset Theme"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(2)?y.delete(2):y.add(2),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(2)?1:.5)()},children:"\u2713 Ocean Theme"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(3)?y.delete(3):y.add(3),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(3)?1:.5)()},children:"\u2713 Avatar Border"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(4)?y.delete(4):y.add(4),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(4)?1:.5)()},children:"\u2713 Extra Slots"}),u("button",{className:"btn ghost",onClick:()=>{const y=new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]"));y.has(5)?y.delete(5):y.add(5),localStorage.setItem("adhd_purchases",JSON.stringify(Array.from(y))),window.dispatchEvent(new Event("purchasesUpdated"))},style:{fontSize:"0.8rem",opacity:(()=>new Set(JSON.parse(localStorage.getItem("adhd_purchases")||"[]")).has(5)?1:.5)()},children:"\u2713 Custom Avatar"})]})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Social Testing"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem("adhd_friends")||"[]"),_={id:"bot-9999",username:"TestBot",discriminator:"9999",avatar:"\u{1F916}"};y.find(k=>k.id===_.id)?alert("Test friend already exists!"):(y.push(_),localStorage.setItem("adhd_friends",JSON.stringify(y)),window.dispatchEvent(new Event("friendsUpdated")),alert("Test friend added!"))},style:{width:"100%",fontSize:"0.8rem"},children:"Add Test Friend (TestBot#9999)"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Pet Controls"}),u("button",{className:"btn ghost",onClick:()=>{nd("Your Pet"),alert("Default pet created and synced to Firestore!")},style:{fontSize:"0.8rem",width:"100%",marginBottom:8},children:"\u2728 Create Default Pet"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:12},children:[u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.hunger=0;const _=rl("gems");_&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:_}})),alert("Pet fed!"))}},style:{fontSize:"0.8rem"},children:"Feed Pet"}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.happiness=100;const _=vr();_&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:_}})),alert("Happiness maxed!"))}},style:{fontSize:"0.8rem"},children:"Max Happiness"}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.health=100;const _=vr();_&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:_}})),alert("Health maxed!"))}},style:{fontSize:"0.8rem"},children:"Max Health"}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();if(y){y.level=Math.min(y.level+1,10);const _=vr();_&&(window.dispatchEvent(new CustomEvent("petUpdated",{detail:{pet:_}})),alert("Level increased!"))}},style:{fontSize:"0.8rem"},children:"+1 Level"})]}),u("button",{className:"btn ghost",onClick:()=>{const y=Et();y&&(Pp(y.id),alert("Pet deleted!"))},style:{fontSize:"0.8rem",width:"100%"},children:"Delete Current Pet"})]}),p("div",{style:{borderBottom:"1px solid var(--border)",paddingBottom:12},children:[u("h3",{style:{margin:"0 0 8px 0"},children:"Quest Controls"}),p("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Mn)||"[]");y.forEach(_=>_.completed=!1),localStorage.setItem(Mn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests reset!")},style:{fontSize:"0.8rem"},children:"Reset All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Mn)||"[]");y.forEach(_=>_.completed=!0),localStorage.setItem(Mn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("All quests completed!")},style:{fontSize:"0.8rem"},children:"Complete All Quests"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Mn)||"[]"),_=y.find(k=>k.id===1);_&&(_.progress=5),localStorage.setItem(Mn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Task Master quest progressed!")},style:{fontSize:"0.8rem"},children:"+5 Tasks (Q1)"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Mn)||"[]"),_=y.find(k=>k.id===4);_&&(_.progress=7),localStorage.setItem(Mn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Streak Keeper quest progressed!")},style:{fontSize:"0.8rem"},children:"+7 Streak (Q4)"}),u("button",{className:"btn ghost",onClick:()=>{const y=JSON.parse(localStorage.getItem(Mn)||"[]"),_=y.find(k=>k.id===5);_&&(_.progress=5),localStorage.setItem(Mn,JSON.stringify(y)),window.dispatchEvent(new CustomEvent("questsReset")),alert("Level Up quest progressed!")},style:{fontSize:"0.8rem"},children:"+Level 5 (Q5)"})]})]}),u("button",{className:"btn",onClick:()=>e(!1),style:{width:"100%"},children:"Close"})]})]})}):null},vO=()=>{const[t,e]=M.exports.useState(!1),[n,r]=M.exports.useState(!1),[i,s]=M.exports.useState(!1),[o,l]=M.exports.useState(0),[c,d]=M.exports.useState([]),[f,v]=M.exports.useState([]),[g,E]=M.exports.useState(null),P=Ee.useRef([]);return M.exports.useEffect(()=>{const R=async()=>{console.log("[App] \u{1F3AF} User interaction detected, initializing AudioContext"),await GD(),document.removeEventListener("click",R),document.removeEventListener("touchstart",R),console.log("[App] User gesture listeners removed")};return document.addEventListener("click",R),document.addEventListener("touchstart",R),console.log("[App] Waiting for first user gesture to init audio..."),()=>{document.removeEventListener("click",R),document.removeEventListener("touchstart",R)}},[]),M.exports.useEffect(()=>{const R=y=>{y.ctrlKey&&y.altKey?y.key==="d"||y.key==="D"?P.current=["d"]:(y.key==="f"||y.key==="F")&&P.current.length===1&&P.current[0]==="d"&&(y.preventDefault(),window.dispatchEvent(new CustomEvent("devMenuKeyCombo")),P.current=[]):P.current=[]};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[]),M.exports.useEffect(()=>{const R=Jn(),y=TS(R,_=>{console.log("[App] Auth state changed, user:",_!=null&&_.uid?"logged in":"logged out"),E(_)});return()=>y()},[]),M.exports.useEffect(()=>{if(!g){console.log("[App] No authenticated user, skipping conversation setup"),l(0),d([]),v([]);return}console.log("[App] Setting up conversation and friend request listeners for:",g.uid);const R=rO(g.uid,_=>{console.log("[App] Conversations updated globally:",_.length,"conversations, unread:",_.map(k=>({friend:k.friendUsername,unread:k.unreadCount}))),d(_)}),y=cO(g.uid,_=>{console.log("[App] Friend requests updated globally:",_.length,"requests"),v(_)});return()=>{console.log("[App] Cleaning up conversation and friend request listeners"),R(),y()}},[g]),M.exports.useEffect(()=>{const R=c.reduce((_,k)=>_+(k.unreadCount||0),0),y=R+f.length;console.log("[App] Notification count updated:",{unreadMessages:R,friendRequests:f.length,total:y}),l(y)},[c,f]),u(zb,{children:p("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[p("div",{className:"topbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:120,paddingLeft:16},children:[u("div",{style:{width:40,height:40},children:!t&&p("button",{className:"hamburger",onClick:()=>e(!0),"aria-label":"Open menu",children:[u("span",{className:"hamburger-line"}),u("span",{className:"hamburger-line"}),u("span",{className:"hamburger-line"})]})}),u(gO,{})]}),u(eO,{open:t,onClose:()=>e(!1)}),u(mO,{open:i,onClose:()=>s(!1)}),u(pO,{open:n,onClose:()=>r(!1),onNotificationCountChange:l,initialConversations:c,initialFriendRequests:f}),u("div",{style:{flex:1,marginBottom:"120px"},children:p(Ub,{children:[u(Tn,{path:"/",exact:!0,component:xD}),u(Tn,{path:"/day",component:kD}),u(Tn,{path:"/week",component:PD}),u(Tn,{path:"/month",component:RD}),u(Tn,{path:"/store",component:LD}),u(Tn,{path:"/leaderboards",component:BD}),u(Tn,{path:"/quests",component:jD}),u(Tn,{path:"/insights",component:$D}),u(Tn,{path:"/pet",component:WD}),u(Tn,{path:"/skills",component:qD}),u(Tn,{path:"/settings",component:MD})]})}),u(ZD,{}),!i&&!n&&u("button",{onClick:()=>s(!0),className:"btn",style:{position:"fixed",bottom:180,right:24,width:56,height:56,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",border:"none",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:100},"aria-label":"Open quests menu",title:"Quests",children:"\u{1F3C6}"}),!n&&!i&&p("button",{onClick:()=>r(!0),className:"btn",style:{position:"fixed",bottom:100,right:24,width:56,height:56,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",border:"none",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:100},"aria-label":"Open social menu",title:"Social Menu",children:["\u{1F465}",o>0&&u("span",{style:{position:"absolute",top:-8,right:-8,background:"#ff4757",color:"white",borderRadius:"50%",width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",boxShadow:"0 2px 8px rgba(255, 71, 87, 0.4)"},children:o>99?"99+":o})]}),"}",u(yO,{})]})})};const _O=console.error,wO=console.warn;console.error=function(...t){const e=t.map(n=>String(n)).join(" ");e.includes("AudioContext")||e.includes("audio device")||e.includes("WebAudio")||_O.apply(console,t)};console.warn=function(...t){const e=t.map(n=>String(n)).join(" ");e.includes("AudioContext")||e.includes("audio device")||e.includes("WebAudio")||wO.apply(console,t)};window.addEventListener("error",t=>{t.message&&(t.message.includes("AudioContext")||t.message.includes("audio device")||t.message.includes("WebAudio"))&&t.preventDefault()},!0);window.addEventListener("unhandledrejection",t=>{t.reason&&String(t.reason).includes("AudioContext")&&t.preventDefault()},!0);HI.render(u(Ee.StrictMode,{children:u(ND,{children:u(vO,{})})}),document.getElementById("root"));
